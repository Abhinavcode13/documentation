<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3756px" preserveAspectRatio="none" style="width:1784px;height:3756px;" version="1.1" viewBox="0 0 1784 3756" width="1784px" zoomAndPan="magnify">
  <defs>
    <filter height="300%" id="f1xjyx2z5xc8ri" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
      <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
    </filter>
  </defs>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="489" x="645.5" y="28.708">1.1.1.a. FX Prepare Handler Consume (single message)</text>
    <rect fill="#FFFFE0" height="3709.5391" style="stroke:#A80036;stroke-width:1.0;" width="1661" x="16" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="791" y="53.02">Central Service</text>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="101.5" y="177.6484"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="3542.8125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="361.5" y="132.3828"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="929.5" y="3056.1406"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1097" y="3623.1953"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="135.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1340" y="1245.5078"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="135.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1340" y="1525.7031"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="135.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1340" y="2482.0234"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="62.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="859.375"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="77.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="1274.6406"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="77.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="1554.8359"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="107.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="2033.8281"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="122.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="2246.8281"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="77.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="2511.1563"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="3528.8125" style="stroke:#000000;stroke-width:2.0;" width="1760" x="10" y="139.3828"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="105.5313" style="stroke:#000000;stroke-width:2.0;" width="560" x="266.5" y="222.6484"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="74.3984" style="stroke:#000000;stroke-width:2.0;" width="540" x="276.5" y="246.7813"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="2063.4453" style="stroke:#000000;stroke-width:2.0;" width="1533.5" x="226.5" y="342.1797"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="160.7969" style="stroke:#000000;stroke-width:2.0;" width="1406.5" x="276.5" y="519.9766"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="1703.8516" style="stroke:#000000;stroke-width:2.0;" width="1513.5" x="236.5" y="694.7734"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="351.1328" style="stroke:#000000;stroke-width:2.0;" width="1493.5" x="246.5" y="718.9063"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="320" style="stroke:#000000;stroke-width:2.0;" width="1473.5" x="256.5" y="743.0391"/>
    <rect fill="#FFFFFF" height="263.7344" style="stroke:none;stroke-width:1.0;" width="1473.5" x="256.5" y="799.3047"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="234.9297" style="stroke:#000000;stroke-width:2.0;" width="1453.5" x="266.5" y="821.1094"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="112.3984" style="stroke:#000000;stroke-width:2.0;" width="906" x="276.5" y="936.6406"/>
    <rect fill="#FFFFFF" height="41.1328" style="stroke:none;stroke-width:1.0;" width="906" x="276.5" y="1007.9063"/>
    <rect fill="#FFFFFF" height="1321.5859" style="stroke:none;stroke-width:1.0;" width="1513.5" x="236.5" y="1077.0391"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="1292.7813" style="stroke:#000000;stroke-width:2.0;" width="1483.5" x="256.5" y="1098.8438"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="350.4609" style="stroke:#000000;stroke-width:2.0;" width="1432.5" x="276.5" y="1122.9766"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="266.1953" style="stroke:#000000;stroke-width:2.0;" width="1432.5" x="276.5" y="1487.4375"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="101.3984" style="stroke:#000000;stroke-width:2.0;" width="617" x="276.5" y="1767.6328"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="518" x="276.5" y="1883.0313"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="428.3281" style="stroke:#000000;stroke-width:2.0;" width="1463.5" x="266.5" y="1956.2969"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="169.0625" style="stroke:#000000;stroke-width:2.0;" width="1443.5" x="276.5" y="1980.4297"/>
    <rect fill="#FFFFFF" height="228.1328" style="stroke:none;stroke-width:1.0;" width="1463.5" x="266.5" y="2156.4922"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="199.3281" style="stroke:#000000;stroke-width:2.0;" width="1443.5" x="276.5" y="2178.2969"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="1241.5703" style="stroke:#000000;stroke-width:2.0;" width="1452.5" x="266.5" y="2419.625"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="181.9297" style="stroke:#000000;stroke-width:2.0;" width="1432.5" x="276.5" y="2443.7578"/>
    <rect fill="#FFFFFF" height="567.0547" style="stroke:none;stroke-width:1.0;" width="1452.5" x="266.5" y="3094.1406"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="106" x2="106" y1="122.3828" y2="3685.1953"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="366.5" x2="366.5" y1="122.3828" y2="3685.1953"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="934.5" x2="934.5" y1="122.3828" y2="3685.1953"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1101.5" x2="1101.5" y1="122.3828" y2="3685.1953"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1230.5" x2="1230.5" y1="122.3828" y2="3685.1953"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1344.5" x2="1344.5" y1="122.3828" y2="3685.1953"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1625" x2="1625" y1="122.3828" y2="3685.1953"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="24" y="83.0859"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="20" y="87.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="27" y="107.0811">topic-transfer-prepare</text>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="24" y="3684.1953"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="20" y="3688.1953"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="27" y="3708.1904">topic-transfer-prepare</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="286.5" y="119.0811">Prepare Event Handler</text>
    <ellipse cx="366.5" cy="90.0859" fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/>
    <polygon fill="#A80036" points="362.5,78.0859,368.5,73.0859,366.5,78.0859,368.5,83.0859,362.5,78.0859" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="286.5" y="3697.1904">Prepare Event Handler</text>
    <ellipse cx="366.5" cy="3716.4922" fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/>
    <polygon fill="#A80036" points="362.5,3704.4922,368.5,3699.4922,366.5,3704.4922,368.5,3709.4922,362.5,3704.4922" style="stroke:#A80036;stroke-width:1.0;"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="851.5" y="83.0859"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="847.5" y="87.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="854.5" y="107.0811">topic-transfer-position</text>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="851.5" y="3684.1953"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="847.5" y="3688.1953"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="854.5" y="3708.1904">topic-transfer-position</text>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1035.5" y="83.0859"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1031.5" y="87.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1038.5" y="107.0811">Notification-Topic</text>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1035.5" y="3684.1953"/>
    <rect fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1031.5" y="3688.1953"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1038.5" y="3708.1904">Notification-Topic</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1182.5" y="119.0811">Position DAO</text>
    <ellipse cx="1230.5" cy="90.0859" fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/>
    <line style="stroke:#A80036;stroke-width:2.0;" x1="1218.5" x2="1242.5" y1="104.0859" y2="104.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1182.5" y="3697.1904">Position DAO</text>
    <ellipse cx="1230.5" cy="3716.4922" fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/>
    <line style="stroke:#A80036;stroke-width:2.0;" x1="1218.5" x2="1242.5" y1="3730.4922" y2="3730.4922"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1288.5" y="119.0811">Participant DAO</text>
    <ellipse cx="1345" cy="90.0859" fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/>
    <line style="stroke:#A80036;stroke-width:2.0;" x1="1333" x2="1357" y1="104.0859" y2="104.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1288.5" y="3697.1904">Participant DAO</text>
    <ellipse cx="1345" cy="3716.4922" fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/>
    <line style="stroke:#A80036;stroke-width:2.0;" x1="1333" x2="1357" y1="3730.4922" y2="3730.4922"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1577" y="119.0811">Central Store</text>
    <path d="M1607,70.0859 C1607,60.0859 1625,60.0859 1625,60.0859 C1625,60.0859 1643,60.0859 1643,70.0859 L1643,96.0859 C1643,106.0859 1625,106.0859 1625,106.0859 C1625,106.0859 1607,106.0859 1607,96.0859 L1607,70.0859 " fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#000000;stroke-width:1.5;"/>
    <path d="M1607,70.0859 C1607,80.0859 1625,80.0859 1625,80.0859 C1625,80.0859 1643,80.0859 1643,70.0859 " fill="none" style="stroke:#000000;stroke-width:1.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1577" y="3697.1904">Central Store</text>
    <path d="M1607,3710.4922 C1607,3700.4922 1625,3700.4922 1625,3700.4922 C1625,3700.4922 1643,3700.4922 1643,3710.4922 L1643,3736.4922 C1643,3746.4922 1625,3746.4922 1625,3746.4922 C1625,3746.4922 1607,3746.4922 1607,3736.4922 L1607,3710.4922 " fill="#FEFECE" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#000000;stroke-width:1.5;"/>
    <path d="M1607,3710.4922 C1607,3720.4922 1625,3720.4922 1625,3720.4922 C1625,3720.4922 1643,3720.4922 1643,3710.4922 " fill="none" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="101.5" y="177.6484"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="3542.8125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="361.5" y="132.3828"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="929.5" y="3056.1406"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1097" y="3623.1953"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="135.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1340" y="1245.5078"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="135.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1340" y="1525.7031"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="135.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1340" y="2482.0234"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="62.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="859.375"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="77.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="1274.6406"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="77.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="1554.8359"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="107.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="2033.8281"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="122.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="2246.8281"/>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="77.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1620" y="2511.1563"/>
    <path d="M10,139.3828 L250,139.3828 L250,146.3828 L240,156.3828 L10,156.3828 L10,139.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="3528.8125" style="stroke:#000000;stroke-width:2.0;" width="1760" x="10" y="139.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="25" y="152.4497">Prepare Handler Consume</text>
    <polygon fill="#A80036" points="122.5,173.6484,112.5,177.6484,122.5,181.6484,118.5,177.6484" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="116.5" x2="360.5" y1="177.6484" y2="177.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="128.5" y="172.5825">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="141.5" y="172.5825">Consume Prepare event message</text>
    <path d="M266.5,222.6484 L354.5,222.6484 L354.5,229.6484 L344.5,239.6484 L266.5,239.6484 L266.5,222.6484 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="105.5313" style="stroke:#000000;stroke-width:2.0;" width="560" x="266.5" y="222.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="281.5" y="235.7153">break</text>
    <path d="M276.5,246.7813 L405.5,246.7813 L405.5,253.7813 L395.5,263.7813 L276.5,263.7813 L276.5,246.7813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="74.3984" style="stroke:#000000;stroke-width:2.0;" width="540" x="276.5" y="246.7813"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="291.5" y="259.8481">Filter Event</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="300.1797" y2="300.1797"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="300.1797" y2="313.1797"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="313.1797" y2="313.1797"/>
    <polygon fill="#A80036" points="382.5,309.1797,372.5,313.1797,382.5,317.1797,378.5,313.1797" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="378.5" y="287.5474">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="413" x="391.5" y="279.981">Filter event - Rules: type == &apos;prepare&apos; &amp;&amp; action == &apos;fx_prepare&apos;</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="391.5" y="295.1138">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="485.5" y="295.1138">2001</text>
    <path d="M226.5,342.1797 L462.5,342.1797 L462.5,349.1797 L452.5,359.1797 L226.5,359.1797 L226.5,342.1797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="2063.4453" style="stroke:#000000;stroke-width:2.0;" width="1533.5" x="226.5" y="342.1797"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="241.5" y="355.2466">Validate Prepare Transfer</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="380.4453" y2="380.4453"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="380.4453" y2="393.4453"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="393.4453" y2="393.4453"/>
    <polygon fill="#A80036" points="382.5,389.4453,372.5,393.4453,382.5,397.4453,378.5,393.4453" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="378.5" y="375.3794">3</text>
    <text fill="#AAAAAA" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="391.5" y="375.3794">Schema validation of the incoming message</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="422.5781" y2="422.5781"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="422.5781" y2="435.5781"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="435.5781" y2="435.5781"/>
    <polygon fill="#A80036" points="382.5,431.5781,372.5,435.5781,382.5,439.5781,378.5,435.5781" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="378.5" y="417.5122">4</text>
    <text fill="#AAAAAA" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="453" x="391.5" y="417.5122">Verify the message&apos;s signature (to be confirmed in future requirement)</text>
    <path d="M376,448.5781 L376,503.5781 L749,503.5781 L749,458.5781 L739,448.5781 L376,448.5781 " fill="#D3D3D3" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#A80036;stroke-width:1.0;"/>
    <path d="M739,448.5781 L739,458.5781 L749,458.5781 L739,448.5781 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="382" y="465.645">The above validation steps are already handled by</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="382" y="480.7778">the ML-Adapter for the open source implementation.</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="352" x="382" y="495.9106">It may need to be added in future for custom adapters.</text>
    <path d="M276.5,519.9766 L441.5,519.9766 L441.5,526.9766 L431.5,536.9766 L276.5,536.9766 L276.5,519.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="160.7969" style="stroke:#000000;stroke-width:2.0;" width="1406.5" x="276.5" y="519.9766"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="291.5" y="533.0435">Duplicate Check</text>
    <polygon fill="#A80036" points="1613,579.2422,1623,583.2422,1613,587.2422,1617,583.2422" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1619" y1="583.2422" y2="583.2422"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="378.5" y="578.1763">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="391.5" y="578.1763">Request Duplicate Check</text>
    <rect fill="#FFFFFF" filter="url(#f1xjyx2z5xc8ri)" height="55.3984" style="stroke:#000000;stroke-width:2.0;" width="1388.5" x="283.5" y="591.2422"/>
    <polygon fill="#EEEEEE" points="283.5,591.2422,349.5,591.2422,349.5,598.2422,339.5,608.2422,283.5,608.2422,283.5,591.2422" style="stroke:#000000;stroke-width:2.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="296.5" y="605.3091">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="900.25" y="624.3091">Request Duplicate Check</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="904.25" y="639.4419"/>
    <polygon fill="#A80036" points="382.5,668.7734,372.5,672.7734,382.5,676.7734,378.5,672.7734" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1624" y1="672.7734" y2="672.7734"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="667.7075">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="408" x="401.5" y="667.7075">Return { hasDuplicateId: Boolean, hasDuplicateHash: Boolean }</text>
    <path d="M236.5,694.7734 L300.5,694.7734 L300.5,701.7734 L290.5,711.7734 L236.5,711.7734 L236.5,694.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="1703.8516" style="stroke:#000000;stroke-width:2.0;" width="1513.5" x="236.5" y="694.7734"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="251.5" y="707.8403">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="315.5" y="706.9839">[hasDuplicateId == TRUE]</text>
    <path d="M246.5,718.9063 L437.5,718.9063 L437.5,725.9063 L427.5,735.9063 L246.5,735.9063 L246.5,718.9063 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="351.1328" style="stroke:#000000;stroke-width:2.0;" width="1493.5" x="246.5" y="718.9063"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="261.5" y="731.9731">Process Duplication</text>
    <path d="M256.5,743.0391 L320.5,743.0391 L320.5,750.0391 L310.5,760.0391 L256.5,760.0391 L256.5,743.0391 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="320" style="stroke:#000000;stroke-width:2.0;" width="1473.5" x="256.5" y="743.0391"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="271.5" y="756.106">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="374" x="335.5" y="755.2495">[hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == FALSE]</text>
    <path d="M376,765.1719 L376,790.1719 L734,790.1719 L734,775.1719 L724,765.1719 L376,765.1719 " fill="#D3D3D3" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#A80036;stroke-width:1.0;"/>
    <path d="M724,765.1719 L724,775.1719 L734,775.1719 L724,765.1719 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="382" y="782.2388">Validate Prepare Transfer (failure) - Modified Request</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="256.5" x2="1730" y1="800.3047" y2="800.3047"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="368" x="261.5" y="810.5151">[hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == TRUE]</text>
    <path d="M266.5,821.1094 L354.5,821.1094 L354.5,828.1094 L344.5,838.1094 L266.5,838.1094 L266.5,821.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="234.9297" style="stroke:#000000;stroke-width:2.0;" width="1453.5" x="266.5" y="821.1094"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="281.5" y="834.1763">break</text>
    <polygon fill="#A80036" points="1608,855.375,1618,859.375,1608,863.375,1612,859.375" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1614" y1="859.375" y2="859.375"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="378.5" y="854.3091">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="391.5" y="854.3091">stateRecord = await getFxTransferById(commitRequestId)</text>
    <polygon fill="#FFFFE0" filter="url(#f1xjyx2z5xc8ri)" points="1549,872.375,1700,872.375,1710,883.375,1700,895.375,1549,895.375,1539,883.375,1549,872.375" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1551" y="888.4419">fxTransferStateChange</text>
    <polygon fill="#A80036" points="382.5,917.6406,372.5,921.6406,382.5,925.6406,378.5,921.6406" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1624" y1="921.6406" y2="921.6406"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="916.5747">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="401.5" y="916.5747">Return stateRecord</text>
    <path d="M276.5,936.6406 L340.5,936.6406 L340.5,943.6406 L330.5,953.6406 L276.5,953.6406 L276.5,936.6406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="112.3984" style="stroke:#000000;stroke-width:2.0;" width="906" x="276.5" y="936.6406"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="291.5" y="949.7075">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="481" x="355.5" y="948.8511">[[COMMITTED, ABORTED].includes(stateRecord.transferStateEnumeration)]</text>
    <polygon fill="#A80036" points="1090,995.9063,1100,999.9063,1090,1003.9063,1094,999.9063" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1096" y1="999.9063" y2="999.9063"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="378.5" y="994.8403">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="492" x="391.5" y="994.8403">Produce message [functionality = TRANSFER, action = PREPAPE_DUPLICATE]</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="276.5" x2="1182.5" y1="1008.9063" y2="1008.9063"/>
    <path d="M376,1014.9063 L376,1039.9063 L569,1039.9063 L569,1024.9063 L559,1014.9063 L376,1014.9063 " fill="#D3D3D3" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#A80036;stroke-width:1.0;"/>
    <path d="M559,1014.9063 L559,1024.9063 L569,1024.9063 L559,1014.9063 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="382" y="1031.9731">Ignore - resend in progress</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="236.5" x2="1750" y1="1078.0391" y2="1078.0391"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="241.5" y="1088.2495">[hasDuplicateId == FALSE]</text>
    <path d="M256.5,1098.8438 L492.5,1098.8438 L492.5,1105.8438 L482.5,1115.8438 L256.5,1115.8438 L256.5,1098.8438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="1292.7813" style="stroke:#000000;stroke-width:2.0;" width="1483.5" x="256.5" y="1098.8438"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="271.5" y="1111.9106">Validate Prepare Request</text>
    <path d="M276.5,1122.9766 L429.5,1122.9766 L429.5,1129.9766 L419.5,1139.9766 L276.5,1139.9766 L276.5,1122.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="350.4609" style="stroke:#000000;stroke-width:2.0;" width="1432.5" x="276.5" y="1122.9766"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="291.5" y="1136.0435">Validate Payer</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1161.2422" y2="1161.2422"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1161.2422" y2="1174.2422"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1174.2422" y2="1174.2422"/>
    <polygon fill="#A80036" points="382.5,1170.2422,372.5,1174.2422,382.5,1178.2422,378.5,1174.2422" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1156.1763">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="400.5" y="1156.1763">Validate FSPIOP-Source header matches initiatingFsp</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1203.375" y2="1203.375"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1203.375" y2="1216.375"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1216.375" y2="1216.375"/>
    <polygon fill="#A80036" points="382.5,1212.375,372.5,1216.375,382.5,1220.375,378.5,1216.375" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1198.3091">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="506" x="400.5" y="1198.3091">Validate payload.sourceAmount and payload.targetAmount scale and precision</text>
    <polygon fill="#A80036" points="1328,1241.5078,1338,1245.5078,1328,1249.5078,1332,1245.5078" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1334" y1="1245.5078" y2="1245.5078"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1240.4419">12</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="400.5" y="1240.4419">Request to retrieve Payer Participant details (if it exists)</text>
    <polygon fill="#A80036" points="1608,1270.6406,1618,1274.6406,1608,1278.6406,1612,1274.6406" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="1350" x2="1614" y1="1274.6406" y2="1274.6406"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1357" y="1269.5747">13</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1379" y="1269.5747">Request Participant details</text>
    <polygon fill="#FFFFE0" filter="url(#f1xjyx2z5xc8ri)" points="1560,1287.6406,1689,1287.6406,1699,1306.6406,1689,1325.6406,1560,1325.6406,1550,1306.6406,1560,1287.6406" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1562" y="1303.7075">participant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1562" y="1318.8403">participantCurrency</text>
    <polygon fill="#A80036" points="1361,1348.0391,1351,1352.0391,1361,1356.0391,1357,1352.0391" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1355" x2="1624" y1="1352.0391" y2="1352.0391"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1367" y="1346.9731">14</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1389" y="1346.9731">Return Participant details if it exists</text>
    <polygon fill="#A80036" points="382.5,1377.1719,372.5,1381.1719,382.5,1385.1719,378.5,1381.1719" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1344" y1="1381.1719" y2="1381.1719"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1376.106">15</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="410.5" y="1376.106">Return Participant details if it exists</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1410.3047" y2="1410.3047"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1410.3047" y2="1423.3047"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1423.3047" y2="1423.3047"/>
    <polygon fill="#A80036" points="382.5,1419.3047,372.5,1423.3047,382.5,1427.3047,378.5,1423.3047" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1405.2388">16</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="400.5" y="1405.2388">Validate Payer participant is active</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1452.4375" y2="1452.4375"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1452.4375" y2="1465.4375"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1465.4375" y2="1465.4375"/>
    <polygon fill="#A80036" points="382.5,1461.4375,372.5,1465.4375,382.5,1469.4375,378.5,1465.4375" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1447.3716">17</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="522" x="400.5" y="1447.3716">Validate Payer participant position account for the source currency [exists, active]</text>
    <path d="M276.5,1487.4375 L432.5,1487.4375 L432.5,1494.4375 L422.5,1504.4375 L276.5,1504.4375 L276.5,1487.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="266.1953" style="stroke:#000000;stroke-width:2.0;" width="1432.5" x="276.5" y="1487.4375"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="291.5" y="1500.5044">Validate Payee</text>
    <polygon fill="#A80036" points="1328,1521.7031,1338,1525.7031,1328,1529.7031,1332,1525.7031" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1334" y1="1525.7031" y2="1525.7031"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1520.6372">18</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="357" x="400.5" y="1520.6372">Request to retrieve Payee Participant details (if it exists)</text>
    <polygon fill="#A80036" points="1608,1550.8359,1618,1554.8359,1608,1558.8359,1612,1554.8359" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="1350" x2="1614" y1="1554.8359" y2="1554.8359"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1357" y="1549.77">19</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1379" y="1549.77">Request Participant details</text>
    <polygon fill="#FFFFE0" filter="url(#f1xjyx2z5xc8ri)" points="1560,1567.8359,1689,1567.8359,1699,1586.8359,1689,1605.8359,1560,1605.8359,1550,1586.8359,1560,1567.8359" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1562" y="1583.9028">participant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1562" y="1599.0356">participantCurrency</text>
    <polygon fill="#A80036" points="1361,1628.2344,1351,1632.2344,1361,1636.2344,1357,1632.2344" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1355" x2="1624" y1="1632.2344" y2="1632.2344"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1367" y="1627.1685">20</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1389" y="1627.1685">Return Participant details if it exists</text>
    <polygon fill="#A80036" points="382.5,1657.3672,372.5,1661.3672,382.5,1665.3672,378.5,1661.3672" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1344" y1="1661.3672" y2="1661.3672"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1656.3013">21</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="410.5" y="1656.3013">Return Participant details if it exists</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1690.5" y2="1690.5"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1690.5" y2="1703.5"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1703.5" y2="1703.5"/>
    <polygon fill="#A80036" points="382.5,1699.5,372.5,1703.5,382.5,1707.5,378.5,1703.5" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1685.4341">22</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="400.5" y="1685.4341">Validate Payee participant is active</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1732.6328" y2="1732.6328"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1732.6328" y2="1745.6328"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1745.6328" y2="1745.6328"/>
    <polygon fill="#A80036" points="382.5,1741.6328,372.5,1745.6328,382.5,1749.6328,378.5,1745.6328" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1727.5669">23</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="521" x="400.5" y="1727.5669">Validate Payee participant position account for the target currency [exists, active]</text>
    <path d="M276.5,1767.6328 L569.5,1767.6328 L569.5,1774.6328 L559.5,1784.6328 L276.5,1784.6328 L276.5,1767.6328 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="101.3984" style="stroke:#000000;stroke-width:2.0;" width="617" x="276.5" y="1767.6328"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="291.5" y="1780.6997">Validate Condition and Expiration</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1805.8984" y2="1805.8984"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1805.8984" y2="1818.8984"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1818.8984" y2="1818.8984"/>
    <polygon fill="#A80036" points="382.5,1814.8984,372.5,1818.8984,382.5,1822.8984,378.5,1818.8984" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1800.8325">24</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="400.5" y="1800.8325">Validate cryptographic condition</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1848.0313" y2="1848.0313"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1848.0313" y2="1861.0313"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1861.0313" y2="1861.0313"/>
    <polygon fill="#A80036" points="382.5,1857.0313,372.5,1861.0313,382.5,1865.0313,378.5,1861.0313" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1842.9653">25</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="481" x="400.5" y="1842.9653">Validate expiration [payload.expiration is valid ISO date and not in the past]</text>
    <path d="M276.5,1883.0313 L789.5,1883.0313 L789.5,1890.0313 L779.5,1900.0313 L276.5,1900.0313 L276.5,1883.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="518" x="276.5" y="1883.0313"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="468" x="291.5" y="1896.0981">Validate Different FSPs (if ENABLE_ON_US_TRANSFER == false)</text>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="413.5" y1="1921.2969" y2="1921.2969"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="413.5" x2="413.5" y1="1921.2969" y2="1934.2969"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="372.5" x2="413.5" y1="1934.2969" y2="1934.2969"/>
    <polygon fill="#A80036" points="382.5,1930.2969,372.5,1934.2969,382.5,1938.2969,378.5,1934.2969" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="1916.231">26</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="400.5" y="1916.231">Validate Payer and Payee FSPs are different</text>
    <path d="M266.5,1956.2969 L330.5,1956.2969 L330.5,1963.2969 L320.5,1973.2969 L266.5,1973.2969 L266.5,1956.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="428.3281" style="stroke:#000000;stroke-width:2.0;" width="1463.5" x="266.5" y="1956.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="281.5" y="1969.3638">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="345.5" y="1968.5073">[Validate Prepare Transfer (success)]</text>
    <path d="M276.5,1980.4297 L797.5,1980.4297 L797.5,1987.4297 L787.5,1997.4297 L276.5,1997.4297 L276.5,1980.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="169.0625" style="stroke:#000000;stroke-width:2.0;" width="1443.5" x="276.5" y="1980.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="476" x="291.5" y="1993.4966">Persist Transfer State (with transferState=&apos;RECEIVED-PREPARE&apos;)</text>
    <polygon fill="#A80036" points="1608,2029.8281,1618,2033.8281,1608,2037.8281,1612,2033.8281" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1614" y1="2033.8281" y2="2033.8281"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="2021.1958">27</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="400.5" y="2013.6294">Request to persist transfer</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="400.5" y="2028.7622">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="494.5" y="2028.7622">2003</text>
    <polygon fill="#FFFFE0" filter="url(#f1xjyx2z5xc8ri)" points="1549,2046.8281,1700,2046.8281,1710,2080.8281,1700,2114.8281,1549,2114.8281,1539,2080.8281,1549,2046.8281" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1551" y="2062.895">fxTransfer</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="1551" y="2078.0278">fxTransferParticipant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1551" y="2093.1606">fxTransferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1551" y="2108.2935">fxTransferExtension</text>
    <polygon fill="#A80036" points="382.5,2137.4922,372.5,2141.4922,382.5,2145.4922,378.5,2141.4922" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1624" y1="2141.4922" y2="2141.4922"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="2136.4263">28</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="410.5" y="2136.4263">Return success</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="266.5" x2="1730" y1="2157.4922" y2="2157.4922"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="271.5" y="2167.7026">[Validate Prepare Transfer (failure)]</text>
    <path d="M276.5,2178.2969 L1139.5,2178.2969 L1139.5,2185.2969 L1129.5,2195.2969 L276.5,2195.2969 L276.5,2178.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="199.3281" style="stroke:#000000;stroke-width:2.0;" width="1443.5" x="276.5" y="2178.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="818" x="291.5" y="2191.3638">Persist Transfer State (with transferState=&apos;INVALID&apos;) (Introducing a new status INVALID to mark these entries)</text>
    <polygon fill="#A80036" points="1608,2242.8281,1618,2246.8281,1608,2250.8281,1612,2246.8281" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1614" y1="2246.8281" y2="2246.8281"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="2226.6294">29</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="400.5" y="2211.4966">Request to persist transfer</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="327" x="400.5" y="2226.6294">(when Payee/Payer/crypto-condition validation fails)</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="400.5" y="2241.7622">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="494.5" y="2241.7622">2003</text>
    <polygon fill="#FFFFE0" filter="url(#f1xjyx2z5xc8ri)" points="1549,2259.8281,1700,2259.8281,1710,2300.8281,1700,2342.8281,1549,2342.8281,1539,2300.8281,1549,2259.8281" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1551" y="2275.895">fxTransfer</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="1551" y="2291.0278">fxTransferParticipant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1551" y="2306.1606">fxTransferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1551" y="2321.2935">fxTransferExtension</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="1551" y="2336.4263">fxTransferError</text>
    <polygon fill="#A80036" points="382.5,2365.625,372.5,2369.625,382.5,2373.625,378.5,2369.625" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1624" y1="2369.625" y2="2369.625"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="2364.5591">30</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="410.5" y="2364.5591">Return success</text>
    <path d="M266.5,2419.625 L330.5,2419.625 L330.5,2426.625 L320.5,2436.625 L266.5,2436.625 L266.5,2419.625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="1241.5703" style="stroke:#000000;stroke-width:2.0;" width="1452.5" x="266.5" y="2419.625"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="281.5" y="2432.6919">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="345.5" y="2431.8354">[Validate Prepare Transfer (success)]</text>
    <path d="M276.5,2443.7578 L581.5,2443.7578 L581.5,2450.7578 L571.5,2460.7578 L276.5,2460.7578 L276.5,2443.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
    <rect fill="none" height="181.9297" style="stroke:#000000;stroke-width:2.0;" width="1432.5" x="276.5" y="2443.7578"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="260" x="291.5" y="2456.8247">Hydrate Transfer Prepare Message</text>
    <polygon fill="#A80036" points="1328,2478.0234,1338,2482.0234,1328,2486.0234,1332,2482.0234" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1334" y1="2482.0234" y2="2482.0234"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="2476.9575">31</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="519" x="400.5" y="2476.9575">Get participant and currency for FX transfer (with &apos;payload.determiningTransferId&apos;)</text>
    <polygon fill="#A80036" points="1608,2507.1563,1618,2511.1563,1608,2515.1563,1612,2511.1563" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="1350" x2="1614" y1="2511.1563" y2="2511.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1357" y="2506.0903">32</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1379" y="2506.0903">Request participant and currency</text>
    <polygon fill="#FFFFE0" filter="url(#f1xjyx2z5xc8ri)" points="1560,2524.1563,1689,2524.1563,1699,2543.1563,1689,2562.1563,1560,2562.1563,1550,2543.1563,1560,2524.1563" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1562" y="2540.2231">participant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1562" y="2555.356">participantCurrency</text>
    <polygon fill="#A80036" points="1361,2584.5547,1351,2588.5547,1361,2592.5547,1357,2588.5547" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1355" x2="1624" y1="2588.5547" y2="2588.5547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1367" y="2583.4888">33</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="1389" y="2583.4888">Return participant and currency</text>
    <polygon fill="#A80036" points="382.5,2613.6875,372.5,2617.6875,382.5,2621.6875,378.5,2617.6875" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="376.5" x2="1344" y1="2617.6875" y2="2617.6875"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="2612.6216">34</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="410.5" y="2612.6216">Return participant and currency</text>
    <path d="M376,2637.6875 L376,3010.6875 L677,3010.6875 L677,2647.6875 L667,2637.6875 L376,2637.6875 " fill="#FFFF00" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#A80036;stroke-width:1.0;"/>
    <path d="M667,2637.6875 L667,2647.6875 L677,2647.6875 L667,2637.6875 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="382" y="2654.7544">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="382" y="2669.8872">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="398" y="2685.02">id: &lt;transferMessage.commitRequestId&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="398" y="2700.1528">from: &lt;transferMessage.initiatingFsp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="398" y="2715.2856">to: &lt;transferMessage.counterPartyFsp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="398" y="2730.4185">type: application/json</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="398" y="2745.5513">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="414" y="2760.6841">headers: &lt;transferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="414" y="2775.8169">payload: &lt;hydratedTransferMessage&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="398" y="2790.9497">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="398" y="2806.0825">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="414" y="2821.2153">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="430" y="2836.3481">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="430" y="2851.481">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="430" y="2866.6138">type: position,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="430" y="2881.7466">action: fx_prepare,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="430" y="2896.8794">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="430" y="2912.0122">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="446" y="2927.145">status: &quot;success&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="446" y="2942.2778">code: 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="430" y="2957.4106">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="414" y="2972.5435">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="398" y="2987.6763">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="382" y="3002.8091">}</text>
    <polygon fill="#A80036" points="917.5,3052.1406,927.5,3056.1406,917.5,3060.1406,921.5,3056.1406" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="923.5" y1="3056.1406" y2="3056.1406"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="3043.5083">35</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="400.5" y="3035.9419">Route &amp; Publish Position event for Payer</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="400.5" y="3051.0747">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="494.5" y="3051.0747">2003</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="266.5" x2="1719" y1="3095.1406" y2="3095.1406"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="271.5" y="3105.3511">[Validate Prepare Transfer (failure)]</text>
    <path d="M376,3113.9453 L376,3576.9453 L989,3576.9453 L989,3123.9453 L979,3113.9453 L376,3113.9453 " fill="#FFFF00" filter="url(#f1xjyx2z5xc8ri)" style="stroke:#A80036;stroke-width:1.0;"/>
    <path d="M979,3113.9453 L979,3123.9453 L989,3123.9453 L979,3113.9453 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="382" y="3131.0122">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="382" y="3146.145">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="398" y="3161.2778">id: &lt;transferMessage.commitRequestId&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="398" y="3176.4106">from: &lt;ledgerName&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="398" y="3191.5435">to: &lt;transferMessage.initiatingFsp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="398" y="3206.6763">type: application/json</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="398" y="3221.8091">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="414" y="3236.9419">headers: &lt;transferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="414" y="3252.0747">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="430" y="3267.2075">&quot;errorInformation&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="528" x="446" y="3282.3403">&quot;errorCode&quot;: &lt;possible codes: [2003, 3100, 3105, 3106, 3202, 3203, 3300, 3301]&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="446" y="3297.4731">&quot;errorDescription&quot;: &quot;&lt;refer to section 35.1.3 for description&gt;&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="446" y="3312.606">&quot;extensionList&quot;: &lt;transferMessage.extensionList&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="414" y="3327.7388">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="398" y="3342.8716">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="398" y="3358.0044">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="414" y="3373.1372">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="430" y="3388.27">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="430" y="3403.4028">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="430" y="3418.5356">type: notification,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="430" y="3433.6685">action: fx_prepare,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="430" y="3448.8013">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="430" y="3463.9341">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="446" y="3479.0669">status: &apos;error&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="446" y="3494.1997">code: &lt;errorInformation.errorCode&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="446" y="3509.3325">description: &lt;errorInformation.errorDescription&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="430" y="3524.4653">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="414" y="3539.5981">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="398" y="3554.731">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="382" y="3569.8638">}</text>
    <polygon fill="#A80036" points="1085,3619.1953,1095,3623.1953,1085,3627.1953,1089,3623.1953" style="stroke:#A80036;stroke-width:1.0;"/>
    <line style="stroke:#A80036;stroke-width:1.0;" x1="371.5" x2="1091" y1="3623.1953" y2="3623.1953"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.5" y="3610.563">36</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="400.5" y="3602.9966">Publish Notification (failure) event for Payer</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="400.5" y="3618.1294">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="494.5" y="3618.1294">2003</text>
  </g>
</svg>
