
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Bulk Transfer Operations Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-swagger/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-changelog/changelog.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc/page-toc.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="transfers/1.1.0-bulk-prepare-transfer-request-overview.html" />
    
    
    <link rel="prev" href="../central-ledger/transfers/2.3.1-timeout-handler-consume.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Mojaloop Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../mojaloop-background/">
            
                <a href="../../mojaloop-background/">
            
                    
                    Mojaloop Background
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../mojaloop-background/core-scenarios.html">
            
                <a href="../../mojaloop-background/core-scenarios.html">
            
                    
                    Core Scenarios
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../mojaloop-background/level-one-principles.html">
            
                <a href="../../mojaloop-background/level-one-principles.html">
            
                    
                    Level One Principles
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../onboarding.html">
            
                <a href="../../onboarding.html">
            
                    
                    Onboarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../deployment-guide/">
            
                <a href="../../deployment-guide/">
            
                    
                    Deployment Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../deployment-guide/releases.html">
            
                <a href="../../deployment-guide/releases.html">
            
                    
                    Releases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../deployment-guide/local-setup-linux.html">
            
                <a href="../../deployment-guide/local-setup-linux.html">
            
                    
                    Local Setup Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../deployment-guide/local-setup-mac.html">
            
                <a href="../../deployment-guide/local-setup-mac.html">
            
                    
                    Local Setup Mac
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../deployment-guide/local-setup-windows.html">
            
                <a href="../../deployment-guide/local-setup-windows.html">
            
                    
                    Local Setup Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../deployment-guide/deployment-troubleshooting.html">
            
                <a href="../../deployment-guide/deployment-troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../contributors-guide/">
            
                <a href="../../contributors-guide/">
            
                    
                    Contributors Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../contributors-guide/standards/">
            
                <a href="../../contributors-guide/standards/">
            
                    
                    Standards
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../../contributors-guide/standards/versioning.html">
            
                <a href="../../contributors-guide/standards/versioning.html">
            
                    
                    Versioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../../contributors-guide/standards/creating-new-features.html">
            
                <a href="../../contributors-guide/standards/creating-new-features.html">
            
                    
                    Creating new Features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../contributors-guide/tools-and-technologies/">
            
                <a href="../../contributors-guide/tools-and-technologies/">
            
                    
                    Tools and Technologies
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../../contributors-guide/tools-and-technologies/pragmatic-rest.html">
            
                <a href="../../contributors-guide/tools-and-technologies/pragmatic-rest.html">
            
                    
                    Pragmatic REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../../contributors-guide/tools-and-technologies/code-quality-metrics.html">
            
                <a href="../../contributors-guide/tools-and-technologies/code-quality-metrics.html">
            
                    
                    Code Quality Metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../../contributors-guide/tools-and-technologies/automated-testing.html">
            
                <a href="../../contributors-guide/tools-and-technologies/automated-testing.html">
            
                    
                    Automated Testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../contributors-guide/documentation/">
            
                <a href="../../contributors-guide/documentation/">
            
                    
                    Documentation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../../contributors-guide/documentation/api-documentation.html">
            
                <a href="../../contributors-guide/documentation/api-documentation.html">
            
                    
                    API Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="../../contributors-guide/documentation/documentation-style-guide.html">
            
                <a href="../../contributors-guide/documentation/documentation-style-guide.html">
            
                    
                    Documentation Style Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../contributors-guide/frequently-asked-questions.html">
            
                <a href="../../contributors-guide/frequently-asked-questions.html">
            
                    
                    Frequently Asked Questions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../">
            
                <a href="../">
            
                    
                    Mojaloop Technical Overview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../overview/">
            
                <a href="../overview/">
            
                    
                    Mojaloop Hub
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../overview/components-PI5.html">
            
                <a href="../overview/components-PI5.html">
            
                    
                    Legacy Architecture - PI5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../overview/components-PI3.html">
            
                <a href="../overview/components-PI3.html">
            
                    
                    Legacy Architecture - PI3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../account-lookup-service/">
            
                <a href="../account-lookup-service/">
            
                    
                    Account-Lookup Service
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../account-lookup-service/als-get-participants.html">
            
                <a href="../account-lookup-service/als-get-participants.html">
            
                    
                    GET Participants
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../account-lookup-service/als-post-participants.html">
            
                <a href="../account-lookup-service/als-post-participants.html">
            
                    
                    POST Participants
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="../account-lookup-service/als-post-participants-batch.html">
            
                <a href="../account-lookup-service/als-post-participants-batch.html">
            
                    
                    POST Participants (batch)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.4" data-path="../account-lookup-service/als-del-participants.html">
            
                <a href="../account-lookup-service/als-del-participants.html">
            
                    
                    DEL Participants
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.5" data-path="../account-lookup-service/als-get-parties.html">
            
                <a href="../account-lookup-service/als-get-parties.html">
            
                    
                    GET Parties
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../quoting-service/">
            
                <a href="../quoting-service/">
            
                    
                    Quoting Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../central-ledger/">
            
                <a href="../central-ledger/">
            
                    
                    Central-Ledger Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../central-ledger/admin-operations/">
            
                <a href="../central-ledger/admin-operations/">
            
                    
                    Admin Operations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1.1" data-path="../central-ledger/admin-operations/1.0.0-post-participant-position-limit.html">
            
                <a href="../central-ledger/admin-operations/1.0.0-post-participant-position-limit.html">
            
                    
                    POST Participant Limit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.2" data-path="../central-ledger/admin-operations/1.1.0-get-participant-limit-details.html">
            
                <a href="../central-ledger/admin-operations/1.1.0-get-participant-limit-details.html">
            
                    
                    GET Participant Limit Details
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.3" data-path="../central-ledger/admin-operations/1.0.0-get-limits-for-all-participants.html">
            
                <a href="../central-ledger/admin-operations/1.0.0-get-limits-for-all-participants.html">
            
                    
                    GET All Participant Limits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.4" data-path="../central-ledger/admin-operations/1.1.0-post-participant-limits.html">
            
                <a href="../central-ledger/admin-operations/1.1.0-post-participant-limits.html">
            
                    
                    POST Participant limits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.5" data-path="../central-ledger/admin-operations/1.1.5-get-transfer-status.html">
            
                <a href="../central-ledger/admin-operations/1.1.5-get-transfer-status.html">
            
                    
                    GET Transfer Status
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.6" data-path="../central-ledger/admin-operations/3.1.0-post-participant-callback-details.html">
            
                <a href="../central-ledger/admin-operations/3.1.0-post-participant-callback-details.html">
            
                    
                    POST Participant Callback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.7" data-path="../central-ledger/admin-operations/3.1.0-get-participant-callback-details.html">
            
                <a href="../central-ledger/admin-operations/3.1.0-get-participant-callback-details.html">
            
                    
                    GET Participant Callback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.8" data-path="../central-ledger/admin-operations/4.1.0-get-participant-position-details.html">
            
                <a href="../central-ledger/admin-operations/4.1.0-get-participant-position-details.html">
            
                    
                    GET Participant Position
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.1.9" data-path="../central-ledger/admin-operations/4.2.0-get-positions-of-all-participants.html">
            
                <a href="../central-ledger/admin-operations/4.2.0-get-positions-of-all-participants.html">
            
                    
                    GET All Participants Positions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2" data-path="../central-ledger/transfers/">
            
                <a href="../central-ledger/transfers/">
            
                    
                    Transfer Operations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.1" data-path="../central-ledger/transfers/1.1.0-prepare-transfer-request.html">
            
                <a href="../central-ledger/transfers/1.1.0-prepare-transfer-request.html">
            
                    
                    Prepare Handler
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.1.1" data-path="../central-ledger/transfers/1.1.1.a-prepare-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.1.1.a-prepare-handler-consume.html">
            
                    
                    Prepare Handler Consume (a)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.1.2" data-path="../central-ledger/transfers/1.1.1.b-prepare-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.1.1.b-prepare-handler-consume.html">
            
                    
                    Prepare Handler Consume (b)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.2" data-path="../central-ledger/transfers/1.3.0-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.3.0-position-handler-consume.html">
            
                    
                    Prepare Position Handler
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.2.1" data-path="../central-ledger/transfers/1.3.1-prepare-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.3.1-prepare-position-handler-consume.html">
            
                    
                    Prepare Position Handler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.2.2" data-path="../central-ledger/transfers/1.1.2.a-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.1.2.a-position-handler-consume.html">
            
                    
                    Position Handler Consume (a)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.2.3" data-path="../central-ledger/transfers/1.1.2.b-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.1.2.b-position-handler-consume.html">
            
                    
                    Position Handler Consume (b)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.3" data-path="../central-ledger/transfers/2.1.0-fulfil-transfer-request.html">
            
                <a href="../central-ledger/transfers/2.1.0-fulfil-transfer-request.html">
            
                    
                    Fulfil Handler
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.3.1" data-path="../central-ledger/transfers/2.1.1-fulfil-handler-consume.html">
            
                <a href="../central-ledger/transfers/2.1.1-fulfil-handler-consume.html">
            
                    
                    Fulfil Handler Consume
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.4" data-path="../central-ledger/transfers/1.3.0-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.3.0-position-handler-consume.html">
            
                    
                    Fulfil Position Handler
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.4.1" data-path="../central-ledger/transfers/1.3.2-fulfil-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.3.2-fulfil-position-handler-consume.html">
            
                    
                    Fulfil Position Handler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.5" data-path="../central-ledger/transfers/2.2.0-fulfil-reject-transfer.html">
            
                <a href="../central-ledger/transfers/2.2.0-fulfil-reject-transfer.html">
            
                    
                    Fulfil Reject Transfer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.5.1" data-path="../central-ledger/transfers/2.2.0.a-fulfil-abort-transfer.html">
            
                <a href="../central-ledger/transfers/2.2.0.a-fulfil-abort-transfer.html">
            
                    
                    Fulfil Reject Transfer (a)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.5.2" data-path="../central-ledger/transfers/2.2.1-fulfil-reject-handler.html">
            
                <a href="../central-ledger/transfers/2.2.1-fulfil-reject-handler.html">
            
                    
                    Fulfil Handler (Reject-Abort)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.6" >
            
                <span>
            
                    
                    Notifications
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.6.1" data-path="../central-ledger/transfers/1.1.4.a-send-notification-to-participant.html">
            
                <a href="../central-ledger/transfers/1.1.4.a-send-notification-to-participant.html">
            
                    
                    Notification to Participant (a)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.6.2" data-path="../central-ledger/transfers/1.1.4.b-send-notification-to-participant.html">
            
                <a href="../central-ledger/transfers/1.1.4.b-send-notification-to-participant.html">
            
                    
                    Notification to Participant (b)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.7" >
            
                <span>
            
                    
                    Reject/Abort
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.7.1" data-path="../central-ledger/transfers/1.3.3-abort-position-handler-consume.html">
            
                <a href="../central-ledger/transfers/1.3.3-abort-position-handler-consume.html">
            
                    
                    Abort Position Handler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.8" >
            
                <span>
            
                    
                    Timeout
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.2.8.1" data-path="../central-ledger/transfers/2.3.0-transfer-timeout.html">
            
                <a href="../central-ledger/transfers/2.3.0-transfer-timeout.html">
            
                    
                    Transfer Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2.8.2" data-path="../central-ledger/transfers/2.3.1-timeout-handler-consume.html">
            
                <a href="../central-ledger/transfers/2.3.1-timeout-handler-consume.html">
            
                    
                    Timeout Handler Consume
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.6.4.3" data-path="./">
            
                <a href="./">
            
                    
                    Bulk Transfer Operations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.3.1" data-path="transfers/1.1.0-bulk-prepare-transfer-request-overview.html">
            
                <a href="transfers/1.1.0-bulk-prepare-transfer-request-overview.html">
            
                    
                    Bulk Prepare Overview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.3.1.1" data-path="transfers/1.1.1-bulk-prepare-handler-consume.html">
            
                <a href="transfers/1.1.1-bulk-prepare-handler-consume.html">
            
                    
                    Bulk Prepare Handler
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.2" data-path="transfers/1.2.1-prepare-handler-consume-for-bulk.html">
            
                <a href="transfers/1.2.1-prepare-handler-consume-for-bulk.html">
            
                    
                    Prepare Handler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.3" data-path="transfers/1.3.0-position-handler-consume-overview.html">
            
                <a href="transfers/1.3.0-position-handler-consume-overview.html">
            
                    
                    Position Handler Overview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.3.3.1" data-path="transfers/1.3.1-prepare-position-handler-consume.html">
            
                <a href="transfers/1.3.1-prepare-position-handler-consume.html">
            
                    
                    Prepare Position Handler Consume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.3.2" data-path="transfers/2.3.1-fulfil-position-handler-consume.html">
            
                <a href="transfers/2.3.1-fulfil-position-handler-consume.html">
            
                    
                    Fulfil Position Handler Consume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.3.3" data-path="transfers/2.3.2-position-consume-abort.html">
            
                <a href="transfers/2.3.2-position-consume-abort.html">
            
                    
                    Fulfil Abort Position Handler Consume
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.4" data-path="transfers/2.1.0-bulk-fulfil-transfer-request-overview.html">
            
                <a href="transfers/2.1.0-bulk-fulfil-transfer-request-overview.html">
            
                    
                    Bulk Fulfil Handler Overview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.3.4.1" data-path="transfers/2.1.1-bulk-fulfil-handler-consume.html">
            
                <a href="transfers/2.1.1-bulk-fulfil-handler-consume.html">
            
                    
                    Bulk Fulfil Handler Consume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.4.2" data-path="transfers/2.2.1-fulfil-commit-for-bulk.html">
            
                <a href="transfers/2.2.1-fulfil-commit-for-bulk.html">
            
                    
                    Fulfil Handler - Commit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.4.3" data-path="transfers/2.2.2-fulfil-abort-for-bulk.html">
            
                <a href="transfers/2.2.2-fulfil-abort-for-bulk.html">
            
                    
                    Fulfil Handler - Reject/Abort
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.5" data-path="transfers/1.4.1-bulk-processing-handler.html">
            
                <a href="transfers/1.4.1-bulk-processing-handler.html">
            
                    
                    Bulk Processing Handler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.6" >
            
                <span>
            
                    
                    Notifications
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.3.6.1" data-path="../central-ledger/transfers/1.1.4.a-send-notification-to-participant.html">
            
                <a href="../central-ledger/transfers/1.1.4.a-send-notification-to-participant.html">
            
                    
                    Notification to Participant (a)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.6.2" data-path="../central-ledger/transfers/1.1.4.b-send-notification-to-participant.html">
            
                <a href="../central-ledger/transfers/1.1.4.b-send-notification-to-participant.html">
            
                    
                    Notification to Participant (b)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4.3.7" data-path="transfers/3.1.0-transfer-timeout-overview-for-bulk.html">
            
                <a href="transfers/3.1.0-transfer-timeout-overview-for-bulk.html">
            
                    
                    Timeout Overview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.3.7.1" data-path="transfers/3.1.1-transfer-timeout-handler-consume.html">
            
                <a href="transfers/3.1.1-transfer-timeout-handler-consume.html">
            
                    
                    Timeout Handler Consume
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../central-settlements/">
            
                <a href="../central-settlements/">
            
                    
                    Central-Settlements Service
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../central-settlements/settlement-process/">
            
                <a href="../central-settlements/settlement-process/">
            
                    
                    Settlement Process
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1.1" data-path="../central-settlements/settlement-process/get-settlement-windows-by-params.html">
            
                <a href="../central-settlements/settlement-process/get-settlement-windows-by-params.html">
            
                    
                    Settlement Windows By Params
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.2" data-path="../central-settlements/settlement-process/get-settlement-window-by-id.html">
            
                <a href="../central-settlements/settlement-process/get-settlement-window-by-id.html">
            
                    
                    Request Settlement Window
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.3" data-path="../central-settlements/settlement-process/post-close-settlement-window.html">
            
                <a href="../central-settlements/settlement-process/post-close-settlement-window.html">
            
                    
                    Close Settlement Window
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.4" data-path="../central-settlements/settlement-process/post-create-settlement.html">
            
                <a href="../central-settlements/settlement-process/post-create-settlement.html">
            
                    
                    Create Settlement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.5" data-path="../central-settlements/settlement-process/get-settlement-by-id.html">
            
                <a href="../central-settlements/settlement-process/get-settlement-by-id.html">
            
                    
                    Request Settlement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.6" data-path="../central-settlements/settlement-process/put-settlement-transfer-ack.html">
            
                <a href="../central-settlements/settlement-process/put-settlement-transfer-ack.html">
            
                    
                    Settlement Transfer Acknowledgement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.7" data-path="../central-settlements/settlement-process/put-settlement-abort.html">
            
                <a href="../central-settlements/settlement-process/put-settlement-abort.html">
            
                    
                    Settlement Abort
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.8" data-path="../central-settlements/settlement-process/get-settlement-by-spa.html">
            
                <a href="../central-settlements/settlement-process/get-settlement-by-spa.html">
            
                    
                    Request Settlement By SPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.1.9" data-path="../central-settlements/settlement-process/get-settlements-by-params.html">
            
                <a href="../central-settlements/settlement-process/get-settlements-by-params.html">
            
                    
                    Request Settlements By Params
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5.2" data-path="../central-settlements/funds-in-out/">
            
                <a href="../central-settlements/funds-in-out/">
            
                    
                    Funds In/Out
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.2.1" data-path="../central-settlements/funds-in-out/reconciliation-transfer-prepare.html">
            
                <a href="../central-settlements/funds-in-out/reconciliation-transfer-prepare.html">
            
                    
                    Reconciliation Transfer Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2.2" data-path="../central-settlements/funds-in-out/transfer-state-and-position-change.html">
            
                <a href="../central-settlements/funds-in-out/transfer-state-and-position-change.html">
            
                    
                    Transfer State and Position Change
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2.3" data-path="../central-settlements/funds-in-out/funds-in-prepare-reserve-commit.html">
            
                <a href="../central-settlements/funds-in-out/funds-in-prepare-reserve-commit.html">
            
                    
                    Funds In
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2.4" data-path="../central-settlements/funds-in-out/funds-out-prepare-reserve.html">
            
                <a href="../central-settlements/funds-in-out/funds-out-prepare-reserve.html">
            
                    
                    Funds Out - Prepare & Reserve
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2.5" data-path="../central-settlements/funds-in-out/funds-out-commit.html">
            
                <a href="../central-settlements/funds-in-out/funds-out-commit.html">
            
                    
                    Funds Out - Commit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2.6" data-path="../central-settlements/funds-in-out/funds-out-abort.html">
            
                <a href="../central-settlements/funds-in-out/funds-out-abort.html">
            
                    
                    Funds Out - Abort
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../central-event-processor/">
            
                <a href="../central-event-processor/">
            
                    
                    Central-Event-Processor Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.1" data-path="../central-event-processor/9.1.0-event-handler-placeholder.html">
            
                <a href="../central-event-processor/9.1.0-event-handler-placeholder.html">
            
                    
                    Event Handler (Placeholder)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.2" data-path="../central-event-processor/5.1.1-notification-handler-for-rejections.html">
            
                <a href="../central-event-processor/5.1.1-notification-handler-for-rejections.html">
            
                    
                    Notification Handler For Rejections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.3" data-path="../central-event-processor/signature-validation.html">
            
                <a href="../central-event-processor/signature-validation.html">
            
                    
                    Signature Validation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../fraud-services/">
            
                <a href="../fraud-services/">
            
                    
                    Fraud Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.7.1" data-path="../fraud-services/related-documents/documentation.html">
            
                <a href="../fraud-services/related-documents/documentation.html">
            
                    
                    Ecosystem Fraud Documentation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../api/">
            
                <a href="../../api/">
            
                    
                    API Specifications
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../api/mojaloop-api-specification.html">
            
                <a href="../../api/mojaloop-api-specification.html">
            
                    
                    Mojaloop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../api/central-ledger-api-specification.html">
            
                <a href="../../api/central-ledger-api-specification.html">
            
                    
                    Central Ledger API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../api/central-settlements-api-specification.html">
            
                <a href="../../api/central-settlements-api-specification.html">
            
                    
                    Central Settlements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../api/als-oracle-api-specification.html">
            
                <a href="../../api/als-oracle-api-specification.html">
            
                    
                    ALS Oracle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../repositories/">
            
                <a href="../../repositories/">
            
                    
                    Repo Details
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../repositories/helm.html">
            
                <a href="../../repositories/helm.html">
            
                    
                    Helm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../repositories/project.html">
            
                <a href="../../repositories/project.html">
            
                    
                    Project
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../mojaloop-roadmap.html">
            
                <a href="../../mojaloop-roadmap.html">
            
                    
                    Mojaloop Roadmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../mojaloop-publications.html">
            
                <a href="../../mojaloop-publications.html">
            
                    
                    Mojaloop Publications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../glossary.html">
            
                <a href="../../glossary.html">
            
                    
                    Glossary of Terms
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Bulk Transfer Operations</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="bulk-transfers-design">Bulk Transfers Design</h1>
<p>The Bulk Transfers scenario is described in the API Definition document regarding the resource /bulkTransfers. For details <em>(refer to section <code>6.10</code>)</em> as per the <a href="https://github.com/mojaloop/mojaloop-specification/blob/master/API%20Definition%20v1.0.pdf" target="_blank">Mojaloop Specification</a></p>
<ol>
<li><a href="introduction">Introduction</a></li>
<li><a href="design-considerations">Design Considerations</a></li>
<li><a href="steps-involved-in-the-high-level-architecture">Steps involved in the high-level Architecture</a></li>
<li><a href="notes">Notes</a><ol>
<li><a href="discussion-items">Discussion items</a></li>
<li><a href="proposed-new-tables">Proposed new tables</a></li>
<li><a href="bulk-transfers-states">Bulk Transfers States</a></li>
<li><a href="additional-notes">Additional Notes</a></li>
</ol>
</li>
<li><a href="roadmap-topics">Roadmap Topics</a></li>
</ol>
<h2 id="1-introduction">1. Introduction</h2>
<p>The Bulk Transfers process is discussed in section 6.10 of the API Definition 1.0 document, depicted in Figure 60, of which a snapshot is posted below.
<img src="assets/diagrams/architecture/Figure60-Example-Bulk-Transfer-Process-Spec1.0.png" alt="Figure 60"></p>
<p>The key items implied in the specification in its current version 1.0 are that</p>
<ul>
<li>Reservation of funds is done for each individual transfer from the Payer FSP to the Payee FSP</li>
<li>Even if a single individual transfer fails during the prepare process, the whole bulk is to be rejected.</li>
</ul>
<h2 id="2-design-considerations">2. Design Considerations</h2>
<p>According to the Figure-60 of the specification, below are a few key implications from the Specification.</p>
<ol>
<li>The Payer DFSP performs user look-ups for the individual parties involved in the bulk payment separately</li>
<li>The Payer DFSP performs bulk quoting per Payee DFSP</li>
<li>The onus is on the Payer DFSP to prepare bulk transfers based on Payee FSPs and send out a bulk transfer request to a single Payee FSP</li>
<li>This seems to be an all-or-nothing process where even if a single individual transfer fails to be reserved, then the whole bulk needs to be rejected because it cannot be sent to the Payee as it is if it has an individual transfer for which funds couldn&apos;t be reserved.</li>
<li>In light of the above, the proposal being made right now is to empower the Switch (needs updating the Specification) to send out the POST /bulkTransfers request with the list of individual transfers for which funds were able to be reserved on the Switch.</li>
<li>The implication is that the Switch aggregates commits/failures from the Payee FSP for the bulk and sends out a single PUT /bulkTransfers/{ID} call to the Payer FSP that includes the entire list of transfers that includes individual transfers that failed both at the Switch and the Payee FSP</li>
<li>For example: If there are 1000 individual transfers in a Bulk Transfer and if the Switch is able to reserve funds for 900 of the individual transfers, then a prepare bulk transfer request to the Payee DFSP is sent with the list of those 900 individual transfers. Once the Payee FSP sends the Bulk Fulfil request for those 900 transfers of which lets say, 800 can be committed and 100 are aborted, then the Switch processes those individual transfers accordingly and sends out the PUT callback (PUT /bulkTransfers/{ID}) notification to the Payer FSP with all the 1000 individual transfers, 800 of which are committed and 200 of which are aborted.</li>
<li>There will be implications to aspects such as Signature, Encryption, PKI and other security aspects that will need to be addressed.</li>
<li>The ordering of the individual transfers need to be considered as well by the Scheme. A Goal for implementation in emerging markets is to maximize the number of transactions involved and so a well designed Scheme may re-order individual transfers in the ascending order of the magnitude of amounts and then process them. But this can be a Scheme consideration.</li>
<li>However, a recommended Scheme Rule is that the Payee FSPs shouldn&apos;t be allowed to re-order the individual transfers in a bulk to avoid bias towards Payee parties.</li>
<li>For Settlements with bulk transfers where Government payments are involved with large sums of money needs to be discussed to allow for moving through transfers without strict liquidity rules needs to be discussed.</li>
</ol>
<h2 id="3-steps-involved-in-the-high-level-architecture">3. Steps involved in the high-level Architecture</h2>
<p>Below are the steps involved at a high level for bulk transfers.</p>
<p><img src="assets/diagrams/architecture/bulk-transfer-arch-flows.svg" alt="architecture diagram">  </p>
<ol>
<li>[1.0, 1.1, 1.2] An Incoming bulk Transfer request (POST /bulkTransfers) on the ml-api-adapter is placed in an object store and a notification with a reference to the actual message is sent via a kafka topic &#x201C;bulk prepare&#x201D; and a 202 is sent to the Payer FSP  </li>
<li>[1.3] Bulk Prepare handler consumes the request, records the status as RECEIVED  <pre><code> a. Bulk Prepare handler then validates the Bulk and changes state to PENDING if the validation is successful  
 b. One validation rule proposed in addition, here is to reject a bulk if there are duplicate transfer IDs used in the bulk itself.
 c. [&lt;alt&gt;1.4] If validation fails, Bulk Prepare handler changes the bulkTransferState to Pending_Rejected (an internal state) and produces a message onto the bulk processing topic  
     i. Bulk processing Handler then updates the bulkTransferState to REJECTED and sends a notification to the Payer  
</code></pre></li>
<li>[1.4] [Continuing 2.a] Bulk Prepare handler breaks down the bulk into individual transfers and puts each of them on the prepare topic  <pre><code> a. As part of this, each transfer is individually assigned the &apos;expiration time&apos; of the bulk Transfer itself (and other fields necessary for individual transfers)  
</code></pre></li>
<li>[1.5, 1.6, 1.7] Prepare handler, Position handler are refactored to handle individual transfers in a bulk, using flags such as type, action, status, etc.<pre><code> a. Reservation of funds --&gt; This is left to the individual handlers and the whole bulk is then aggregated in the Bulk Processing Handler.  
</code></pre></li>
<li>[1.8] Position Handler produces messages corresponding to individual transfers that are part of a bulk to bulk processing topic  </li>
<li>[1.9] For every message consumed from the bulk processing topic a check is made on the Bulk processing Handler to see if that&#x2019;s the last individual transfer in a bulk for that processing phase.</li>
<li>[1.10, 1.11, 1.12] If it is the last transfer, aggregate the state of all the individual transfers and  <pre><code> a. If all of them are in reserved state --&gt; Send POST /bulkTransfers to the Payee (by producing a message to the notifications topic which is then consumed by the notification handler)  
 b. Once the bulkTransfer prepare request is sent to the Payee, then change status to ACCEPTED  
</code></pre></li>
<li>In a successful case of Prepare - when the PUT from the Payee FSP for bulkFulfil is received, a notification is put on the bulk fulfil topic with a reference to the actual Fulfil message that&apos;s stored in an Object store.  </li>
<li>This is to be consumed by the bulkFulfilHandler, which then changes state to PROCESSING.  </li>
<li>The bulk-fulfil-handler breaks down the bulk into individual transfers and sends each of them through the refactored Fulfil, Position Handlers to commit/abort each of them based on the PUT /bulkTransfers/{ID} message by the Payee and commit/release funds on the Switch  </li>
<li>The bulk-processing-handler is to then aggregate all the individual transfer results and change the state of bulkTransfer to COMPLETED/REJECTED based on success/failure  <pre><code>a. If the Payee sends COMMITTED for even one of the individual transfers the proposal is to change bulk state to COMPLETED.  
b. However, for step-8 or if the Payee sends REJECTED as bulkTransferState then final state on Switch should be REJECTED.  
</code></pre></li>
<li>Send notifications to both Payer and Payee (similar to Single transfers, though diverging from the Spec 1.0). The Payer-FSP receives the notification that includes an exhaustive list of individual transfers, same as the list present in the prepare request sent by the Payer. The Payee-FSP receives a notification only for sub-set of transfers, which were sent to it from the Switch as the Bulk prepare request (that were able to be reserved at the Switch).  </li>
</ol>
<h2 id="4-implementation-details">4. Implementation Details</h2>
<h3 id="41-bulk-transfer-states">4.1 Bulk Transfer States</h3>
<p>Below are the states of a Bulk transfer as per the Mojaloop API Specification</p>
<ol>
<li>RECEIVED  </li>
<li>PENDING  </li>
<li>ACCEPTED  </li>
<li>PROCESSING  </li>
<li>COMPLETED  </li>
<li>REJECTED</li>
<li>Internal state - INVALID (mapped to REJECTED)</li>
<li>Micro-states to be added for internal use on the Switch</li>
</ol>
<h3 id="42-proposed-new-tables">4.2 Proposed New tables</h3>
<p>Below are the proposed tables as part of designing the Bulk transfers</p>
<ul>
<li>bulkTransfer  </li>
<li>bulkTransferStateChange  </li>
<li>bulkTransferError  </li>
<li>bulkTransferDuplicateCheck</li>
<li>bulkTransferFulfilment</li>
<li>bulkTransferFulfilmentDuplicateCheck</li>
<li>bulkTransferAssociation  </li>
<li>bulkTransferExtension  </li>
<li>bulkTransferParticipant</li>
<li>bulkTransferState  </li>
<li>bulkProcessingState  </li>
<li>Link to the ERD from the PR: <a href="https://github.com/elnyry/documentation/blob/feature/738-bulk-transfers-design-changes/mojaloop-technical-overview/central-bulk-transfers/assets/database/central-ledger-schema.png" target="_blank">https://github.com/elnyry/documentation/blob/feature/738-bulk-transfers-design-changes/mojaloop-technical-overview/central-bulk-transfers/assets/database/central-ledger-schema.png</a></li>
</ul>
<h3 id="43-internal-type-action-status-combinations">4.3 Internal Type-Action-Status combinations</h3>
<h4 id="1-bulk-transfer-that-passes-schema-validation-ml-api-adapter---bulk-prepare-handler">1. Bulk transfer that passes schema validation [ml-api-adapter -&gt; bulk-prepare-handler]</h4>
<ol>
<li>type: bulk-prepare</li>
<li>action: bulk-prepare</li>
<li>Status: success</li>
<li>Result: bulkTransferState=RECEIVED, bulkProcessingState=RECEIVED</li>
</ol>
<h4 id="2-duplicate-bulk-prepare-handler---notification-handler">2. Duplicate [bulk-prepare-handler -&gt; notification handler]</h4>
<ol>
<li>type: bulk-notification</li>
<li>action: bulk-prepare-duplicate</li>
<li>Status: success</li>
<li>Result: bulkTransferState=N/A, bulkProcessingState=N/A</li>
</ol>
<h4 id="3-duplicate-bulktransfer-state-does-not-exist-bulk-prepare-handler---notification-handler">3. Duplicate (bulktransfer state does not exist) [bulk-prepare-handler -&gt; notification-handler]</h4>
<ol>
<li>type: bulk-notification</li>
<li>action: bulk-prepare-duplicate</li>
<li>Status: error</li>
</ol>
<h4 id="4-validate-bulk-prepare-transfer-failure-bulk-prepare-handler---notification-handler">4. Validate Bulk Prepare transfer failure [bulk-prepare-handler -&gt; notification-handler]</h4>
<pre><code>1. type: bulk-notification
2. action: bulk-abort
3. Status: error
</code></pre><h4 id="5-for-a-valid-bulk-prepare-transfer-broken-down-and-sent-as-individual-transfers-bulk-prepare-handler---prepare-handler">5. For a Valid Bulk Prepare transfer (broken down and sent as individual transfers) [bulk-prepare-handler -&gt; prepare-handler]</h4>
<ol>
<li>type: bulk-prepare</li>
<li>action: prepare</li>
<li>Status: success</li>
</ol>
<h4 id="6-duplicate-of-individual-transfer-that-is-part-of-a-bulk-transfer-prepare-handler---bulk-processing-handler">6. Duplicate of individual transfer that is part of a bulk-transfer [prepare-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: prepare-duplicate</li>
<li>Status: success</li>
<li>Expected action: Add error message indicating it&#x2019;s a duplicate</li>
<li>Result: bulkTransferState=PENDING_PREPARE/ACCEPTED (depending on whether it&#x2019;s the last one), bulkProcessingState=RECEIVED_DUPLICATE  </li>
</ol>
<h4 id="7-for-individual-prepare-transfer-thats-a-valid-duplicate-in-prepare-handler-prepare-handler---bulk-processing-handler">7. For individual Prepare transfer that&#x2019;s a valid duplicate in prepare handler [prepare-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: prepare-duplicate</li>
<li>Status: error</li>
<li>Result: bulkTransferState=PENDING_PREPARE/ACCEPTED (depending on whether it&#x2019;s the last one), bulkProcessingState=RECEIVED_DUPLICATE   </li>
</ol>
<h4 id="8-for-a-valid-individual-prepare-transfer-thats-part-of-a-bulk-prepare-handler---position-handler">8. For a Valid individual Prepare transfer that&#x2019;s part of a bulk [prepare-handler -&gt; position-handler]</h4>
<ol>
<li>type: bulk-position</li>
<li>action: prepare</li>
<li>Status: success</li>
</ol>
<h4 id="9-for-individual-prepare-transfer-thats-part-of-a-bulk-that-failed-validation-in-prepare-handler-prepare-handler---bulk-processing-handler">9. For individual Prepare transfer that&#x2019;s part of a bulk that failed validation in prepare handler [prepare-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: prepare</li>
<li>Status: error</li>
<li>Result: bulkTransferState=PENDING_PREPARE/ACCEPTED (depending on whether it&#x2019;s the last one), bulkProcessingState=RECEIVED_INVALID</li>
</ol>
<h4 id="10-for-a-valid-individual-prepare-transfer-thats-part-of-a-bulk-position-handler----bulk-processing-handler">10. For a Valid individual Prepare transfer that&#x2019;s part of a bulk [position-handler -&gt;  bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: prepare</li>
<li>Status: success</li>
<li>Result: bulkTransferState=PENDING_PREPARE/ACCEPTED (depending on whether it&#x2019;s the last one), bulkProcessingState=ACCEPTED</li>
</ol>
<h4 id="11-for-individual-prepare-transfer-thats-part-of-a-bulk-that-failed-validation-in-position-handler-position-handler---bulk-processing-handler">11. For individual Prepare transfer that&#x2019;s part of a bulk that failed validation in position handler [position-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: prepare</li>
<li>Status: error</li>
<li>Result: bulkTransferState=PENDING_PREPARE/ACCEPTED (depending on whether it&#x2019;s the last one), bulkProcessingState=RECEIVED_INVALID</li>
</ol>
<h4 id="12-for-a-valid-individual-fulfil-transfer-for-commit-thats-part-of-a-bulk-position-handler---bulk-processing-handler">12. For a Valid individual Fulfil transfer (for commit) that&#x2019;s part of a bulk [position-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: commit</li>
<li>Status: success</li>
<li>Result: bulkTransferState=PENDING_FULFIL/COMPLETED (depending on whether it&#x2019;s the last one), bulkProcessingState=COMPLETED</li>
</ol>
<h4 id="13-for-bulk-transfer-fulfil-message-that-passes-validation-ml-api-adapter---bulk-fulfil-handler">13. For Bulk transfer Fulfil message that passes validation [ml-api-adapter -&gt; bulk-fulfil-handler]</h4>
<ol>
<li>type: bulk-fulfil</li>
<li>action: bulk-fulfil</li>
<li>Status: success</li>
</ol>
<h4 id="14-for-a-valid-individual-transfer-part-of-a-bulk-that-timed-out-in-position-handler-position-handler---bulk-processing-handler">14. For a valid individual transfer part of a bulk that timed-out in position handler [position-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: abort</li>
<li>Status: error</li>
<li>Result: bulkTransferState=PENDING_FULFIL/COMPLETED (depending on whether it&#x2019;s the last one), bulkProcessingState=FULFIL_INVALID</li>
</ol>
<h4 id="15-for-a-valid-individual-fulfil-transfer-for-reject-thats-part-of-a-bulk-position-handler---bulk-processing-handler">15. For a Valid individual Fulfil transfer (for reject) that&#x2019;s part of a bulk [position-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: reject</li>
<li>Status: success</li>
<li>Result: bulkTransferState=PENDING_FULFIL/COMPLETED (depending on whether it&#x2019;s the last one), bulkProcessingState=REJECTED</li>
</ol>
<h4 id="16-invalid-fulfil-duplicate-of-an-individual-transfer-in-a-bulk-fulfil-handler---bulk-processing-handler">16. Invalid Fulfil duplicate of an individual transfer in a bulk [fulfil-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: fulfil-duplicate</li>
<li>Status: error</li>
<li>Result: bulkTransferState=PENDING_FULFIL/COMPLETED (depending on whether it&#x2019;s the last one), bulkProcessingState=FULFIL_DUPLICATE</li>
</ol>
<h4 id="17-valid-fulfil-duplicate-of-an-individual-transfer-in-a-bulk-fulfil-handler---bulk-processing-handler">17. Valid Fulfil duplicate of an individual transfer in a bulk [fulfil-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: fulfil-duplicate</li>
<li>Status: success</li>
<li>Result: bulkTransferState=PENDING_FULFIL/COMPLETED (depending on whether it&#x2019;s the last one), bulkProcessingState=FULFIL_DUPLICATE</li>
</ol>
<h4 id="18-valid-fulfil-message-of-an-individual-transfer-in-a-bulk-fulfil-handler---position-handler">18. Valid Fulfil message of an individual transfer in a bulk [fulfil-handler -&gt; position-handler]</h4>
<ol>
<li>type: bulk-position</li>
<li>action: commit</li>
<li>Status: success</li>
</ol>
<h4 id="19-for-individual-fulfil-transfer-thats-part-of-a-bulk-that-failed-validation-in-fulfil-handler-fulfil-handler---bulk-processing-handler">19. For individual Fulfil transfer that&#x2019;s part of a bulk that failed validation in fulfil handler [fulfil-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: commit</li>
<li>Status: error</li>
<li>Result: bulkTransferState=PENDING_FULFIL/COMPLETED (depending on whether it&#x2019;s the last one), bulkProcessingState=FULFIL_INVALID</li>
</ol>
<h4 id="20-fulfil-transfer-request-thats-part-of-a-bulk-that-passes-validation-bulk-fulfil-handler---fulfil-handler">20. Fulfil transfer request that&#x2019;s part of a bulk that passes validation [bulk-fulfil-handler -&gt; fulfil-handler]</h4>
<ol>
<li>type: bulk-fulfil</li>
<li>action: bulk-commit</li>
<li>Status: success</li>
</ol>
<h4 id="21-for-bulk-transfers-failing-validation-at-bulk-fulfil-handler-level-bulk-fulfil-handler---notification-handler">21. For Bulk transfers failing validation at bulk-fulfil-handler level [bulk-fulfil-handler -&gt; notification-handler]</h4>
<ol>
<li>type: bulk-notification</li>
<li>action: bulk-abort</li>
<li>Status: error</li>
</ol>
<h4 id="22-for-bulk-transfer-notifications-to-fsps-bulk-processing-handler---notification-handler">22. For Bulk transfer notifications to FSPs [bulk-processing-handler -&gt; notification-handler]</h4>
<ol>
<li>type: bulk-notification</li>
<li>action: bulk-notification</li>
<li>Status: success</li>
</ol>
<h4 id="23-for-timeout-notification-timeout-handler---bulk-processing-handler">23. For timeout notification [timeout-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: timeout-received</li>
<li>Status: error</li>
<li>Result: bulkTransferState=COMPLETED (for the last one), bulkProcessingState=EXPIRED</li>
</ol>
<h4 id="24-for-timeout-notification-timeout-handler---position-handler">24. For timeout notification [timeout-handler -&gt; position-handler]</h4>
<ol>
<li>type: bulk-position</li>
<li>action: timeout-reserved</li>
<li>Status: error</li>
</ol>
<h4 id="25-for-timeout-notification-after-position-adjust-position-handler---bulk-processing-handler">25. For timeout notification after position adjust [position-handler -&gt; bulk-processing-handler]</h4>
<ol>
<li>type: bulk-processing</li>
<li>action: timeout-reserved</li>
<li>Status: error</li>
<li>Result: bulkTransferState=COMPLETED (for the last one), bulkProcessingState=EXPIRED</li>
</ol>
<h3 id="44-additional-notes">4.4 Additional Notes</h3>
<ol>
<li>Document GET /bulkTransfers to indicate the difference in responses the Payer-FSP &amp; Payee-FSP receive for Bulk Transfers</li>
<li>Use a separate mode for ml-api-adapter to support bulk transfers end-points (that includes persistence as discussed above)</li>
</ol>
<h2 id="5-roadmap-topics">5. Roadmap Topics</h2>
<ol>
<li>Re-assess the need to support multiple Payee FSPs as part of a Bulk and the changes to the Specification needed.</li>
<li>Issues, learnings from the PoC that are documented are addressed in order of priority</li>
<li>Find out a need to support something like a Bulk make resource (/bulkMake ?) in which the Switch accepts an entire Bulk as it is and then takes care of all three phases - lookup, quote and transfers.</li>
<li>Throttling of individual transfers in a bulk?</li>
<li>The aspect of ordering in a Bulk - the order of processing at the Switch and at the FSPs. Recommendation to Scheme to incorporate Rule to mandate all FSPs to process transactions a bulk in the existing order and not have preferential processing. On the Switch currently being neutral with ordering but best practice is to sort in ascending order of amounts and process.</li>
<li>For Settlements with bulk transfers where Government payments are involved with large sums of money needs to be discussed to allow for moving through transfers without strict liquidity rules needs to be discussed.</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Bulk Transfer Operations","level":"1.6.4.3","depth":3,"next":{"title":"Bulk Prepare Overview","level":"1.6.4.3.1","depth":4,"path":"mojaloop-technical-overview/central-bulk-transfers/transfers/1.1.0-bulk-prepare-transfer-request-overview.md","ref":"mojaloop-technical-overview/central-bulk-transfers/transfers/1.1.0-bulk-prepare-transfer-request-overview.md","articles":[{"title":"Bulk Prepare Handler","level":"1.6.4.3.1.1","depth":5,"path":"mojaloop-technical-overview/central-bulk-transfers/transfers/1.1.1-bulk-prepare-handler-consume.md","ref":"mojaloop-technical-overview/central-bulk-transfers/transfers/1.1.1-bulk-prepare-handler-consume.md","articles":[]}]},"previous":{"title":"Timeout Handler Consume","level":"1.6.4.2.8.2","depth":5,"path":"mojaloop-technical-overview/central-ledger/transfers/2.3.1-timeout-handler-consume.md","ref":"mojaloop-technical-overview/central-ledger/transfers/2.3.1-timeout-handler-consume.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.x.x","theme":"default","variables":{"importedVars":{"mojaloop":{"spec":{"version":"v1.0","uri":{"doc":"https://github.com/mojaloop/mojaloop-specification/blob/master/API%20Definition%20v1.0.pdf","api":"https://github.com/mojaloop/mojaloop-specification/blob/master/Supporting%20Files/fspiop-rest-v1.0-OpenAPI-implementation.yaml"}}},"central_ledger":{"spec":{"version":"v2.0","uri":{"doc":"/mojaloop-technical-overview/central-ledger/README.md","api":"https://github.com/mojaloop/central-ledger/blob/master/src/api/interface/swagger.json"}}},"settlement":{"spec":{"version":"v1.1","uri":{"doc":"/mojaloop-technical-overview/central-settlements/README.md","api":"https://github.com/mojaloop/central-settlement/blob/master/src/interface/swagger.json"}}},"als":{"oracle":{"spec":{"version":"v1.2","uri":{"doc":"/mojaloop-technical-overview/account-lookup-service/README.md","api":"https://github.com/mojaloop/documentation/blob/master/api/assets/interface-contracts/oracle-service-swagger-v1.yaml"}}}}}},"plugins":["swagger","editlink","include","insert-logo","plantuml-svg","collapsible-chapters","back-to-top-button","theme-api","variables","changelog","page-toc"],"pluginsConfig":{"plantuml-svg":{},"editlink":{"label":"Edit This Page","multilingual":true,"base":"https://github.com/mojaloop/documentation/edit/master"},"theme-gestalt":{"logo":"https://mojaloop.io/images/logo.png","favicon":"https://mojaloop.io/images/logo.png","baseUrl":null,"excludeDefaultStyles":false,"doNotHideChildrenChapters":false},"include":{},"search":{},"collapsible-chapters":{},"page-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4","position":"before-first","showByDefault":true},"swagger":{"file":""},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"uml":{"format":"png","nailgun":false},"changelog":{},"theme-api":{"languages":[],"split":true,"theme":"dark"},"back-to-top-button":{},"variables":{"files":{"importedVars":"book_variables.yml"}},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"insert-logo":{"url":"https://mojaloop.io/images/logo.png","style":"background: none; max-height: 140px; max-width: 140px;"}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"mojaloop-technical-overview/central-bulk-transfers/README.md","mtime":"2019-06-13T12:26:39.700Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-06-13T12:27:37.207Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-swagger/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-editlink/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-changelog/changelog.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc/anchor-3.1.1.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc/page-toc.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

