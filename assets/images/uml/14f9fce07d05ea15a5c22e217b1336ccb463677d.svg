<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1211px" preserveAspectRatio="none" style="width:1070px;height:1211px;" version="1.1" viewBox="0 0 1070 1211" width="1070px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nnjs1ducalgl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="567" x="252" y="22.9951">6.1.3. Get Settlement Windows By Parameters (getSettlementWindowsByParams)</text><rect fill="#FFB6C1" height="1165.9688" style="stroke: #A80036; stroke-width: 1.0;" width="107" x="96" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="111" y="46.3638">Central HUB</text><rect fill="#90EE90" height="1165.9688" style="stroke: #A80036; stroke-width: 1.0;" width="356" x="321" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="437.5" y="46.3638">Settlement Service</text><rect fill="#FFFFE0" height="1165.9688" style="stroke: #A80036; stroke-width: 1.0;" width="110" x="775.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="778.5" y="46.3638">Central Services</text><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="935.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="144.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="790.3125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="396.5" y="291.6563"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="347.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="612.5" y="335.9219"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="289.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="825.5" y="365.0547"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="943.2422" style="stroke: #000000; stroke-width: 2.0;" width="1046" x="12" y="153.7266"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="391.5234" style="stroke: #000000; stroke-width: 2.0;" width="524" x="22" y="698.4453"/><rect fill="#FFFFFF" height="185.0625" style="stroke: none; stroke-width: 1.0;" width="524" x="22" y="904.9063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="149" x2="149" y1="136.7266" y2="1113.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="401" x2="401" y1="136.7266" y2="1113.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="617" x2="617" y1="136.7266" y2="1113.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="830.5" x2="830.5" y1="136.7266" y2="1113.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="100" y="133.4248">Hub Employee</text><ellipse cx="149.5" cy="63.4297" fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M149.5,71.4297 L149.5,98.4297 M136.5,79.4297 L162.5,79.4297 M149.5,98.4297 L136.5,113.4297 M149.5,98.4297 L162.5,113.4297 " fill="none" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="100" y="1125.9639">Hub Employee</text><ellipse cx="149.5" cy="1139.2656" fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M149.5,1147.2656 L149.5,1174.2656 M136.5,1155.2656 L162.5,1155.2656 M149.5,1174.2656 L136.5,1189.2656 M149.5,1174.2656 L162.5,1189.2656 " fill="none" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="325" y="133.4248">Settlement Service API</text><path d="M381,92.4297 L381,116.4297 M381,104.4297 L398,104.4297 " fill="none" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="410" cy="104.4297" fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="325" y="1125.9639">Settlement Service API</text><path d="M381,1133.2656 L381,1157.2656 M381,1145.2656 L398,1145.2656 " fill="none" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="410" cy="1145.2656" fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="562" y="133.4248">Settlement DAO</text><ellipse cx="617.5" cy="104.4297" fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="605.5" x2="629.5" y1="118.4297" y2="118.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="562" y="1125.9639">Settlement DAO</text><ellipse cx="617.5" cy="1145.2656" fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="605.5" x2="629.5" y1="1159.2656" y2="1159.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="786.5" y="133.4248">Central Store</text><path d="M812.5,84.4297 C812.5,74.4297 830.5,74.4297 830.5,74.4297 C830.5,74.4297 848.5,74.4297 848.5,84.4297 L848.5,110.4297 C848.5,120.4297 830.5,120.4297 830.5,120.4297 C830.5,120.4297 812.5,120.4297 812.5,110.4297 L812.5,84.4297 " fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M812.5,84.4297 C812.5,94.4297 830.5,94.4297 830.5,94.4297 C830.5,94.4297 848.5,94.4297 848.5,84.4297 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="786.5" y="1125.9639">Central Store</text><path d="M812.5,1139.2656 C812.5,1129.2656 830.5,1129.2656 830.5,1129.2656 C830.5,1129.2656 848.5,1129.2656 848.5,1139.2656 L848.5,1165.2656 C848.5,1175.2656 830.5,1175.2656 830.5,1175.2656 C830.5,1175.2656 812.5,1175.2656 812.5,1165.2656 L812.5,1139.2656 " fill="#FEFECE" filter="url(#f1nnjs1ducalgl)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M812.5,1139.2656 C812.5,1149.2656 830.5,1149.2656 830.5,1149.2656 C830.5,1149.2656 848.5,1149.2656 848.5,1139.2656 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="935.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="144.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="790.3125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="396.5" y="291.6563"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="347.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="612.5" y="335.9219"/><rect fill="#FFFFFF" filter="url(#f1nnjs1ducalgl)" height="289.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="825.5" y="365.0547"/><path d="M12,153.7266 L312,153.7266 L312,160.7266 L302,170.7266 L12,170.7266 L12,153.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="943.2422" style="stroke: #000000; stroke-width: 2.0;" width="1046" x="12" y="153.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="255" x="27" y="166.7935">Get Settlement Windows By Parameters</text><path d="M159,175.8594 L159,260.8594 L372,260.8594 L372,185.8594 L362,175.8594 L159,175.8594 " fill="#FFFF00" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M362,175.8594 L362,185.8594 L372,185.8594 L362,175.8594 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="165" y="192.9263">Params:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="165" y="208.0591">?participantId={participantId}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="165" y="223.1919">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="165" y="238.3247">&amp;fromDateTime={fromDateTime}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="165" y="253.4575">&amp;toDateTime={toDateTime}</text><polygon fill="#A80036" points="384.5,287.6563,394.5,291.6563,384.5,295.6563,388.5,291.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="154.5" x2="390.5" y1="291.6563" y2="291.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="161.5" y="286.5903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="172.5" y="286.5903">GET - /settlementWindows/{params}</text><polygon fill="#A80036" points="600.5,331.9219,610.5,335.9219,600.5,339.9219,604.5,335.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="406.5" x2="606.5" y1="335.9219" y2="335.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="413.5" y="323.2896">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="424.5" y="315.7231">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="424.5" y="330.856">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="498.5" y="330.856">2001</text><polygon fill="#A80036" points="813.5,361.0547,823.5,365.0547,813.5,369.0547,817.5,365.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="622.5" x2="819.5" y1="365.0547" y2="365.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="629.5" y="359.9888">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="640.5" y="359.9888">Request settlementWindows</text><polygon fill="#FFFFE0" filter="url(#f1nnjs1ducalgl)" points="623,378.0547,1038,378.0547,1048,503.0547,1038,628.0547,623,628.0547,613,503.0547,623,378.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="389" x="625" y="394.1216">SELECT DISTINCT sw.settlementId, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="357" x="646" y="409.2544">swsc.reason, sw.createdDate, swsc.createdDate changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="625" y="424.3872">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="663" y="424.3872">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="788" y="424.3872">sw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="625" y="439.52">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="655" y="439.52">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="862" y="439.52">swsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="411" x="625" y="454.6528">ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="625" y="469.7856">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="655" y="469.7856">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="777" y="469.7856">tf</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="625" y="484.9185">ON tf.settlementWindowId = sw.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="625" y="500.0513">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="655" y="500.0513">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="784" y="500.0513">tp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="625" y="515.1841">ON tp.transferId = tf.transferId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="625" y="530.3169">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="655" y="530.3169">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="789" y="530.3169">pc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="625" y="545.4497">ON pc.participantCurrencyId = tp.participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="625" y="560.5825">[WHERE pc.participantId = {participantId}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="625" y="575.7153">[AND swsc.settlementWindowStateId = {state}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="625" y="590.8481">[AND sw.createdDate &gt;= {fromDateTime}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="625" y="605.981">[AND sw.createdDate &lt;= {toDateTime}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="628" y="621.1138"/><polygon fill="#A80036" points="633.5,650.3125,623.5,654.3125,633.5,658.3125,629.5,654.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="627.5" x2="829.5" y1="654.3125" y2="654.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="639.5" y="649.2466">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="650.5" y="649.2466">Return data</text><polygon fill="#A80036" points="417.5,679.4453,407.5,683.4453,417.5,687.4453,413.5,683.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="411.5" x2="616.5" y1="683.4453" y2="683.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="423.5" y="678.3794">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="434.5" y="678.3794">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="477.5" y="678.3794">settlementWindows</text><path d="M22,698.4453 L85,698.4453 L85,705.4453 L75,715.4453 L22,715.4453 L22,698.4453 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="391.5234" style="stroke: #000000; stroke-width: 2.0;" width="524" x="22" y="698.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="37" y="711.5122">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="100" y="710.6558">[One or more records found]</text><path d="M32,720.5781 L32,866.5781 L387,866.5781 L387,730.5781 L377,720.5781 L32,720.5781 " fill="#FFFF00" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M377,720.5781 L377,730.5781 L387,730.5781 L377,720.5781 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="38" y="737.645">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="50" y="752.7778">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="62" y="767.9106">"id": settlementWindow.settlementId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="62" y="783.0435">"state": settlementWindow.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="62" y="798.1763">"reason": settlementWindow.reason,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="62" y="813.3091">"createdDate": settlementWindow.createdDate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="62" y="828.4419">"changedDate": settlementWindow.changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="50" y="843.5747">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="38" y="858.7075">]</text><polygon fill="#A80036" points="165.5,892.9063,155.5,896.9063,165.5,900.9063,161.5,896.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="159.5" x2="395.5" y1="896.9063" y2="896.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="171.5" y="891.8403">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="182.5" y="891.8403">Respond HTTP - 200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="22" x2="546" y1="905.9063" y2="905.9063"/><path d="M411,911.9063 L411,936.9063 L532,936.9063 L532,921.9063 L522,911.9063 L411,911.9063 " fill="#D3D3D3" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M522,911.9063 L522,921.9063 L532,921.9063 L522,911.9063 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="417" y="928.9731">Log ERROR event</text><path d="M84,951.0391 L84,1051.0391 L387,1051.0391 L387,961.0391 L377,951.0391 L84,951.0391 " fill="#FFFF00" filter="url(#f1nnjs1ducalgl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M377,951.0391 L377,961.0391 L387,961.0391 L377,951.0391 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="90" y="968.106">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="102" y="983.2388">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="114" y="998.3716">"errorCode": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="114" y="1013.5044">"errorDescription": "Client error description"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="102" y="1028.6372">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="90" y="1043.77">}</text><polygon fill="#A80036" points="160.5,1077.9688,150.5,1081.9688,160.5,1085.9688,156.5,1081.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="154.5" x2="400.5" y1="1081.9688" y2="1081.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="166.5" y="1076.9028">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="177.5" y="1076.9028">Respond HTTP - 4xx (Client error)</text><!--
@startuml
title 6.1.3. Get Settlement Windows By Parameters (getSettlementWindowsByParams)

autonumber


actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Settlement Service" #lightgreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #lightyellow
    participant DB
end box


group Get Settlement Windows By Parameters
    activate OPERATOR
    note right of OPERATOR #yellow
        **Params:**
        ?participantId={participantId}
        &state={state}
        &fromDateTime={fromDateTime}
        &toDateTime={toDateTime}
    end note
    OPERATOR -> SSAPI: GET - /settlementWindows/{params}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindows
    activate DB
    hnote over DB #lightyellow
        SELECT DISTINCT sw.settlementId, swsc.settlementWindowStateId,
               swsc.reason, sw.createdDate, swsc.createdDate changedDate
        FROM **settlementWindow** sw
        JOIN **settlementWindowStateChange** swsc
        ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId
        JOIN **transferFulfilment** tf
        ON tf.settlementWindowId = sw.settlementWindowId
        JOIN **transferParticipant** tp
        ON tp.transferId = tf.transferId
        JOIN **participantCurrency** pc
        ON pc.participantCurrencyId = tp.participantCurrencyId
        [WHERE pc.participantId = {participantId}]
        [AND swsc.settlementWindowStateId = {state}]
        [AND sw.createdDate >= {fromDateTime}]
        [AND sw.createdDate <= {toDateTime}]

    end hnote
    SETTLE_DAO <- - DB: Return data
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return **settlementWindows**
    deactivate SETTLE_DAO
    alt One or more records found
        note left of SSAPI #yellow
            [
                {
                    "id": settlementWindow.settlementId,
                    "state": settlementWindow.settlementWindowStateId,
                    "reason": settlementWindow.reason,
                    "createdDate": settlementWindow.createdDate,
                    "changedDate": settlementWindow.changedDate
                }
            ]
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 200 (OK)
    else 
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "errorInformation": {
                    "errorCode": <integer>,
                    "errorDescription": "Client error description"
                }
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 4xx (Client error)
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>