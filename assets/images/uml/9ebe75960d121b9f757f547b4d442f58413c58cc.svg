<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1000px" preserveAspectRatio="none" style="width:1321px;height:1000px;" version="1.1" viewBox="0 0 1321 1000" width="1321px" zoomAndPan="magnify"><defs><filter height="300%" id="f7iu8gvbi0ygr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="581.5" y="22.9951">2.3.0. Transfer Timeout</text><rect fill="#D3D3D3" height="955.3125" style="stroke: #A80036; stroke-width: 1.0;" width="178" x="4" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="7" y="46.3638">Financial Service Providers</text><rect fill="#ADD8E6" height="955.3125" style="stroke: #A80036; stroke-width: 1.0;" width="345" x="184" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="282" y="46.3638">ML API Adapter Service</text><rect fill="#FFFFE0" height="955.3125" style="stroke: #A80036; stroke-width: 1.0;" width="763" x="531" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="863.5" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="713.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="409" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="713.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="614" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="713.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1064.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="699.9922" style="stroke: #000000; stroke-width: 2.0;" width="1288" x="22" y="170.0234"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="208.8672" style="stroke: #000000; stroke-width: 2.0;" width="775" x="525" y="279.5547"/><rect fill="#FFFFFF" height="162.6016" style="stroke: none; stroke-width: 1.0;" width="775" x="525" y="325.8203"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="1268" x="32" y="502.4219"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="131.6641" style="stroke: #000000; stroke-width: 2.0;" width="1212" x="88" y="731.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="65" x2="65" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="121" x2="121" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="240" x2="240" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="414" x2="414" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="619" x2="619" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="795" x2="795" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="936" x2="936" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1069" x2="1069" y1="153.0234" y2="887.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1222" x2="1222" y1="153.0234" y2="887.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="42" y="133.4248">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="44.5" y="149.7217">Payer</text><ellipse cx="65" cy="63.4297" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M65,71.4297 L65,98.4297 M52,79.4297 L78,79.4297 M65,98.4297 L52,113.4297 M65,98.4297 L78,113.4297 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="42" y="899.0107">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="44.5" y="915.3076">Payer</text><ellipse cx="65" cy="928.6094" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M65,936.6094 L65,963.6094 M52,944.6094 L78,944.6094 M65,963.6094 L52,978.6094 M65,963.6094 L78,978.6094 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="98" y="133.4248">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="99" y="149.7217">Payee</text><ellipse cx="121" cy="63.4297" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M121,71.4297 L121,98.4297 M108,79.4297 L134,79.4297 M121,98.4297 L108,113.4297 M121,98.4297 L134,113.4297 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="98" y="899.0107">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="99" y="915.3076">Payee</text><ellipse cx="121" cy="928.6094" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M121,936.6094 L121,963.6094 M108,944.6094 L134,944.6094 M121,963.6094 L108,978.6094 M121,963.6094 L134,978.6094 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="188" y="149.7217">ML API Adapter</text><path d="M220,108.7266 L220,132.7266 M220,120.7266 L237,120.7266 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="249" cy="120.7266" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="188" y="899.0107">ML API Adapter</text><path d="M220,906.3125 L220,930.3125 M220,918.3125 L237,918.3125 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="249" cy="918.3125" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="216" x="303" y="149.7217">ML API Notification Event Handler</text><ellipse cx="414" cy="120.7266" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="410,108.7266,416,103.7266,414,108.7266,416,113.7266,410,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="216" x="303" y="899.0107">ML API Notification Event Handler</text><ellipse cx="414" cy="918.3125" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="410,906.3125,416,901.3125,414,906.3125,416,911.3125,410,906.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="535" y="149.7217">Transfer Timeout Handler</text><ellipse cx="619" cy="120.7266" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="615,108.7266,621,103.7266,619,108.7266,621,113.7266,615,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="535" y="899.0107">Transfer Timeout Handler</text><ellipse cx="619" cy="918.3125" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="615,906.3125,621,901.3125,619,906.3125,621,911.3125,615,906.3125" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="717" y="113.7266"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="713" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="720" y="137.7217">topic-transfer-position</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="717" y="886.0156"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="713" y="890.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="720" y="910.0107">topic-transfer-position</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="892" y="113.7266"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="888" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="895" y="137.7217">Event-Topic</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="892" y="886.0156"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="888" y="890.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="895" y="910.0107">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="994" y="149.7217">Position Event Handler</text><ellipse cx="1069.5" cy="120.7266" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1065.5,108.7266,1071.5,103.7266,1069.5,108.7266,1071.5,113.7266,1065.5,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="994" y="899.0107">Position Event Handler</text><ellipse cx="1069.5" cy="918.3125" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1065.5,906.3125,1071.5,901.3125,1069.5,906.3125,1071.5,911.3125,1065.5,906.3125" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1159" y="113.7266"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1155" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1162" y="137.7217">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1159" y="886.0156"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1155" y="890.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1162" y="910.0107">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="713.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="409" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="713.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="614" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="713.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1064.5" y="163.0234"/><path d="M22,170.0234 L162,170.0234 L162,177.0234 L152,187.0234 L22,187.0234 L22,170.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="699.9922" style="stroke: #000000; stroke-width: 2.0;" width="1288" x="22" y="170.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="37" y="183.0903">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="451" x="532" y="212.1563"/><polygon fill="#EEEEEE" points="532,212.1563,596,212.1563,596,219.1563,586,229.1563,532,229.1563,532,212.1563" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="545" y="226.2231">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="659.5" y="245.2231">Timeout Handler Consume {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-timeout-2.3.1.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-timeout-2.3.1.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="27" x="824.5" y="245.2231">2.3.1</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="824.5" x2="851.5" y1="247.2231" y2="247.2231"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="851.5" y="245.2231">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="662.5" y="260.356"/><path d="M525,279.5547 L588,279.5547 L588,286.5547 L578,296.5547 L525,296.5547 L525,279.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="208.8672" style="stroke: #000000; stroke-width: 2.0;" width="775" x="525" y="279.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="540" y="292.6216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="603" y="291.7651">[transferStateId == 'RECEIVED_PREPARE']</text><polygon fill="#A80036" points="1210.5,313.8203,1220.5,317.8203,1210.5,321.8203,1214.5,317.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624" x2="1216.5" y1="317.8203" y2="317.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="631" y="312.7544">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="642" y="312.7544">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="525" x2="1300" y1="326.8203" y2="326.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="530" y="337.0308">[transferStateId == 'RESERVED']</text><polygon fill="#A80036" points="783.5,357.7578,793.5,361.7578,783.5,365.7578,787.5,361.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624" x2="789.5" y1="361.7578" y2="361.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="631" y="356.6919">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="642" y="356.6919">Produce message</text><polygon fill="#A80036" points="806.5,386.8906,796.5,390.8906,806.5,394.8906,802.5,390.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="1063.5" y1="390.8906" y2="390.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="812.5" y="385.8247">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="823.5" y="385.8247">Consume message</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="579" x="710" y="398.8906"/><polygon fill="#EEEEEE" points="710,398.8906,774,398.8906,774,405.8906,764,415.8906,710,415.8906,710,398.8906" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="723" y="412.9575">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="874" y="431.9575">Position Hander Consume (Timeout) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-position-1.3.3-abort.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-position-1.3.3-abort.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="27" x="1094" y="431.9575">1.3.3</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1094" x2="1121" y1="433.9575" y2="433.9575"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1121" y="431.9575">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="877" y="447.0903"/><polygon fill="#A80036" points="1210.5,476.4219,1220.5,480.4219,1210.5,484.4219,1214.5,480.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1074.5" x2="1216.5" y1="480.4219" y2="480.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1081.5" y="475.356">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1092.5" y="475.356">Produce message</text><path d="M32,502.4219 L99,502.4219 L99,509.4219 L89,519.4219 L32,519.4219 L32,502.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="1268" x="32" y="502.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="47" y="515.4888">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="114" y="514.6323">[action IN ['timeout-received', 'timeout-reserved']]</text><polygon fill="#A80036" points="1210.5,561.6875,1220.5,565.6875,1210.5,569.6875,1214.5,565.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="419" x2="1216.5" y1="565.6875" y2="565.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="426" y="560.6216">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="437" y="560.6216">Consume message</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="1250" x="39" y="573.6875"/><polygon fill="#EEEEEE" points="39,573.6875,103,573.6875,103,580.6875,93,590.6875,39,590.6875,39,573.6875" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="52" y="587.7544">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="528.5" y="606.7544">Send notification to Participant (Payer) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="37" x="758.5" y="606.7544">1.1.4.a</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="758.5" x2="795.5" y1="608.7544" y2="608.7544"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="795.5" y="606.7544">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="531.5" y="621.8872"/><polygon fill="#A80036" points="76,651.2188,66,655.2188,76,659.2188,72,655.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="408" y1="655.2188" y2="655.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="82" y="650.1528">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="93" y="650.1528">Send callback notification</text><polygon fill="#A80036" points="1210.5,712.3516,1220.5,716.3516,1210.5,720.3516,1214.5,716.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="419" x2="1216.5" y1="716.3516" y2="716.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="426" y="711.2856">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="437" y="711.2856">Consume message</text><path d="M88,731.3516 L155,731.3516 L155,738.3516 L145,748.3516 L88,748.3516 L88,731.3516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="131.6641" style="stroke: #000000; stroke-width: 2.0;" width="1212" x="88" y="731.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="103" y="744.4185">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="170" y="743.562">[action == 'timeout-reserved']</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="1194" x="95" y="773.4844"/><polygon fill="#EEEEEE" points="95,773.4844,159,773.4844,159,780.4844,149,790.4844,95,790.4844,95,773.4844" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="108" y="787.5513">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="555.5" y="806.5513">Send notification to Participant (Payee) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="37" x="787.5" y="806.5513">1.1.4.a</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="787.5" x2="824.5" y1="808.5513" y2="808.5513"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="824.5" y="806.5513">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="558.5" y="821.6841"/><polygon fill="#A80036" points="132,851.0156,122,855.0156,132,859.0156,128,855.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="126" x2="408" y1="855.0156" y2="855.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="138" y="849.9497">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="149" y="849.9497">Send callback notification</text><!--
@startuml
title 2.3.0. Transfer Timeout

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API Adapter" as MLAPI
control "ML API Notification Event Handler" as NOTIFY_HANDLER
control "Transfer Timeout Handler" as EXP_HANDLER
collections "topic-transfer-position" as TOPIC_TRANSFER_POSITION
control "Position Event Handler" as POS_HANDLER
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENT

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_TRANSFER_POSITION
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-timeout-2.3.1.svg 2.3.1]]} \n
    alt transferStateId == 'RECEIVED_PREPARE'
        EXP_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    else transferStateId == 'RESERVED'
        EXP_HANDLER -> TOPIC_TRANSFER_POSITION: Produce message
        TOPIC_TRANSFER_POSITION <- POS_HANDLER: Consume message
        ref over TOPIC_TRANSFER_POSITION, TOPIC_NOTIFICATIONS :  Position Hander Consume (Timeout) {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-position-1.3.3-abort.svg 1.3.3]]} \n
        POS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    end
    opt action IN ['timeout-received', 'timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer) {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg 1.1.4.a]]} \n
        NOTIFY_HANDLER -> DFSP1: Send callback notification
    end
    |||
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
    opt action == 'timeout-reserved'
        |||
        ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee) {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg 1.1.4.a]]} \n
        NOTIFY_HANDLER -> DFSP2: Send callback notification
    end
end
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>