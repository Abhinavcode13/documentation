<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="930px" preserveAspectRatio="none" style="width:924px;height:930px;" version="1.1" viewBox="0 0 924 930" width="924px" zoomAndPan="magnify"><defs><filter height="300%" id="f16emix12ee9t8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="482" x="221.5" y="22.9951">6.1.1. Request Settlement Window By Id (getSettlementWindowById)</text><rect fill="#FFB6C1" height="885.5781" style="stroke: #A80036; stroke-width: 1.0;" width="107" x="29" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="44" y="46.3638">Central HUB</text><rect fill="#90EE90" height="885.5781" style="stroke: #A80036; stroke-width: 1.0;" width="371" x="241" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="365" y="46.3638">Settlement Service</text><rect fill="#FFFFE0" height="885.5781" style="stroke: #A80036; stroke-width: 1.0;" width="110" x="629.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="632.5" y="46.3638">Central Services</text><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="654.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="77.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="609.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="191.9922"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="197.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="547.5" y="236.2578"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="679.5" y="265.3906"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="662.8516" style="stroke: #000000; stroke-width: 2.0;" width="899" x="13" y="153.7266"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="361.2578" style="stroke: #000000; stroke-width: 2.0;" width="443" x="23" y="448.3203"/><rect fill="#FFFFFF" height="185.0625" style="stroke: none; stroke-width: 1.0;" width="443" x="23" y="624.5156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="82" x2="82" y1="136.7266" y2="833.5781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="321" x2="321" y1="136.7266" y2="833.5781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="552" x2="552" y1="136.7266" y2="833.5781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="684.5" x2="684.5" y1="136.7266" y2="833.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="33" y="133.4248">Hub Employee</text><ellipse cx="82.5" cy="63.4297" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M82.5,71.4297 L82.5,98.4297 M69.5,79.4297 L95.5,79.4297 M82.5,98.4297 L69.5,113.4297 M82.5,98.4297 L95.5,113.4297 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="33" y="845.5732">Hub Employee</text><ellipse cx="82.5" cy="858.875" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M82.5,866.875 L82.5,893.875 M69.5,874.875 L95.5,874.875 M82.5,893.875 L69.5,908.875 M82.5,893.875 L95.5,908.875 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="245" y="133.4248">Settlement Service API</text><path d="M301,92.4297 L301,116.4297 M301,104.4297 L318,104.4297 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="330" cy="104.4297" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="245" y="845.5732">Settlement Service API</text><path d="M301,852.875 L301,876.875 M301,864.875 L318,864.875 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="330" cy="864.875" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="497" y="133.4248">Settlement DAO</text><ellipse cx="552.5" cy="104.4297" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="540.5" x2="564.5" y1="118.4297" y2="118.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="497" y="845.5732">Settlement DAO</text><ellipse cx="552.5" cy="864.875" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="540.5" x2="564.5" y1="878.875" y2="878.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="640.5" y="133.4248">Central Store</text><path d="M666.5,84.4297 C666.5,74.4297 684.5,74.4297 684.5,74.4297 C684.5,74.4297 702.5,74.4297 702.5,84.4297 L702.5,110.4297 C702.5,120.4297 684.5,120.4297 684.5,120.4297 C684.5,120.4297 666.5,120.4297 666.5,110.4297 L666.5,84.4297 " fill="#FEFECE" filter="url(#f16emix12ee9t8)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M666.5,84.4297 C666.5,94.4297 684.5,94.4297 684.5,94.4297 C684.5,94.4297 702.5,94.4297 702.5,84.4297 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="640.5" y="845.5732">Central Store</text><path d="M666.5,858.875 C666.5,848.875 684.5,848.875 684.5,848.875 C684.5,848.875 702.5,848.875 702.5,858.875 L702.5,884.875 C702.5,894.875 684.5,894.875 684.5,894.875 C684.5,894.875 666.5,894.875 666.5,884.875 L666.5,858.875 " fill="#FEFECE" filter="url(#f16emix12ee9t8)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M666.5,858.875 C666.5,868.875 684.5,868.875 684.5,868.875 C684.5,868.875 702.5,868.875 702.5,858.875 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="654.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="77.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="609.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="191.9922"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="197.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="547.5" y="236.2578"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="679.5" y="265.3906"/><path d="M13,153.7266 L239,153.7266 L239,160.7266 L229,170.7266 L13,170.7266 L13,153.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="662.8516" style="stroke: #000000; stroke-width: 2.0;" width="899" x="13" y="153.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="28" y="166.7935">Request Settlement Window</text><polygon fill="#A80036" points="304.5,187.9922,314.5,191.9922,304.5,195.9922,308.5,191.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="310.5" y1="191.9922" y2="191.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="94.5" y="186.9263">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="105.5" y="186.9263">GET - /settlementWindows/{id}</text><polygon fill="#A80036" points="535.5,232.2578,545.5,236.2578,535.5,240.2578,539.5,236.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="326.5" x2="541.5" y1="236.2578" y2="236.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="333.5" y="223.6255">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="344.5" y="216.0591">Request settlementWindow by id</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="344.5" y="231.1919">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="418.5" y="231.1919">2001</text><polygon fill="#A80036" points="667.5,261.3906,677.5,265.3906,667.5,269.3906,671.5,265.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="557.5" x2="673.5" y1="265.3906" y2="265.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="564.5" y="260.3247">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="575.5" y="260.3247">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f16emix12ee9t8)" points="477,308.3906,892,308.3906,902,357.3906,892,406.3906,477,406.3906,467,357.3906,477,308.3906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="479" y="324.4575">SELECT sw.settlementWindowId, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="357" x="500" y="339.5903">swsc.reason, sw.createdDate, swsc.createdDate changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="479" y="354.7231">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="517" y="354.7231">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="642" y="354.7231">AS sw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="479" y="369.856">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="509" y="369.856">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="716" y="369.856">AS swsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="411" x="479" y="384.9888">ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="479" y="400.1216">WHERE sw.settlementWindowId = {id}</text><polygon fill="#A80036" points="337.5,429.3203,327.5,433.3203,337.5,437.3203,333.5,433.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="331.5" x2="551.5" y1="433.3203" y2="433.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="343.5" y="428.2544">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="354.5" y="428.2544">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="397.5" y="428.2544">data</text><path d="M23,448.3203 L86,448.3203 L86,455.3203 L76,465.3203 L23,465.3203 L23,448.3203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="361.2578" style="stroke: #000000; stroke-width: 2.0;" width="443" x="23" y="448.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="38" y="461.3872">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="101" y="460.5308">[settlementWindow found]</text><path d="M47,470.4531 L47,585.4531 L307,585.4531 L307,480.4531 L297,470.4531 L47,470.4531 " fill="#FFFF00" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M297,470.4531 L297,480.4531 L307,480.4531 L297,470.4531 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="53" y="487.52">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="65" y="502.6528">"id": data.settlementWindowId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="65" y="517.7856">"state": data.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="65" y="532.9185">"reason": data.reason,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="65" y="548.0513">"createdDate": data.createdDate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="65" y="563.1841">"changedDate": data.changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="53" y="578.3169">}</text><polygon fill="#A80036" points="98.5,612.5156,88.5,616.5156,98.5,620.5156,94.5,616.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="315.5" y1="616.5156" y2="616.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="104.5" y="611.4497">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="115.5" y="611.4497">Respond HTTP - 200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="466" y1="625.5156" y2="625.5156"/><path d="M331,631.5156 L331,656.5156 L452,656.5156 L452,641.5156 L442,631.5156 L331,631.5156 " fill="#D3D3D3" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M442,631.5156 L442,641.5156 L452,641.5156 L442,631.5156 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="337" y="648.5825">Log ERROR event</text><path d="M102,670.6484 L102,770.6484 L307,770.6484 L307,680.6484 L297,670.6484 L102,670.6484 " fill="#FFFF00" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M297,670.6484 L297,680.6484 L307,680.6484 L297,670.6484 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="108" y="687.7153">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="120" y="702.8481">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="132" y="717.981">"errorCode": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="132" y="733.1138">"errorDescription": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="120" y="748.2466">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="108" y="763.3794">}</text><polygon fill="#A80036" points="93.5,797.5781,83.5,801.5781,93.5,805.5781,89.5,801.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87.5" x2="320.5" y1="801.5781" y2="801.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="99.5" y="796.5122">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="110.5" y="796.5122">Respond HTTP - 4xx (Client error)</text><!--
@startuml
title 6.1.1. Request Settlement Window By Id (getSettlementWindowById)

autonumber

actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Settlement Service" #lightgreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #lightyellow
    participant DB
end box

group Request Settlement Window
    activate OPERATOR
    OPERATOR -> SSAPI: GET - /settlementWindows/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow by id\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Select from DB
    activate DB
    hnote over DB #lightyellow
        SELECT sw.settlementWindowId, swsc.settlementWindowStateId, 
               swsc.reason, sw.createdDate, swsc.createdDate changedDate
        FROM **settlementWindow** AS sw
        JOIN **settlementWindowStateChange** AS swsc
        ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId
        WHERE sw.settlementWindowId = {id}
    end hnote
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return **data**
    deactivate SETTLE_DAO

    alt settlementWindow found
        note left of SSAPI #Yellow
            {
                "id": data.settlementWindowId,
                "state": data.settlementWindowStateId,
                "reason": data.reason,
                "createdDate": data.createdDate,
                "changedDate": data.changedDate
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 200 (OK)
    else
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "errorInformation": {
                    "errorCode": <integer>,
                    "errorDescription": <string>
                }
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 4xx (Client error)
        deactivate SSAPI
        deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>