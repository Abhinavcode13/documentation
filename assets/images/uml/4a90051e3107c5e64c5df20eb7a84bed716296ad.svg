<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1015px" preserveAspectRatio="none" style="width:1860px;height:1015px;" version="1.1" viewBox="0 0 1860 1015" width="1860px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lvnsg8d1daeb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="491" x="685" y="22.9951">1.1.4.a. Send notification to Participant (Payer/Payee) (single message)</text><rect fill="#D3D3D3" height="970.6406" style="stroke: #A80036; stroke-width: 1.0;" width="172" x="4" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="7" y="46.3638">Financial Service Provider</text><rect fill="#ADD8E6" height="970.6406" style="stroke: #A80036; stroke-width: 1.0;" width="230" x="572" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="612.5" y="46.3638">ML API Adapter Service</text><rect fill="#FFFFE0" height="970.6406" style="stroke: #A80036; stroke-width: 1.0;" width="999.5" x="816.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="1267.25" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="729.3203" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="682" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="883" y="208.2891"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="197.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1178" y="291.5547"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="209.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1178" y="594.8828"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="139.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1368" y="320.6875"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1480" y="639.1484"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1763" y="668.2813"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="715.3203" style="stroke: #000000; stroke-width: 2.0;" width="1805" x="43" y="170.0234"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="244.0625" style="stroke: #000000; stroke-width: 2.0;" width="865" x="566" y="253.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="90" x2="90" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="687" x2="687" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="887.5" x2="887.5" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1182.5" x2="1182.5" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1373" x2="1373" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1485" x2="1485" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1768" x2="1768" y1="153.0234" y2="902.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="63" y="133.4248">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="53" y="149.7217">Participant</text><ellipse cx="90" cy="63.4297" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M90,71.4297 L90,98.4297 M77,79.4297 L103,79.4297 M90,98.4297 L77,113.4297 M90,98.4297 L103,113.4297 " fill="none" filter="url(#f1lvnsg8d1daeb)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="63" y="914.3389">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="53" y="930.6357">Participant</text><ellipse cx="90" cy="943.9375" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M90,951.9375 L90,978.9375 M77,959.9375 L103,959.9375 M90,978.9375 L77,993.9375 M90,978.9375 L103,993.9375 " fill="none" filter="url(#f1lvnsg8d1daeb)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="216" x="576" y="149.7217">ML API Notification Event Handler</text><ellipse cx="687" cy="120.7266" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="683,108.7266,689,103.7266,687,108.7266,689,113.7266,683,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="216" x="576" y="914.3389">ML API Notification Event Handler</text><ellipse cx="687" cy="933.6406" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="683,921.6406,689,916.6406,687,921.6406,689,926.6406,683,921.6406" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="824.5" y="113.7266"/><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="820.5" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="827.5" y="137.7217">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="824.5" y="901.3438"/><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="820.5" y="905.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="827.5" y="925.3389">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="1119.5" y="149.7217">Central Service API</text><path d="M1162.5,108.7266 L1162.5,132.7266 M1162.5,120.7266 L1179.5,120.7266 " fill="none" filter="url(#f1lvnsg8d1daeb)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1191.5" cy="120.7266" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="1119.5" y="914.3389">Central Service API</text><path d="M1162.5,921.6406 L1162.5,945.6406 M1162.5,933.6406 L1179.5,933.6406 " fill="none" filter="url(#f1lvnsg8d1daeb)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1191.5" cy="933.6406" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1329" y="113.7266"/><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1325" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1332" y="137.7217">Event-Topic</text><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1329" y="901.3438"/><rect fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1325" y="905.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1332" y="925.3389">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1431" y="149.7217">Participant DAO</text><ellipse cx="1485" cy="120.7266" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1473" x2="1497" y1="134.7266" y2="134.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1431" y="914.3389">Participant DAO</text><ellipse cx="1485" cy="933.6406" fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1473" x2="1497" y1="947.6406" y2="947.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1724" y="149.7217">Central Store</text><path d="M1750,100.7266 C1750,90.7266 1768,90.7266 1768,90.7266 C1768,90.7266 1786,90.7266 1786,100.7266 L1786,126.7266 C1786,136.7266 1768,136.7266 1768,136.7266 C1768,136.7266 1750,136.7266 1750,126.7266 L1750,100.7266 " fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1750,100.7266 C1750,110.7266 1768,110.7266 1768,110.7266 C1768,110.7266 1786,110.7266 1786,100.7266 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1724" y="914.3389">Central Store</text><path d="M1750,927.6406 C1750,917.6406 1768,917.6406 1768,917.6406 C1768,917.6406 1786,917.6406 1786,927.6406 L1786,953.6406 C1786,963.6406 1768,963.6406 1768,963.6406 C1768,963.6406 1750,963.6406 1750,953.6406 L1750,927.6406 " fill="#FEFECE" filter="url(#f1lvnsg8d1daeb)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1750,927.6406 C1750,937.6406 1768,937.6406 1768,937.6406 C1768,937.6406 1786,937.6406 1786,927.6406 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="729.3203" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="682" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="883" y="208.2891"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="197.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1178" y="291.5547"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="209.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1178" y="594.8828"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="139.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1368" y="320.6875"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1480" y="639.1484"/><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1763" y="668.2813"/><path d="M43,170.0234 L291,170.0234 L291,177.0234 L281,187.0234 L43,187.0234 L43,170.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="715.3203" style="stroke: #000000; stroke-width: 2.0;" width="1805" x="43" y="170.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="203" x="58" y="183.0903">Send notification to Participant</text><polygon fill="#A80036" points="871,204.2891,881,208.2891,871,212.2891,875,208.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="877" y1="208.2891" y2="208.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="699" y="203.2231">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="710" y="203.2231">Consume Notification event</text><path d="M566,253.2891 L776,253.2891 L776,260.2891 L766,270.2891 L566,270.2891 L566,253.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="244.0625" style="stroke: #000000; stroke-width: 2.0;" width="865" x="566" y="253.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="581" y="266.356">Persist Event Information</text><polygon fill="#A80036" points="1166,287.5547,1176,291.5547,1166,295.5547,1170,291.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="1172" y1="291.5547" y2="291.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="699" y="286.4888">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="710" y="286.4888">Request to persist event information - POST - /events</text><polygon fill="#A80036" points="1356,316.6875,1366,320.6875,1356,324.6875,1360,320.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1188" x2="1362" y1="320.6875" y2="320.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1195" y="315.6216">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="1206" y="315.6216">Publish event information</text><rect fill="#FFFFFF" filter="url(#f1lvnsg8d1daeb)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="192" x="1322" y="353.6875"/><polygon fill="#EEEEEE" points="1322,353.6875,1386,353.6875,1386,360.6875,1376,370.6875,1322,370.6875,1322,353.6875" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1335" y="367.7544">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="1328" y="386.7544">Event Handler Consume {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-event-9.1.0.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-event-9.1.0.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="27" x="1477" y="386.7544">9.1.0</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1477" x2="1504" y1="388.7544" y2="388.7544"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1504" y="386.7544">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1331" y="401.8872"/><polygon fill="#A80036" points="1199,456.2188,1189,460.2188,1199,464.2188,1195,460.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1193" x2="1372" y1="460.2188" y2="460.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1205" y="455.1528">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="1216" y="455.1528">Return success</text><polygon fill="#A80036" points="703,485.3516,693,489.3516,703,493.3516,699,489.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="697" x2="1182" y1="489.3516" y2="489.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="709" y="484.2856">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="720" y="484.2856">Return success</text><path d="M697,509.3516 L697,549.3516 L1003,549.3516 L1003,519.3516 L993,509.3516 L697,509.3516 " fill="#D3D3D3" filter="url(#f1lvnsg8d1daeb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M993,509.3516 L993,519.3516 L1003,519.3516 L993,509.3516 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="703" y="526.4185">The endpoint details are cached, when the cache</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="703" y="541.5513">expires, the details are fetched again</text><polygon fill="#A80036" points="1166,590.8828,1176,594.8828,1166,598.8828,1170,594.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="1172" y1="594.8828" y2="594.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="699" y="582.2505">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="710" y="574.6841">Request Endpoint details for Participant - GET - /participants/{{fsp}}/endpoints</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="710" y="589.8169">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="784" y="589.8169">2003</text><polygon fill="#A80036" points="1468,635.1484,1478,639.1484,1468,643.1484,1472,639.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1188" x2="1474" y1="639.1484" y2="639.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1195" y="626.5161">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="1206" y="618.9497">Fetch Endpoint details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="1206" y="634.0825">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="1280" y="634.0825">2003</text><polygon fill="#A80036" points="1751,664.2813,1761,668.2813,1751,672.2813,1755,668.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1490" x2="1757" y1="668.2813" y2="668.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1497" y="663.2153">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="1508" y="663.2153">Fetch Endpoint details for Participant</text><polygon fill="#FFFFE0" filter="url(#f1lvnsg8d1daeb)" points="1707,681.2813,1828,681.2813,1838,692.2813,1828,704.2813,1707,704.2813,1697,692.2813,1707,681.2813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="1709" y="697.3481">participantEndpoint</text><polygon fill="#A80036" points="1501,726.5469,1491,730.5469,1501,734.5469,1497,730.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1495" x2="1767" y1="730.5469" y2="730.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1507" y="725.481">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="1518" y="725.481">Retrieved Endpoint details for Participant</text><polygon fill="#A80036" points="1199,755.6797,1189,759.6797,1199,763.6797,1195,759.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1193" x2="1484" y1="759.6797" y2="759.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1205" y="754.6138">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1223" y="754.6138">Return Endpoint details for Participant</text><polygon fill="#A80036" points="703,799.9453,693,803.9453,703,807.9453,699,803.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="697" x2="1182" y1="803.9453" y2="803.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="709" y="791.313">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="727" y="783.7466">Return Endpoint details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="727" y="798.8794">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="807" y="798.8794">3202, 3203</text><polygon fill="#A80036" points="101,844.2109,91,848.2109,101,852.2109,97,848.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95" x2="681" y1="848.2109" y2="848.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="107" y="835.5786">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="502" x="125" y="828.0122">Callback with Prepare/fulfil result/error to Participant to specified Endpoint - POST/PUT</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="125" y="843.145">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="199" y="843.145">1001</text><polygon fill="#A80036" points="670,873.3438,680,877.3438,670,881.3438,674,877.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90" x2="676" y1="877.3438" y2="877.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="97" y="872.2778">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="115" y="872.2778">HTTP 200 OK</text><!--
@startuml
title 1.1.4.a. Send notification to Participant (Payer/Payee) (single message)

autonumber


actor "DFSP(n)\nParticipant" as DFSP
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENTS
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Financial Service Provider" #lightGray
	participant DFSP
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
participant TOPIC_NOTIFICATIONS
    participant CSAPI
    participant TOPIC_EVENTS
    participant PARTICIPANT_DAO
    participant DB
end box

activate NOTIFY_HANDLER
group Send notification to Participant
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume Notification event
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    group Persist Event Information
        NOTIFY_HANDLER -> CSAPI: Request to persist event information - POST - /events
        activate CSAPI
        CSAPI -> TOPIC_EVENTS: Publish event information
        activate TOPIC_EVENTS
        |||
        ref over TOPIC_EVENTS :  Event Handler Consume {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-event-9.1.0.svg 9.1.0]]} \n
        |||
        TOPIC_EVENTS - -> CSAPI: Return success
        deactivate TOPIC_EVENTS
        CSAPI - -> NOTIFY_HANDLER: Return success
        deactivate CSAPI
    end
    note right of NOTIFY_HANDLER #lightgray
        The endpoint details are cached, when the cache
        expires, the details are fetched again
    end note
    NOTIFY_HANDLER -> CSAPI: Request Endpoint details for Participant - GET - /participants/{{fsp}}/endpoints\n<color #FF0000><b>Error code:</b> 2003</color>

    activate CSAPI
    CSAPI -> PARTICIPANT_DAO: Fetch Endpoint details for Participant\n<color #FF0000><b>Error code:</b> 2003</color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO -> DB: Fetch Endpoint details for Participant
    activate DB
    hnote over DB #lightyellow
        participantEndpoint
    end note
    DB -> PARTICIPANT_DAO: Retrieved Endpoint details for Participant
    deactivate DB
    PARTICIPANT_DAO - -> CSAPI: Return Endpoint details for Participant
    deactivate PARTICIPANT_DAO
    CSAPI - -> NOTIFY_HANDLER: Return Endpoint details for Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
    deactivate CSAPI
    NOTIFY_HANDLER -> DFSP: Callback with Prepare/fulfil result/error to Participant to specified Endpoint - POST/PUT \n<color #FF0000><b>Error code:</b> 1001</color>
    NOTIFY_HANDLER <- - DFSP: HTTP 200 OK 
end
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>