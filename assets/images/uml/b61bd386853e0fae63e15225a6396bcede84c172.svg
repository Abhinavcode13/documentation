<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1648px" preserveAspectRatio="none" style="width:1393px;height:1648px;" version="1.1" viewBox="0 0 1393 1648" width="1393px" zoomAndPan="magnify"><defs><filter height="300%" id="f69vfrtyfgtk8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="258" x="568.5" y="22.9951">3.1.0 Add Participant Callback Details</text><rect fill="#FFFFE0" height="1602.7734" style="stroke: #A80036; stroke-width: 1.0;" width="858.5" x="481.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="858.75" y="46.3638">Central Services</text><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="1407.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="92" y="126.5938"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="1361.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="544" y="171.8594"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="637.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="785" y="361.1875"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="462.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="785" y="1027.5078"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1087" y="405.4531"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="251.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1087" y="651.6484"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1287" y="434.5859"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1287" y="680.7813"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="1400.1797" style="stroke: #000000; stroke-width: 2.0;" width="1369" x="13" y="133.5938"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="943.6563" style="stroke: #000000; stroke-width: 2.0;" width="1349" x="23" y="583.1172"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="317.5313" style="stroke: #000000; stroke-width: 2.0;" width="996" x="33" y="960.1094"/><rect fill="#FFFFFF" height="242.1328" style="stroke: none; stroke-width: 1.0;" width="996" x="33" y="1035.5078"/><rect fill="#FFFFFF" height="242.1328" style="stroke: none; stroke-width: 1.0;" width="1349" x="23" y="1284.6406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="97" x2="97" y1="116.5938" y2="1550.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="548.5" x2="548.5" y1="116.5938" y2="1550.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="790" x2="790" y1="116.5938" y2="1550.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1092" x2="1092" y1="116.5938" y2="1550.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1292" x2="1292" y1="116.5938" y2="1550.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="43" y="113.292">HUB OPERATOR</text><ellipse cx="97" cy="43.2969" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M97,51.2969 L97,78.2969 M84,59.2969 L110,59.2969 M97,78.2969 L84,93.2969 M97,78.2969 L110,93.2969 " fill="none" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="43" y="1562.7686">HUB OPERATOR</text><ellipse cx="97" cy="1576.0703" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M97,1584.0703 L97,1611.0703 M84,1592.0703 L110,1592.0703 M97,1611.0703 L84,1626.0703 M97,1611.0703 L110,1626.0703 " fill="none" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="485.5" y="113.292">Central Service API</text><path d="M528.5,72.2969 L528.5,96.2969 M528.5,84.2969 L545.5,84.2969 " fill="none" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="557.5" cy="84.2969" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="485.5" y="1562.7686">Central Service API</text><path d="M528.5,1570.0703 L528.5,1594.0703 M528.5,1582.0703 L545.5,1582.0703 " fill="none" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="557.5" cy="1582.0703" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="726" y="113.292">Participant Handler</text><ellipse cx="790" cy="84.2969" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="786,72.2969,792,67.2969,790,72.2969,792,77.2969,786,72.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="726" y="1562.7686">Participant Handler</text><ellipse cx="790" cy="1582.0703" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="786,1570.0703,792,1565.0703,790,1570.0703,792,1575.0703,786,1570.0703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1038" y="113.292">Participant DAO</text><ellipse cx="1092" cy="84.2969" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1080" x2="1104" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1038" y="1562.7686">Participant DAO</text><ellipse cx="1092" cy="1582.0703" fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1080" x2="1104" y1="1596.0703" y2="1596.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1248" y="113.292">Central Store</text><path d="M1274,64.2969 C1274,54.2969 1292,54.2969 1292,54.2969 C1292,54.2969 1310,54.2969 1310,64.2969 L1310,90.2969 C1310,100.2969 1292,100.2969 1292,100.2969 C1292,100.2969 1274,100.2969 1274,90.2969 L1274,64.2969 " fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1274,64.2969 C1274,74.2969 1292,74.2969 1292,74.2969 C1292,74.2969 1310,74.2969 1310,64.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1248" y="1562.7686">Central Store</text><path d="M1274,1576.0703 C1274,1566.0703 1292,1566.0703 1292,1566.0703 C1292,1566.0703 1310,1566.0703 1310,1576.0703 L1310,1602.0703 C1310,1612.0703 1292,1612.0703 1292,1612.0703 C1292,1612.0703 1274,1612.0703 1274,1602.0703 L1274,1576.0703 " fill="#FEFECE" filter="url(#f69vfrtyfgtk8)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1274,1576.0703 C1274,1586.0703 1292,1586.0703 1292,1586.0703 C1292,1586.0703 1310,1586.0703 1310,1576.0703 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="1407.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="92" y="126.5938"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="1361.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="544" y="171.8594"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="637.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="785" y="361.1875"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="462.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="785" y="1027.5078"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1087" y="405.4531"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="251.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1087" y="651.6484"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1287" y="434.5859"/><rect fill="#FFFFFF" filter="url(#f69vfrtyfgtk8)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1287" y="680.7813"/><path d="M13,133.5938 L188,133.5938 L188,140.5938 L178,150.5938 L13,150.5938 L13,133.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1400.1797" style="stroke: #000000; stroke-width: 2.0;" width="1369" x="13" y="133.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="28" y="146.6606">Add Callback Details</text><polygon fill="#A80036" points="532,167.8594,542,171.8594,532,175.8594,536,171.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="102" x2="538" y1="171.8594" y2="171.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="109" y="166.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="412" x="120" y="166.7935">Request to add callback details - POST - /paticipants/{name}/endpoints</text><path d="M107,184.8594 L107,330.8594 L301,330.8594 L301,194.8594 L291,184.8594 L107,184.8594 " fill="#FFFF00" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M291,184.8594 L291,194.8594 L301,194.8594 L291,184.8594 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="113" y="201.9263">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="113" y="217.0591">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="125" y="232.1919">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="137" y="247.3247">endpoint: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="149" y="262.4575">type: &lt;typeValue&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="149" y="277.5903">value: &lt;endpointValue&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="134" y="292.7231">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="125" y="307.856">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="113" y="322.9888">}</text><polygon fill="#A80036" points="773,357.1875,783,361.1875,773,365.1875,777,361.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="554" x2="779" y1="361.1875" y2="361.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="561" y="356.1216">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="572" y="356.1216">Add Callback details for Participant</text><polygon fill="#A80036" points="1075,401.4531,1085,405.4531,1075,409.4531,1079,405.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="1081" y1="405.4531" y2="405.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="802" y="392.8208">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="813" y="385.2544">Fetch Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="813" y="400.3872">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="887" y="400.3872">3200</text><polygon fill="#A80036" points="1275,430.5859,1285,434.5859,1275,438.5859,1279,434.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1097" x2="1281" y1="434.5859" y2="434.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1104" y="429.52">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1115" y="429.52">Fetch Participant</text><polygon fill="#FFFFE0" filter="url(#f69vfrtyfgtk8)" points="1258,447.5859,1325,447.5859,1335,458.5859,1325,470.5859,1258,470.5859,1248,458.5859,1258,447.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1260" y="463.6528">participant</text><polygon fill="#A80036" points="1108,492.8516,1098,496.8516,1108,500.8516,1104,496.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1102" x2="1291" y1="496.8516" y2="496.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1114" y="491.7856">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1125" y="491.7856">Retrieved Participant</text><polygon fill="#A80036" points="806,521.9844,796,525.9844,806,529.9844,802,525.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="800" x2="1091" y1="525.9844" y2="525.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="812" y="520.9185">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="823" y="520.9185">Return Participant</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="837" y1="555.1172" y2="555.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="837" x2="837" y1="555.1172" y2="568.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796" x2="837" y1="568.1172" y2="568.1172"/><polygon fill="#A80036" points="806,564.1172,796,568.1172,806,572.1172,802,568.1172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="802" y="550.0513">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="813" y="550.0513">Validate DFSP</text><path d="M23,583.1172 L86,583.1172 L86,590.1172 L76,600.1172 L23,600.1172 L23,583.1172 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="943.6563" style="stroke: #000000; stroke-width: 2.0;" width="1349" x="23" y="583.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="38" y="596.1841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="101" y="595.3276">[Validate participant (success)]</text><polygon fill="#A80036" points="1075,647.6484,1085,651.6484,1075,655.6484,1079,651.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="1081" y1="651.6484" y2="651.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="802" y="631.4497">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="813" y="616.3169">Add Callback details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="813" y="631.4497">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="887" y="631.4497">2003/</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="920" y="631.4497">Msg:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="952" y="631.4497">Service unavailable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1069" y="631.4497"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="813" y="646.5825">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="887" y="646.5825">2001/</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="920" y="646.5825">Msg:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="952" y="646.5825">Internal Server Error</text><polygon fill="#A80036" points="1275,676.7813,1285,680.7813,1275,684.7813,1279,680.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1097" x2="1281" y1="680.7813" y2="680.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1104" y="675.7153">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1115" y="675.7153">Persist Participant Endpoint</text><polygon fill="#FFFFE0" filter="url(#f69vfrtyfgtk8)" points="1231,723.7813,1352,723.7813,1362,734.7813,1352,746.7813,1231,746.7813,1221,734.7813,1231,723.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="1233" y="739.8481">participantEndpoint</text><path d="M1102,756.9141 L1102,871.9141 L1320,871.9141 L1320,766.9141 L1310,756.9141 L1102,756.9141 " fill="#D3D3D3" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1310,756.9141 L1310,766.9141 L1320,766.9141 L1310,756.9141 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="1108" y="773.981">If (endpoint exists &amp;&amp; isActive = 1)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1120" y="789.1138">oldEndpoint.isActive = 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="1120" y="804.2466">insert endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1108" y="819.3794">Else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="1120" y="834.5122">insert endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1108" y="849.645">End</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1120" y="864.7778"/><polygon fill="#A80036" points="806,898.9766,796,902.9766,806,906.9766,802,902.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="800" x2="1091" y1="902.9766" y2="902.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="812" y="897.9106">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="830" y="897.9106">Return status</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="837" y1="932.1094" y2="932.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="837" x2="837" y1="932.1094" y2="945.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796" x2="837" y1="945.1094" y2="945.1094"/><polygon fill="#A80036" points="806,941.1094,796,945.1094,806,949.1094,802,945.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="802" y="927.0435">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="820" y="927.0435">Validate status</text><path d="M33,960.1094 L96,960.1094 L96,967.1094 L86,977.1094 L33,977.1094 L33,960.1094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="317.5313" style="stroke: #000000; stroke-width: 2.0;" width="996" x="33" y="960.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="48" y="973.1763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="111" y="972.3198">[Validate status (success)]</text><polygon fill="#A80036" points="565,994.375,555,998.375,565,1002.375,561,998.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="559" x2="789" y1="998.375" y2="998.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="571" y="993.3091">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="589" y="993.3091">Return Status Code 201</text><polygon fill="#A80036" points="113,1023.5078,103,1027.5078,113,1031.5078,109,1027.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="107" x2="543" y1="1027.5078" y2="1027.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="119" y="1022.4419">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="137" y="1022.4419">Return Status Code 201</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="33" x2="1029" y1="1036.5078" y2="1036.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="38" y="1046.7183">[Validate status (failure) / Error]</text><path d="M800,1055.3125 L800,1080.3125 L855,1080.3125 L855,1065.3125 L845,1055.3125 L800,1055.3125 " fill="#FF0000" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M845,1055.3125 L845,1065.3125 L855,1065.3125 L845,1055.3125 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="806" y="1072.3794">Error!</text><path d="M800,1094.4453 L800,1209.4453 L1015,1209.4453 L1015,1104.4453 L1005,1094.4453 L800,1094.4453 " fill="#FFFF00" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1005,1094.4453 L1005,1104.4453 L1015,1104.4453 L1005,1094.4453 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="806" y="1111.5122">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="818" y="1126.645">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="830" y="1141.7778">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="842" y="1156.9106">"errorCode": &lt;Error Code&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="842" y="1172.0435">"errorDescription": &lt;Msg&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="830" y="1187.1763">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="818" y="1202.3091">}</text><polygon fill="#A80036" points="565,1236.5078,555,1240.5078,565,1244.5078,561,1240.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="559" x2="784" y1="1240.5078" y2="1240.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="571" y="1235.4419">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="589" y="1235.4419">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="632" y="1235.4419">Error code</text><polygon fill="#A80036" points="113,1265.6406,103,1269.6406,113,1273.6406,109,1269.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="107" x2="543" y1="1269.6406" y2="1269.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="119" y="1264.5747">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="137" y="1264.5747">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="180" y="1264.5747">Error code</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1372" y1="1285.6406" y2="1285.6406"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="28" y="1295.8511">[Validate participant (failure)]</text><path d="M800,1304.4453 L800,1329.4453 L923,1329.4453 L923,1314.4453 L913,1304.4453 L800,1304.4453 " fill="#FF0000" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M913,1304.4453 L913,1314.4453 L923,1314.4453 L913,1304.4453 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="806" y="1321.5122">Validation failure!</text><path d="M800,1343.5781 L800,1458.5781 L1082,1458.5781 L1082,1353.5781 L1072,1343.5781 L800,1343.5781 " fill="#FFFF00" filter="url(#f69vfrtyfgtk8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1072,1343.5781 L1072,1353.5781 L1082,1353.5781 L1072,1343.5781 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="806" y="1360.645">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="818" y="1375.7778">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="830" y="1390.9106">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="842" y="1406.0435">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="842" y="1421.1763">"errorDescription": "FSP id Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="830" y="1436.3091">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="818" y="1451.4419">}</text><polygon fill="#A80036" points="565,1485.6406,555,1489.6406,565,1493.6406,561,1489.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="559" x2="789" y1="1489.6406" y2="1489.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="571" y="1484.5747">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="589" y="1484.5747">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="632" y="1484.5747">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="706" y="1484.5747">3200</text><polygon fill="#A80036" points="113,1514.7734,103,1518.7734,113,1522.7734,109,1518.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="107" x2="543" y1="1518.7734" y2="1518.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="119" y="1513.7075">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="137" y="1513.7075">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="180" y="1513.7075">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="254" y="1513.7075">3200</text><!--
@startuml
title 3.1.0 Add Participant Callback Details

autonumber

actor "HUB OPERATOR" as OPERATOR
boundary "Central Service API" as CSAPI
control "Participant Handler" as PARTICIPANT_HANDLER
entity "Central Service API" as CSAPI
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Central Services" #LightYellow
participant CSAPI
participant PARTICIPANT_HANDLER
participant PARTICIPANT_DAO
participant DB
end box


activate OPERATOR
group Add Callback Details
    OPERATOR -> CSAPI: Request to add callback details - POST - /paticipants/{name}/endpoints
    note right of OPERATOR #yellow
        Message:
        {
            payload: {
                endpoint: {
                    type: <typeValue>,
                    value: <endpointValue>
               }
            }
        }
    end note

    activate CSAPI
    CSAPI -> PARTICIPANT_HANDLER: Add Callback details for Participant
    activate PARTICIPANT_HANDLER
    PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Fetch Participant \n<color #FF0000><b>Error code:</b> 3200</color>

    activate PARTICIPANT_DAO
    PARTICIPANT_DAO -> DB: Fetch Participant
    activate DB
    hnote over DB #lightyellow
        participant
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Participant
    deactivate DB
    PARTICIPANT_DAO - -> PARTICIPANT_HANDLER: Return Participant
    deactivate PARTICIPANT_DAO
    PARTICIPANT_HANDLER ->PARTICIPANT_HANDLER: Validate DFSP
    alt Validate participant (success)
        PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Add Callback details for Participant \n<color #FF0000><b>Error code:</b> 2003/<b>Msg:</b> Service unavailable </color> \n<color #FF0000><b>Error code:</b> 2001/<b>Msg:</b> Internal Server Error </color>
        activate PARTICIPANT_DAO
        PARTICIPANT_DAO -> DB: Persist Participant Endpoint
        activate DB
        hnote over DB #lightyellow
            participantEndpoint
        end note
        deactivate DB
        note right of PARTICIPANT_DAO #lightgrey
            If (endpoint exists && isActive = 1)
                oldEndpoint.isActive = 0
                insert endpoint
            Else
                insert endpoint
            End
                
        end note
        PARTICIPANT_DAO - -> PARTICIPANT_HANDLER: Return status
        deactivate PARTICIPANT_DAO
        PARTICIPANT_HANDLER -> PARTICIPANT_HANDLER: Validate status
        alt Validate status (success)
            PARTICIPANT_HANDLER - ->CSAPI: Return Status Code 201
            deactivate PARTICIPANT_HANDLER
            CSAPI - ->OPERATOR: Return Status Code 201
        else Validate status (failure) / Error
            note right of PARTICIPANT_HANDLER #red: Error!
            activate PARTICIPANT_HANDLER
            note right of PARTICIPANT_HANDLER #yellow
            Message:
                {
                    "errorInformation": {
                        "errorCode": <Error Code>,
                        "errorDescription": <Msg>,
                    }
                }
            end note
            PARTICIPANT_HANDLER - ->CSAPI: Return <color #FF0000><b>Error code</b></color>
            CSAPI - ->OPERATOR: Return <color #FF0000><b>Error code</b></color>
            
        end

    else Validate participant (failure)
        note right of PARTICIPANT_HANDLER #red: Validation failure!
        activate PARTICIPANT_HANDLER
        note right of PARTICIPANT_HANDLER #yellow
            Message:
                {
                    "errorInformation": {
                        "errorCode": 3200,
                        "errorDescription": "FSP id Not Found",
                    }
                }
        end note
        PARTICIPANT_HANDLER - ->CSAPI: Return <color #FF0000><b>Error code:</b> 3200</color>
        deactivate PARTICIPANT_HANDLER
        CSAPI - ->OPERATOR: Return <color #FF0000><b>Error code:</b> 3200</color>

    end
    deactivate CSAPI
    deactivate OPERATOR
end
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>