<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1532px" preserveAspectRatio="none" style="width:656px;height:1532px;" version="1.1" viewBox="0 0 656 1532" width="656px" zoomAndPan="magnify"><defs><filter height="300%" id="f1x4n657c0qxca" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="236.25" y="22.9951">Quoting Service Sequences</text><rect fill="#FFFFFF" filter="url(#f1x4n657c0qxca)" height="1185.3281" style="stroke: #000000; stroke-width: 2.0;" width="632.5" x="12" y="257.7188"/><rect fill="#FFFFFF" filter="url(#f1x4n657c0qxca)" height="845.1953" style="stroke: #000000; stroke-width: 2.0;" width="523.5" x="22" y="478.6484"/><rect fill="#FFFFFF" filter="url(#f1x4n657c0qxca)" height="422.7969" style="stroke: #000000; stroke-width: 2.0;" width="503.5" x="32" y="642.3125"/><rect fill="#FFFFFF" height="181.6016" style="stroke: none; stroke-width: 1.0;" width="503.5" x="32" y="883.5078"/><rect fill="#FFFFFF" height="251.7344" style="stroke: none; stroke-width: 1.0;" width="523.5" x="22" y="1072.1094"/><rect fill="#FFFFFF" height="112.2031" style="stroke: none; stroke-width: 1.0;" width="632.5" x="12" y="1330.8438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="117" x2="117" y1="101.1875" y2="1460.0469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="298" x2="298" y1="101.1875" y2="1460.0469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="479.5" x2="479.5" y1="101.1875" y2="1460.0469"/><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="73" y="65.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="80" y="85.8857">Payer DFSP</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="73" y="1459.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="80" y="1479.042">Payer DFSP</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="62.8906" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="264" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="276" y="53.292">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="271" y="69.5889">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="273.5" y="85.8857">Service</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="62.8906" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="264" y="1459.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="276" y="1479.042">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="271" y="1495.3389">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="273.5" y="1511.6357">Service</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="433.5" y="65.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="440.5" y="85.8857">Payee DFSP</text><rect fill="#FEFECE" filter="url(#f1x4n657c0qxca)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="433.5" y="1459.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="440.5" y="1479.042">Payee DFSP</text><path d="M67,116.1875 L67,141.1875 L344,141.1875 L344,126.1875 L334,116.1875 L67,116.1875 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334,116.1875 L334,126.1875 L344,126.1875 L334,116.1875 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="73" y="133.2544">Payer DFSP requests quote from Payee DFSP</text><polygon fill="#A80036" points="286.5,167.4531,296.5,171.4531,286.5,171.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117.5" x2="297.5" y1="171.4531" y2="171.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="124.5" y="166.3872">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="135.5" y="166.3872">POST /quotes</text><polygon fill="#A80036" points="128.5,201.5859,118.5,201.5859,128.5,205.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="117.5" x2="297.5" y1="200.5859" y2="200.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="134.5" y="195.52">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="145.5" y="195.52">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="340.5" y1="229.7188" y2="229.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="340.5" y1="229.7188" y2="242.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="299.5" x2="340.5" y1="242.7188" y2="242.7188"/><polygon fill="#A80036" points="309.5,238.7188,299.5,242.7188,309.5,246.7188,305.5,242.7188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="305.5" y="224.6528">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="316.5" y="224.6528">Validate Quote Request</text><path d="M12,257.7188 L75,257.7188 L75,264.7188 L65,274.7188 L12,274.7188 L12,257.7188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1185.3281" style="stroke: #000000; stroke-width: 2.0;" width="632.5" x="12" y="257.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="27" y="270.7856">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="90" y="269.9292">[quote is valid]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="340.5" y1="295.9844" y2="295.9844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="340.5" y1="295.9844" y2="308.9844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="299.5" x2="340.5" y1="308.9844" y2="308.9844"/><polygon fill="#A80036" points="309.5,304.9844,299.5,308.9844,309.5,312.9844,305.5,308.9844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="305.5" y="290.9185">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="316.5" y="290.9185">Persist Quote Data</text><path d="M244,321.9844 L244,361.9844 L529,361.9844 L529,331.9844 L519,321.9844 L244,321.9844 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M519,321.9844 L519,331.9844 L529,331.9844 L519,321.9844 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="250" y="339.0513">Switch forwards quote request to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="250" y="354.1841">&lt;Payer based Rules&gt;</text><polygon fill="#A80036" points="467.5,388.3828,477.5,392.3828,467.5,392.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="478.5" y1="392.3828" y2="392.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="305.5" y="387.3169">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="316.5" y="387.3169">POST /quotes</text><polygon fill="#A80036" points="309.5,422.5156,299.5,422.5156,309.5,426.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="298.5" x2="478.5" y1="421.5156" y2="421.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="315.5" y="416.4497">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="326.5" y="416.4497">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="479.5" x2="521.5" y1="450.6484" y2="450.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521.5" x2="521.5" y1="450.6484" y2="463.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="480.5" x2="521.5" y1="463.6484" y2="463.6484"/><polygon fill="#A80036" points="490.5,459.6484,480.5,463.6484,490.5,467.6484,486.5,463.6484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="486.5" y="445.5825">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="497.5" y="445.5825">Calculate Fees/Charges</text><path d="M22,478.6484 L85,478.6484 L85,485.6484 L75,495.6484 L22,495.6484 L22,478.6484 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="845.1953" style="stroke: #000000; stroke-width: 2.0;" width="523.5" x="22" y="478.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="37" y="491.7153">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="100" y="490.8589">[Payee DFSP successfully calculates quote]</text><path d="M260,500.7813 L260,525.7813 L516,525.7813 L516,510.7813 L506,500.7813 L260,500.7813 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M506,500.7813 L506,510.7813 L516,510.7813 L506,500.7813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="268.75" y="517.8481">Payee DFSP responds to quote request</text><polygon fill="#A80036" points="309.5,552.0469,299.5,556.0469,309.5,556.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="478.5" y1="556.0469" y2="556.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="315.5" y="550.981">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="326.5" y="550.981">PUT /quotes/{ID}</text><polygon fill="#A80036" points="467.5,586.1797,477.5,586.1797,467.5,590.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="298.5" x2="478.5" y1="585.1797" y2="585.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="305.5" y="580.1138">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="316.5" y="580.1138">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="340.5" y1="614.3125" y2="614.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="340.5" y1="614.3125" y2="627.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="299.5" x2="340.5" y1="627.3125" y2="627.3125"/><polygon fill="#A80036" points="309.5,623.3125,299.5,627.3125,309.5,631.3125,305.5,627.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="305.5" y="609.2466">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="323.5" y="609.2466">Validate Quote Response</text><path d="M32,642.3125 L95,642.3125 L95,649.3125 L85,659.3125 L32,659.3125 L32,642.3125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="422.7969" style="stroke: #000000; stroke-width: 2.0;" width="503.5" x="32" y="642.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="47" y="655.3794">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="110" y="654.5229">[response is ok]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="340.5" y1="680.5781" y2="680.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="340.5" y1="680.5781" y2="693.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="299.5" x2="340.5" y1="693.5781" y2="693.5781"/><polygon fill="#A80036" points="309.5,689.5781,299.5,693.5781,309.5,697.5781,305.5,693.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="305.5" y="675.5122">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="323.5" y="675.5122">Persist Response Data</text><path d="M59,706.5781 L59,746.5781 L352,746.5781 L352,716.5781 L342,706.5781 L59,706.5781 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M342,706.5781 L342,716.5781 L352,716.5781 L342,706.5781 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="65" y="723.645">Switch forwards quote response to Payer DFSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="65" y="738.7778">&lt;Payee whole request Rule&gt;</text><polygon fill="#A80036" points="128.5,772.9766,118.5,776.9766,128.5,776.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117.5" x2="297.5" y1="776.9766" y2="776.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="134.5" y="771.9106">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="152.5" y="771.9106">PUT /quotes/{ID}</text><polygon fill="#A80036" points="286.5,807.1094,296.5,807.1094,286.5,811.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="117.5" x2="297.5" y1="806.1094" y2="806.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="124.5" y="801.0435">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="142.5" y="801.0435">202 Accepted</text><path d="M42,819.1094 L42,874.1094 L188,874.1094 L188,829.1094 L178,819.1094 L42,819.1094 " fill="#3498DB" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M178,819.1094 L178,829.1094 L188,829.1094 L178,819.1094 " fill="#3498DB" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="48" y="836.1763">Payer DFSP continues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="48" y="851.3091">with transfer if quote</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="48" y="866.4419">is acceptable...</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32" x2="535.5" y1="884.5078" y2="884.5078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="37" y="894.7183">[response invalid]</text><path d="M260,903.3125 L260,928.3125 L516,928.3125 L516,913.3125 L506,903.3125 L260,903.3125 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M506,903.3125 L506,913.3125 L516,913.3125 L506,903.3125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="281.25" y="920.3794">Switch returns error to Payee DFSP</text><polygon fill="#A80036" points="467.5,954.5781,477.5,958.5781,467.5,958.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="478.5" y1="958.5781" y2="958.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="305.5" y="953.5122">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="323.5" y="953.5122">PUT /quotes/{ID}/error</text><polygon fill="#A80036" points="309.5,988.7109,299.5,988.7109,309.5,992.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="298.5" x2="478.5" y1="987.7109" y2="987.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="315.5" y="982.645">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="333.5" y="982.645">202 Accepted</text><path d="M260,1000.7109 L260,1055.7109 L516,1055.7109 L516,1010.7109 L506,1000.7109 L260,1000.7109 " fill="#EC7063" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M506,1000.7109 L506,1010.7109 L516,1010.7109 L506,1000.7109 " fill="#EC7063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="302.25" y="1017.7778">Note that under this</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="302.25" y="1032.9106">scenario the Payer DFSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="302.25" y="1048.0435">may not receive a response</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="22" x2="545.5" y1="1073.1094" y2="1073.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="275" x="27" y="1083.3198">[Payee DFSP calculation fails or rejects the request]</text><path d="M260,1091.9141 L260,1116.9141 L516,1116.9141 L516,1101.9141 L506,1091.9141 L260,1091.9141 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M506,1091.9141 L506,1101.9141 L516,1101.9141 L506,1091.9141 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="281.25" y="1108.981">Payee DFSP returns error to Switch</text><polygon fill="#A80036" points="309.5,1143.1797,299.5,1147.1797,309.5,1147.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="478.5" y1="1147.1797" y2="1147.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="315.5" y="1142.1138">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="333.5" y="1142.1138">POST quotes/{ID}/error</text><polygon fill="#A80036" points="467.5,1177.3125,477.5,1177.3125,467.5,1181.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="298.5" x2="478.5" y1="1176.3125" y2="1176.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="305.5" y="1171.2466">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="323.5" y="1171.2466">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="340.5" y1="1205.4453" y2="1205.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="340.5" y1="1205.4453" y2="1218.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="299.5" x2="340.5" y1="1218.4453" y2="1218.4453"/><polygon fill="#A80036" points="309.5,1214.4453,299.5,1218.4453,309.5,1222.4453,305.5,1218.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="305.5" y="1200.3794">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="323.5" y="1200.3794">Persist error data</text><path d="M80,1231.4453 L80,1256.4453 L335,1256.4453 L335,1241.4453 L325,1231.4453 L80,1231.4453 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M325,1231.4453 L325,1241.4453 L335,1241.4453 L325,1231.4453 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="101.5" y="1248.5122">Switch returns error to Payer DFSP</text><polygon fill="#A80036" points="128.5,1282.7109,118.5,1286.7109,128.5,1286.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117.5" x2="297.5" y1="1286.7109" y2="1286.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="134.5" y="1281.645">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="152.5" y="1281.645">POST quotes/{ID}/error</text><polygon fill="#A80036" points="286.5,1316.8438,296.5,1316.8438,286.5,1320.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="117.5" x2="297.5" y1="1315.8438" y2="1315.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="124.5" y="1310.7778">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="142.5" y="1310.7778">202 Accepted</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="12" x2="644.5" y1="1331.8438" y2="1331.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="17" y="1342.0542">[quote invalid]</text><path d="M80,1350.6484 L80,1375.6484 L335,1375.6484 L335,1360.6484 L325,1350.6484 L80,1350.6484 " fill="#FBFB77" filter="url(#f1x4n657c0qxca)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M325,1350.6484 L325,1360.6484 L335,1360.6484 L325,1350.6484 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="101.5" y="1367.7153">Switch returns error to Payer DFSP</text><polygon fill="#A80036" points="128.5,1401.9141,118.5,1405.9141,128.5,1405.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117.5" x2="297.5" y1="1405.9141" y2="1405.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="134.5" y="1400.8481">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="152.5" y="1400.8481">POST quotes/{ID}/error</text><polygon fill="#A80036" points="286.5,1436.0469,296.5,1436.0469,286.5,1440.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="117.5" x2="297.5" y1="1435.0469" y2="1435.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="124.5" y="1429.981">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="142.5" y="1429.981">202 Accepted</text><!--
@startuml
Title Quoting Service Sequences
participant "Payer DFSP"
participant "Switch\nQuoting\nService" as Switch
participant "Payee DFSP"

autonumber
note over "Payer DFSP", Switch: Payer DFSP requests quote from Payee DFSP
"Payer DFSP" -\ Switch: POST /quotes
Switch - -/ "Payer DFSP": 202 Accepted
Switch -> Switch: Validate Quote Request
alt quote is valid
    Switch -> Switch: Persist Quote Data
    note over Switch, "Payee DFSP": Switch forwards quote request to Payee DFSP\n<Payer based Rules> 
    Switch -\ "Payee DFSP": POST /quotes
    "Payee DFSP" - -/ Switch: 202 Accepted
    "Payee DFSP" -> "Payee DFSP": Calculate Fees/Charges
    
    alt Payee DFSP successfully calculates quote
    
        note over "Payee DFSP", Switch: Payee DFSP responds to quote request
        "Payee DFSP" -\ Switch: PUT /quotes/{ID}
        Switch - -/ "Payee DFSP": 202 Accepted
        
        Switch -> Switch: Validate Quote Response
        
        alt response is ok
        
            Switch -> Switch: Persist Response Data
            
            note over Switch, "Payer DFSP": Switch forwards quote response to Payer DFSP\n<Payee \ whole request Rule>
            
            Switch -\ "Payer DFSP": PUT /quotes/{ID}
            "Payer DFSP" - -/ Switch: 202 Accepted
            
            note over "Payer DFSP" #3498db: Payer DFSP continues\nwith transfer if quote\nis acceptable...
        else response invalid
        
            note over Switch, "Payee DFSP": Switch returns error to Payee DFSP
        
            Switch -\ "Payee DFSP": PUT /quotes/{ID}/error
            "Payee DFSP" - -/ Switch : 202 Accepted
            
            note over Switch, "Payee DFSP" #ec7063: Note that under this\nscenario the Payer DFSP\nmay not receive a response
        
        end
    else Payee DFSP calculation fails or rejects the request
    
        note over "Payee DFSP", Switch: Payee DFSP returns error to Switch
    
        "Payee DFSP" -\ Switch: POST quotes/{ID}/error
        Switch - -/ "Payee DFSP": 202 Accepted
        Switch -> Switch: Persist error data
        
        note over "Payer DFSP", Switch: Switch returns error to Payer DFSP
        
        Switch -\ "Payer DFSP": POST quotes/{ID}/error
        "Payer DFSP" - -/ Switch: 202 Accepted
    
    end
else quote invalid
    note over "Payer DFSP", Switch: Switch returns error to Payer DFSP
    Switch -\ "Payer DFSP": POST quotes/{ID}/error
    "Payer DFSP" - -/ Switch: 202 Accepted
end
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>