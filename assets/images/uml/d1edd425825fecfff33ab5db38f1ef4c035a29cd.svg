<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1350px" preserveAspectRatio="none" style="width:1390px;height:1350px;" version="1.1" viewBox="0 0 1390 1350" width="1390px" zoomAndPan="magnify"><defs><filter height="300%" id="f10i70ncir7j5y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="297" x="547.75" y="22.9951">3.1.0. Transfer Timeout (incl. Bulk Transfer)</text><rect fill="#D3D3D3" height="1305.25" style="stroke: #A80036; stroke-width: 1.0;" width="178" x="4" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="7" y="46.3638">Financial Service Providers</text><rect fill="#ADD8E6" height="1305.25" style="stroke: #A80036; stroke-width: 1.0;" width="234.5" x="184" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="226.75" y="46.3638">ML API Adapter Service</text><rect fill="#FFFFE0" height="1305.25" style="stroke: #A80036; stroke-width: 1.0;" width="933" x="420.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="838" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="345" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="476.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="847" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1133" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1049.9297" style="stroke: #000000; stroke-width: 2.0;" width="1357.5" x="22" y="170.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="359.0078" style="stroke: #000000; stroke-width: 2.0;" width="965" x="404.5" y="279.5547"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="945" x="414.5" y="303.6875"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="945" x="414.5" y="349.9531"/><rect fill="#FFFFFF" height="237.6719" style="stroke: none; stroke-width: 1.0;" width="965" x="404.5" y="400.8906"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="566" x="793.5" y="541.3594"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="566" x="793.5" y="587.625"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="421.5" x="938" y="652.5625"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="1020" x="32" y="852.3594"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="964" x="88" y="1052.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="65" x2="65" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="121" x2="121" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="216" x2="216" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="349.5" x2="349.5" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="481.5" x2="481.5" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="624.5" x2="624.5" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="745.5" x2="745.5" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="851.5" x2="851.5" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="995" x2="995" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1137.5" x2="1137.5" y1="153.0234" y2="1236.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1287.5" x2="1287.5" y1="153.0234" y2="1236.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="42" y="133.4248">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="44.5" y="149.7217">Payer</text><ellipse cx="65" cy="63.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M65,71.4297 L65,98.4297 M52,79.4297 L78,79.4297 M65,98.4297 L52,113.4297 M65,98.4297 L78,113.4297 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="42" y="1248.9482">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="44.5" y="1265.2451">Payer</text><ellipse cx="65" cy="1278.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M65,1286.5469 L65,1313.5469 M52,1294.5469 L78,1294.5469 M65,1313.5469 L52,1328.5469 M65,1313.5469 L78,1328.5469 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="98" y="133.4248">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="99" y="149.7217">Payee</text><ellipse cx="121" cy="63.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M121,71.4297 L121,98.4297 M108,79.4297 L134,79.4297 M121,98.4297 L108,113.4297 M121,98.4297 L134,113.4297 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="98" y="1248.9482">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="99" y="1265.2451">Payee</text><ellipse cx="121" cy="1278.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M121,1286.5469 L121,1313.5469 M108,1294.5469 L134,1294.5469 M121,1313.5469 L108,1328.5469 M121,1313.5469 L134,1328.5469 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="190.5" y="133.4248">ML API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="188" y="149.7217">Adapter</text><path d="M195.5,92.4297 L195.5,116.4297 M195.5,104.4297 L212.5,104.4297 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="224.5" cy="104.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="190.5" y="1248.9482">ML API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="188" y="1265.2451">Adapter</text><path d="M195.5,1272.5469 L195.5,1296.5469 M195.5,1284.5469 L212.5,1284.5469 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="224.5" cy="1284.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="285.5" y="133.4248">ML API Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="302.5" y="149.7217">Event Handler</text><ellipse cx="350" cy="104.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="346,92.4297,352,87.4297,350,92.4297,352,97.4297,346,92.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="285.5" y="1248.9482">ML API Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="302.5" y="1265.2451">Event Handler</text><ellipse cx="350" cy="1284.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="346,1272.5469,352,1267.5469,350,1272.5469,352,1277.5469,346,1272.5469" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="424.5" y="133.4248">Transfer Timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="453.5" y="149.7217">Handler</text><ellipse cx="481.5" cy="104.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="477.5,92.4297,483.5,87.4297,481.5,92.4297,483.5,97.4297,477.5,92.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="424.5" y="1248.9482">Transfer Timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="453.5" y="1265.2451">Handler</text><ellipse cx="481.5" cy="1284.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="477.5,1272.5469,483.5,1267.5469,481.5,1272.5469,483.5,1277.5469,477.5,1272.5469" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="564.5" y="97.4297"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="560.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="602" y="121.4248">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="567.5" y="137.7217">transfer-position</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="564.5" y="1235.9531"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="560.5" y="1239.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="602" y="1259.9482">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="567.5" y="1276.2451">transfer-position</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="702.5" y="113.7266"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="698.5" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="705.5" y="137.7217">topic-event</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="702.5" y="1235.9531"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="698.5" y="1239.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="705.5" y="1259.9482">topic-event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="803.5" y="133.4248">Position Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="824" y="149.7217">Handler</text><ellipse cx="852" cy="104.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="848,92.4297,854,87.4297,852,92.4297,854,97.4297,848,92.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="803.5" y="1248.9482">Position Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="824" y="1265.2451">Handler</text><ellipse cx="852" cy="1284.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="848,1272.5469,854,1267.5469,852,1272.5469,854,1277.5469,848,1272.5469" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="952" y="97.4297"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="948" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="972.5" y="121.4248">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="955" y="137.7217">notification</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="952" y="1235.9531"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="948" y="1239.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="972.5" y="1259.9482">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="955" y="1276.2451">notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1084.5" y="133.4248">Bulk Processing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="1110" y="149.7217">Handler</text><ellipse cx="1138" cy="104.4297" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1134,92.4297,1140,87.4297,1138,92.4297,1140,97.4297,1134,92.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1084.5" y="1248.9482">Bulk Processing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="1110" y="1265.2451">Handler</text><ellipse cx="1138" cy="1284.5469" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1134,1272.5469,1140,1267.5469,1138,1272.5469,1140,1277.5469,1134,1272.5469" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1230.5" y="97.4297"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1226.5" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1265.5" y="121.4248">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1233.5" y="137.7217">bulk-processing</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1230.5" y="1235.9531"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1226.5" y="1239.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1265.5" y="1259.9482">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1233.5" y="1276.2451">bulk-processing</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="345" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="476.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="847" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1063.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1133" y="163.0234"/><path d="M22,170.0234 L162,170.0234 L162,177.0234 L152,187.0234 L22,187.0234 L22,170.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1049.9297" style="stroke: #000000; stroke-width: 2.0;" width="1357.5" x="22" y="170.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="37" y="183.0903">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="371" x="421.5" y="212.1563"/><polygon fill="#EEEEEE" points="421.5,212.1563,485.5,212.1563,485.5,219.1563,475.5,229.1563,421.5,229.1563,421.5,212.1563" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="434.5" y="226.2231">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="530.5" y="245.2231">Timeout Handler Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="533.5" y="260.356"/><path d="M404.5,279.5547 L467.5,279.5547 L467.5,286.5547 L457.5,296.5547 L404.5,296.5547 L404.5,279.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="359.0078" style="stroke: #000000; stroke-width: 2.0;" width="965" x="404.5" y="279.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="419.5" y="292.6216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="482.5" y="291.7651">[transferStateId == 'RECEIVED_PREPARE']</text><path d="M414.5,303.6875 L477.5,303.6875 L477.5,310.6875 L467.5,320.6875 L414.5,320.6875 L414.5,303.6875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="945" x="414.5" y="303.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="429.5" y="316.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="492.5" y="315.8979">[Regular Transfer]</text><polygon fill="#A80036" points="983,337.9531,993,341.9531,983,345.9531,987,341.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486.5" x2="989" y1="341.9531" y2="341.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="493.5" y="336.8872">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="504.5" y="336.8872">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="414.5" x2="1359.5" y1="350.9531" y2="350.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="419.5" y="361.1636">[Individual Transfer from a Bulk]</text><polygon fill="#A80036" points="1276,381.8906,1286,385.8906,1276,389.8906,1280,385.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486.5" x2="1282" y1="385.8906" y2="385.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="493.5" y="380.8247">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="504.5" y="380.8247">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="404.5" x2="1369.5" y1="401.8906" y2="401.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="409.5" y="412.1011">[transferStateId == 'RESERVED']</text><polygon fill="#A80036" points="612.5,432.8281,622.5,436.8281,612.5,440.8281,616.5,436.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486.5" x2="618.5" y1="436.8281" y2="436.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="493.5" y="431.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="504.5" y="431.7622">Produce message</text><polygon fill="#A80036" points="635.5,461.9609,625.5,465.9609,635.5,469.9609,631.5,465.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629.5" x2="846" y1="465.9609" y2="465.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="641.5" y="460.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="652.5" y="460.895">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="483.5" x="557.5" y="473.9609"/><polygon fill="#EEEEEE" points="557.5,473.9609,621.5,473.9609,621.5,480.9609,611.5,490.9609,557.5,490.9609,557.5,473.9609" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="570.5" y="488.0278">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="695.25" y="507.0278">Position Hander Consume (Timeout)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="698.25" y="522.1606"/><path d="M793.5,541.3594 L856.5,541.3594 L856.5,548.3594 L846.5,558.3594 L793.5,558.3594 L793.5,541.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="566" x="793.5" y="541.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808.5" y="554.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="871.5" y="553.5698">[Regular Transfer]</text><polygon fill="#A80036" points="983,575.625,993,579.625,983,583.625,987,579.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="857" x2="989" y1="579.625" y2="579.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="864" y="574.5591">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="875" y="574.5591">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="793.5" x2="1359.5" y1="588.625" y2="588.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="798.5" y="598.8354">[Individual Transfer from a Bulk]</text><polygon fill="#A80036" points="1276,619.5625,1286,623.5625,1276,627.5625,1280,623.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="857" x2="1282" y1="623.5625" y2="623.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="864" y="618.4966">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="875" y="618.4966">Produce message</text><path d="M938,652.5625 L1005,652.5625 L1005,659.5625 L995,669.5625 L938,669.5625 L938,652.5625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="421.5" x="938" y="652.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="953" y="665.6294">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="326" x="1020" y="664.7729">[action IN ['bulk-timeout-received', 'bulk-timeout-reserved']]</text><polygon fill="#A80036" points="1276,711.8281,1286,715.8281,1276,719.8281,1280,715.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1143" x2="1282" y1="715.8281" y2="715.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1150" y="710.7622">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="1161" y="710.7622">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="403.5" x="945" y="723.8281"/><polygon fill="#EEEEEE" points="945,723.8281,1009,723.8281,1009,730.8281,999,740.8281,945,740.8281,945,723.8281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="958" y="737.895">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="1073.75" y="756.895">Bulk Processing Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1076.75" y="772.0278"/><polygon fill="#A80036" points="1006,801.3594,996,805.3594,1006,809.3594,1002,805.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1000" x2="1132" y1="805.3594" y2="805.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="1012" y="800.2935">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1023" y="800.2935">Produce message</text><path d="M32,852.3594 L99,852.3594 L99,859.3594 L89,869.3594 L32,869.3594 L32,852.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="1020" x="32" y="852.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="47" y="865.4263">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="537" x="114" y="864.5698">[action IN ['timeout-received', 'timeout-reserved', 'bulk-timeout-received', 'bulk-timeout-reserved']]</text><polygon fill="#A80036" points="983,911.625,993,915.625,983,919.625,987,915.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="989" y1="915.625" y2="915.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="362" y="910.5591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="373" y="910.5591">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="1002" x="39" y="923.625"/><polygon fill="#EEEEEE" points="39,923.625,103,923.625,103,930.625,93,940.625,39,940.625,39,923.625" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="52" y="937.6919">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="431" y="956.6919">Send notification to Participant (Payer)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="434" y="971.8247"/><polygon fill="#A80036" points="76,1001.1563,66,1005.1563,76,1009.1563,72,1005.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="344" y1="1005.1563" y2="1005.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="82" y="1000.0903">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="100" y="1000.0903">Send callback notification</text><path d="M88,1052.1563 L155,1052.1563 L155,1059.1563 L145,1069.1563 L88,1069.1563 L88,1052.1563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="160.7969" style="stroke: #000000; stroke-width: 2.0;" width="964" x="88" y="1052.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="103" y="1065.2231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="300" x="170" y="1064.3667">[action IN ['timeout-reserved', 'bulk-timeout-reserved']]</text><polygon fill="#A80036" points="983,1111.4219,993,1115.4219,983,1119.4219,987,1115.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="989" y1="1115.4219" y2="1115.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="362" y="1110.356">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="380" y="1110.356">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="946" x="95" y="1123.4219"/><polygon fill="#EEEEEE" points="95,1123.4219,159,1123.4219,159,1130.4219,149,1140.4219,95,1140.4219,95,1123.4219" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="108" y="1137.4888">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="458" y="1156.4888">Send notification to Participant (Payee)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="461" y="1171.6216"/><polygon fill="#A80036" points="132,1200.9531,122,1204.9531,132,1208.9531,128,1204.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="126" x2="344" y1="1204.9531" y2="1204.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="138" y="1199.8872">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="156" y="1199.8872">Send callback notification</text><!--
@startuml
title 3.1.0. Transfer Timeout (incl. Bulk Transfer)

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API\nAdapter" as MLAPI
control "ML API Notification\nEvent Handler" as NOTIFY_HANDLER
control "Transfer Timeout\nHandler" as EXP_HANDLER
collections "topic-\ntransfer-position" as TOPIC_TRANSFER_POSITION
control "Position Event\nHandler" as POS_HANDLER
control "Bulk Processing\nHandler" as BULK_PROCESSING_HANDLER
collections "topic-\nnotification" as TOPIC_NOTIFICATIONS
collections "topic-event" as TOPIC_EVENT
collections "topic-\nbulk-processing" as BULK_PROCESSING_TOPIC

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_TRANSFER_POSITION
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_NOTIFICATIONS
    participant BULK_PROCESSING_HANDLER
    participant BULK_PROCESSING_TOPIC
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
activate BULK_PROCESSING_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume\n
    alt transferStateId == 'RECEIVED_PREPARE'
        alt Regular Transfer
            EXP_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
        else Individual Transfer from a Bulk
            EXP_HANDLER -> BULK_PROCESSING_TOPIC: Produce message
        end
    else transferStateId == 'RESERVED'
        EXP_HANDLER -> TOPIC_TRANSFER_POSITION: Produce message
        TOPIC_TRANSFER_POSITION <- POS_HANDLER: Consume message
        ref over TOPIC_TRANSFER_POSITION, TOPIC_NOTIFICATIONS :  Position Hander Consume (Timeout)\n
        alt Regular Transfer
            POS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
        else Individual Transfer from a Bulk
            POS_HANDLER -> BULK_PROCESSING_TOPIC: Produce message
        end
    end
    opt action IN ['bulk-timeout-received', 'bulk-timeout-reserved']
        |||
        BULK_PROCESSING_TOPIC <- BULK_PROCESSING_HANDLER: Consume message
        ref over TOPIC_NOTIFICATIONS, BULK_PROCESSING_TOPIC : Bulk Processing Consume\n
        BULK_PROCESSING_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    end
    |||
    opt action IN ['timeout-received', 'timeout-reserved', 'bulk-timeout-received', 'bulk-timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer)\n
        NOTIFY_HANDLER -> DFSP1: Send callback notification
    end
    |||
    opt action IN ['timeout-reserved', 'bulk-timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee)\n
        NOTIFY_HANDLER -> DFSP2: Send callback notification
    end
end
deactivate BULK_PROCESSING_HANDLER
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>