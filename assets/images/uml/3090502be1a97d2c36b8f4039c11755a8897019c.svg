<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2161px" preserveAspectRatio="none" style="width:1368px;height:2161px;" version="1.1" viewBox="0 0 1368 2161" width="1368px" zoomAndPan="magnify"><defs><filter height="300%" id="f4g3bh2abolui" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="540" x="415" y="22.9951">5.2.1. Record Funds Out - Prepare &amp; Reserve (recordFundsOutPrepareReserve)</text><rect fill="#FFB6C1" height="2116.0781" style="stroke: #A80036; stroke-width: 1.0;" width="107" x="19" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="34" y="46.3638">Central HUB</text><rect fill="#FFFFE0" height="2116.0781" style="stroke: #A80036; stroke-width: 1.0;" width="861.5" x="300" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="681.75" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="546.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="349.5" y="503.5156"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="116.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="904.7031"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="1907.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="750.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="915.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885.5" y="1123.8984"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1108.5" y="1658.8203"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="1893.3516" style="stroke: #000000; stroke-width: 2.0;" width="1344" x="13" y="153.7266"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="872.0469" style="stroke: #000000; stroke-width: 2.0;" width="532" x="815" y="1138.8984"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="117.6641" style="stroke: #000000; stroke-width: 2.0;" width="332.5" x="835" y="1163.0313"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="223.5938" style="stroke: #000000; stroke-width: 2.0;" width="332.5" x="835" y="1294.6953"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="446.6563" style="stroke: #000000; stroke-width: 2.0;" width="512" x="825" y="1557.2891"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="376.3906" style="stroke: #000000; stroke-width: 2.0;" width="492" x="835" y="1620.5547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="72" x2="72" y1="136.7266" y2="2064.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="354" x2="354" y1="136.7266" y2="2064.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="571" x2="571" y1="136.7266" y2="2064.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="755" x2="755" y1="136.7266" y2="2064.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="890" x2="890" y1="136.7266" y2="2064.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1113.5" x2="1113.5" y1="136.7266" y2="2064.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="23" y="133.4248">Hub Employee</text><ellipse cx="72.5" cy="63.4297" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M72.5,71.4297 L72.5,98.4297 M59.5,79.4297 L85.5,79.4297 M72.5,98.4297 L59.5,113.4297 M72.5,98.4297 L85.5,113.4297 " fill="none" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="23" y="2076.0732">Hub Employee</text><ellipse cx="72.5" cy="2089.375" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M72.5,2097.375 L72.5,2124.375 M59.5,2105.375 L85.5,2105.375 M72.5,2124.375 L59.5,2139.375 M72.5,2124.375 L85.5,2139.375 " fill="none" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="304" y="117.1279">Central Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="319.5" y="133.4248">Admin API</text><path d="M334,76.1328 L334,100.1328 M334,88.1328 L351,88.1328 " fill="none" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="363" cy="88.1328" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="304" y="2076.0732">Central Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="319.5" y="2092.3701">Admin API</text><path d="M334,2099.6719 L334,2123.6719 M334,2111.6719 L351,2111.6719 " fill="none" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="363" cy="2111.6719" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f4g3bh2abolui)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="496" y="97.4297"/><rect fill="#FEFECE" filter="url(#f4g3bh2abolui)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="492" y="101.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="499" y="121.4248">Admin-Transfer-Topic</text><rect fill="#FEFECE" filter="url(#f4g3bh2abolui)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="496" y="2063.0781"/><rect fill="#FEFECE" filter="url(#f4g3bh2abolui)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="492" y="2067.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="499" y="2087.0732">Admin-Transfer-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="685" y="133.4248">Admin Event Handler</text><ellipse cx="755.5" cy="104.4297" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="751.5,92.4297,757.5,87.4297,755.5,92.4297,757.5,97.4297,751.5,92.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="685" y="2076.0732">Admin Event Handler</text><ellipse cx="755.5" cy="2095.375" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="751.5,2083.375,757.5,2078.375,755.5,2083.375,757.5,2088.375,751.5,2083.375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="845" y="133.4248">Transfer DAO</text><ellipse cx="890.5" cy="104.4297" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="878.5" x2="902.5" y1="118.4297" y2="118.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="845" y="2076.0732">Transfer DAO</text><ellipse cx="890.5" cy="2095.375" fill="#FEFECE" filter="url(#f4g3bh2abolui)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="878.5" x2="902.5" y1="2109.375" y2="2109.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1069.5" y="133.4248">Central Store</text><path d="M1095.5,84.4297 C1095.5,74.4297 1113.5,74.4297 1113.5,74.4297 C1113.5,74.4297 1131.5,74.4297 1131.5,84.4297 L1131.5,110.4297 C1131.5,120.4297 1113.5,120.4297 1113.5,120.4297 C1113.5,120.4297 1095.5,120.4297 1095.5,110.4297 L1095.5,84.4297 " fill="#FEFECE" filter="url(#f4g3bh2abolui)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1095.5,84.4297 C1095.5,94.4297 1113.5,94.4297 1113.5,94.4297 C1113.5,94.4297 1131.5,94.4297 1131.5,84.4297 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1069.5" y="2076.0732">Central Store</text><path d="M1095.5,2089.375 C1095.5,2079.375 1113.5,2079.375 1113.5,2079.375 C1113.5,2079.375 1131.5,2079.375 1131.5,2089.375 L1131.5,2115.375 C1131.5,2125.375 1113.5,2125.375 1113.5,2125.375 C1113.5,2125.375 1095.5,2125.375 1095.5,2115.375 L1095.5,2089.375 " fill="#FEFECE" filter="url(#f4g3bh2abolui)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1095.5,2089.375 C1095.5,2099.375 1113.5,2099.375 1113.5,2099.375 C1113.5,2099.375 1131.5,2099.375 1131.5,2089.375 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="546.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="349.5" y="503.5156"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="116.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="904.7031"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="1907.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="750.5" y="146.7266"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="915.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885.5" y="1123.8984"/><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1108.5" y="1658.8203"/><path d="M13,153.7266 L298,153.7266 L298,160.7266 L288,170.7266 L13,170.7266 L13,153.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1893.3516" style="stroke: #000000; stroke-width: 2.0;" width="1344" x="13" y="153.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="28" y="166.7935">Record Funds Out - Prepare &amp; Reserve</text><path d="M77,175.8594 L77,472.8594 L364,472.8594 L364,185.8594 L354,175.8594 L77,175.8594 " fill="#FFFF00" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M354,175.8594 L354,185.8594 L364,185.8594 L354,175.8594 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="83" y="192.9263">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="95" y="208.0591">"transferId": &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="95" y="223.1919">"externalReference": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="95" y="238.3247">"action": "recordFundsOutPrepareReserve",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="95" y="253.4575">"amount": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="107" y="268.5903">"amount": &lt;decimal&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="107" y="283.7231">"currency": "string"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="86" y="298.856"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="95" y="313.9888">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="95" y="329.1216">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="95" y="344.2544">"extensionList": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="107" y="359.3872">"extension": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="119" y="374.52">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="131" y="389.6528">"key": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="131" y="404.7856">"value": "string"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="119" y="419.9185">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="107" y="435.0513">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="95" y="450.1841">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="83" y="465.3169">}</text><polygon fill="#A80036" points="337.5,499.5156,347.5,503.5156,337.5,507.5156,341.5,503.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="343.5" y1="503.5156" y2="503.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="79.5" y="498.4497">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="90.5" y="498.4497">POST - /participants/{name}/accounts/{id}</text><path d="M364,516.5156 L364,858.5156 L665,858.5156 L665,526.5156 L655,516.5156 L364,516.5156 " fill="#FFFF00" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M655,516.5156 L655,526.5156 L665,526.5156 L655,516.5156 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="370" y="533.5825">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="370" y="548.7153">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="382" y="563.8481">id: &lt;payload.transferId&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="382" y="578.981">from: "Hub",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="382" y="594.1138">to: "dfspName",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="382" y="609.2466">type: "application/json"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="382" y="624.3794">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="394" y="639.5122">headers: &lt;payloadHeaders&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="394" y="654.645">payload: &lt;payloadMessage&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="382" y="669.7778">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="382" y="684.9106">metadata: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="394" y="700.0435">event: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="406" y="715.1763">id: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="406" y="730.3091">responseTo: "",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="406" y="745.4419">type: "transfer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="406" y="760.5747">action: "recordFundsOutPrepareReserve",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="406" y="775.7075">createdAt: &lt;timestamp&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="406" y="790.8403">state: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="394" y="805.9731">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="382" y="821.106">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="382" y="836.2388">pp: ""</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="370" y="851.3716">}</text><polygon fill="#A80036" points="554.5,900.7031,564.5,904.7031,554.5,908.7031,558.5,904.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="359.5" x2="560.5" y1="904.7031" y2="904.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="366.5" y="892.0708">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="377.5" y="884.5044">Route &amp; Publish Prepare event</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="377.5" y="899.6372">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="451.5" y="899.6372">2003</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="576.5" x2="618.5" y1="964.1016" y2="964.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="618.5" x2="618.5" y1="964.1016" y2="977.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="577.5" x2="618.5" y1="977.1016" y2="977.1016"/><polygon fill="#A80036" points="587.5,973.1016,577.5,977.1016,587.5,981.1016,583.5,977.1016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="583.5" y="943.9028">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="594.5" y="928.77">Ensure event is replicated</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="594.5" y="943.9028">as configured (ACKS=all)</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="594.5" y="959.0356">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="668.5" y="959.0356">2003</text><polygon fill="#A80036" points="370.5,1017.3672,360.5,1021.3672,370.5,1025.3672,366.5,1021.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="364.5" x2="570.5" y1="1021.3672" y2="1021.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="376.5" y="1008.7349">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="387.5" y="1001.1685">Respond replication acks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="387.5" y="1016.3013">have been received</text><polygon fill="#A80036" points="83.5,1046.5,73.5,1050.5,83.5,1054.5,79.5,1050.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="77.5" x2="353.5" y1="1050.5" y2="1050.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="89.5" y="1045.4341">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="100.5" y="1045.4341">Respond HTTP - 202 (Accepted)</text><polygon fill="#A80036" points="582.5,1075.6328,572.5,1079.6328,582.5,1083.6328,578.5,1079.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="576.5" x2="749.5" y1="1079.6328" y2="1079.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="588.5" y="1074.5669">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="599.5" y="1074.5669">Consume message</text><polygon fill="#A80036" points="873.5,1119.8984,883.5,1123.8984,873.5,1127.8984,877.5,1123.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760.5" x2="879.5" y1="1123.8984" y2="1123.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="767.5" y="1111.2661">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="778.5" y="1103.6997">Prepare transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="778.5" y="1118.8325">and reserve</text><path d="M815,1138.8984 L965,1138.8984 L965,1145.8984 L955,1155.8984 L815,1155.8984 L815,1138.8984 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="872.0469" style="stroke: #000000; stroke-width: 2.0;" width="532" x="815" y="1138.8984"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="830" y="1151.9653">DB TRANSACTION</text><path d="M835,1163.0313 L1083,1163.0313 L1083,1170.0313 L1073,1180.0313 L835,1180.0313 L835,1163.0313 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="117.6641" style="stroke: #000000; stroke-width: 2.0;" width="332.5" x="835" y="1163.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="203" x="850" y="1176.0981">Reconciliation Transfer Prepare</text><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="70.5313" style="stroke: #000000; stroke-width: 2.0;" width="314.5" x="842" y="1205.1641"/><polygon fill="#EEEEEE" points="842,1205.1641,906,1205.1641,906,1212.1641,896,1222.1641,842,1222.1641,842,1205.1641" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="855" y="1219.231">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="878.75" y="1238.231">reconciliationTransferPrepare</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1076.75" y="1238.231">{</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.a-reconciliationTransferPrepare.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.a-reconciliationTransferPrepare.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="37" x="1081.75" y="1238.231">5.1.0.a</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1081.75" x2="1118.75" y1="1240.231" y2="1240.231"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1118.75" y="1238.231">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="878.75" y="1253.3638">(payload, trx)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="881.75" y="1268.4966"/><path d="M835,1294.6953 L1082,1294.6953 L1082,1301.6953 L1072,1311.6953 L835,1311.6953 L835,1294.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="223.5938" style="stroke: #000000; stroke-width: 2.0;" width="332.5" x="835" y="1294.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="850" y="1307.7622">Reconciliation Transfer Reserve</text><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="176.4609" style="stroke: #000000; stroke-width: 2.0;" width="314.5" x="842" y="1336.8281"/><polygon fill="#EEEEEE" points="842,1336.8281,906,1336.8281,906,1343.8281,896,1353.8281,842,1353.8281,842,1336.8281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="855" y="1350.895">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="868.75" y="1369.895">transferStateAndPositionUpdate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1082.75" y="1369.895">{</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.b-transferStateAndPositionUpdate.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.b-transferStateAndPositionUpdate.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="38" x="1087.75" y="1369.895">5.1.0.b</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1087.75" x2="1125.75" y1="1371.895" y2="1371.895"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1125.75" y="1369.895">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="868.75" y="1385.0278">({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="880.75" y="1400.1606">transferId: {payload.transferId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="880.75" y="1415.2935">transferStateId: "RESERVED",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="880.75" y="1430.4263">reason: {payload.reason},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="880.75" y="1445.5591">createdDate: {transactionTimestamp},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="880.75" y="1460.6919">drUpdated: true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="880.75" y="1475.8247">crUpdated: false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="868.75" y="1490.9575">}, trx)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="871.75" y="1506.0903"/><path d="M825,1557.2891 L892,1557.2891 L892,1564.2891 L882,1574.2891 L825,1574.2891 L825,1557.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="446.6563" style="stroke: #000000; stroke-width: 2.0;" width="512" x="825" y="1557.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="840" y="1570.356">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="290" x="907" y="1569.4995">[transferStateAndPositionUpdate.crPositionValue &gt; 0]</text><path d="M900,1579.4219 L900,1604.4219 L1224,1604.4219 L1224,1589.4219 L1214,1579.4219 L900,1579.4219 " fill="#D3D3D3" filter="url(#f4g3bh2abolui)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1214,1579.4219 L1214,1589.4219 L1224,1589.4219 L1214,1579.4219 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="906" y="1596.4888">payload.reason = 'Aborted due to insufficient funds'</text><path d="M835,1620.5547 L1067,1620.5547 L1067,1627.5547 L1057,1637.5547 L835,1637.5547 L835,1620.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="376.3906" style="stroke: #000000; stroke-width: 2.0;" width="492" x="835" y="1620.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="850" y="1633.6216">Reconciliation Transfer Abort</text><polygon fill="#A80036" points="1096.5,1654.8203,1106.5,1658.8203,1096.5,1662.8203,1100.5,1658.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="895.5" x2="1102.5" y1="1658.8203" y2="1658.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="902.5" y="1653.7544">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="913.5" y="1653.7544">Insert transferFulfilment record</text><polygon fill="#FFFFE0" filter="url(#f4g3bh2abolui)" points="919,1701.8203,1307,1701.8203,1317,1742.8203,1307,1784.8203,919,1784.8203,909,1742.8203,919,1701.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="921" y="1717.8872">INSERT INTO</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1001" y="1717.8872">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="933" y="1733.02">(transferFulfilmentId, transferId, ilpFulfilment,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="341" x="933" y="1748.1528">completedDate, isValid, settlementWindowId, createdDate)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="384" x="921" y="1763.2856">VALUES ({Uuid()}, {payload.transferId}, 0, {transactionTimestamp},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="933" y="1778.4185">1, NULL, {transactionTimestamp})</text><rect fill="#FFFFFF" filter="url(#f4g3bh2abolui)" height="176.4609" style="stroke: #000000; stroke-width: 2.0;" width="314.5" x="842" y="1815.4844"/><polygon fill="#EEEEEE" points="842,1815.4844,906,1815.4844,906,1822.4844,896,1832.4844,842,1832.4844,842,1815.4844" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="855" y="1829.5513">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="868.75" y="1848.5513">transferStateAndPositionUpdate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1082.75" y="1848.5513">{</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.b-transferStateAndPositionUpdate.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.b-transferStateAndPositionUpdate.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="38" x="1087.75" y="1848.5513">5.1.0.b</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1087.75" x2="1125.75" y1="1850.5513" y2="1850.5513"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1125.75" y="1848.5513">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="868.75" y="1863.6841">({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="880.75" y="1878.8169">transferId: {payload.transferId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="880.75" y="1893.9497">transferStateId: "ABORTED",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="880.75" y="1909.0825">reason: {payload.reason},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="880.75" y="1924.2153">createdDate: {transactionTimestamp},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="880.75" y="1939.3481">drUpdated: true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="880.75" y="1954.481">crUpdated: false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="868.75" y="1969.6138">}, trx)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="871.75" y="1984.7466"/><polygon fill="#A80036" points="771.5,2035.0781,761.5,2039.0781,771.5,2043.0781,767.5,2039.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="765.5" x2="889.5" y1="2039.0781" y2="2039.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="777.5" y="2034.0122">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="788.5" y="2034.0122">Finished await</text><!--
@startuml
title 5.2.1. Record Funds Out - Prepare & Reserve (recordFundsOutPrepareReserve)

autonumber


actor "Hub Employee" as OPERATOR
boundary "Central Service\n Admin API" as CS_ADMIN_API
collections "Admin-Transfer-Topic" as TOPIC_ADMIN_TRANSFER
control "Admin Event Handler" as ADMIN_HANDLER
entity "Transfer DAO" as TRANSFER_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Central Service" #LightYellow
    participant CS_ADMIN_API
	participant TOPIC_ADMIN_TRANSFER
    participant ADMIN_HANDLER
    participant TRANSFER_DAO
    participant DB
end box

activate ADMIN_HANDLER
group Record Funds Out - Prepare & Reserve
    note right of OPERATOR #yellow
        {
            "transferId": <uuid>,
            "externalReference": "string",
            "action": "recordFundsOutPrepareReserve",
            "amount": {
                "amount": <decimal>,
                "currency": "string"

            },
            "reason": "string",
            "extensionList": {
                "extension": [
                    {
                        "key": "string",
                        "value": "string"
                    }
                ]
            }
        }
    end note
    OPERATOR -> CS_ADMIN_API: POST - /participants/{name}/accounts/{id}
    activate CS_ADMIN_API

    note right of CS_ADMIN_API #yellow
        Message:
        {
            id: <payload.transferId>
            from: "Hub",
            to: "dfspName",
            type: "application/json"
            content: {
                headers: <payloadHeaders>,
                payload: <payloadMessage>
            },
            metadata: {
                event: {
                    id: <uuid>,
                    responseTo: "",
                    type: "transfer",
                    action: "recordFundsOutPrepareReserve",
                    createdAt: <timestamp>,
                    state: ""
                }
            },
            pp: ""
        }
    end note
    CS_ADMIN_API -> TOPIC_ADMIN_TRANSFER: Route & Publish Prepare event\n<color #FF0000><b>Error code:</b> 2003</color>
    activate TOPIC_ADMIN_TRANSFER
    TOPIC_ADMIN_TRANSFER <-> TOPIC_ADMIN_TRANSFER: Ensure event is replicated\nas configured (ACKS=all)\n<color #FF0000><b>Error code:</b> 2003</color>
    TOPIC_ADMIN_TRANSFER - -> CS_ADMIN_API: Respond replication acks\nhave been received
    deactivate TOPIC_ADMIN_TRANSFER
    CS_ADMIN_API - - -> OPERATOR: Respond HTTP - 202 (Accepted)
    deactivate CS_ADMIN_API

    TOPIC_ADMIN_TRANSFER <- ADMIN_HANDLER: Consume message
    ADMIN_HANDLER -> TRANSFER_DAO: Prepare transfer\nand reserve
    activate TRANSFER_DAO
    group <color #blue>DB TRANSACTION</color>
        group Reconciliation Transfer Prepare
            |||
            ref over TRANSFER_DAO, DB:**reconciliationTransferPrepare** {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.a-reconciliationTransferPrepare.svg 5.1.0.a]]}\n(payload, trx)\n
        end

        group Reconciliation Transfer Reserve
            |||
            ref over TRANSFER_DAO, DB:**transferStateAndPositionUpdate** {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.b-transferStateAndPositionUpdate.svg 5.1.0.b]]} \n({\n    transferId: {payload.transferId},\n    transferStateId: "RESERVED",\n    reason: {payload.reason},\n    createdDate: {transactionTimestamp},\n    drUpdated: true,\n    crUpdated: false\n}, trx)\n
        end

        |||
        opt transferStateAndPositionUpdate.crPositionValue > 0
            note right of TRANSFER_DAO #lightgray
                payload.reason = 'Aborted due to insufficient funds'
            end note

            group Reconciliation Transfer Abort
                TRANSFER_DAO -> DB: Insert transferFulfilment record
                activate DB
                deactivate DB
                hnote over DB #lightyellow
                    INSERT INTO **transferFulfilment**
                        (transferFulfilmentId, transferId, ilpFulfilment,
                        completedDate, isValid, settlementWindowId, createdDate)
                    VALUES ({Uuid()}, {payload.transferId}, 0, {transactionTimestamp},
                        1, NULL, {transactionTimestamp})
                end hnote
                |||
                ref over TRANSFER_DAO, DB:**transferStateAndPositionUpdate** {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-recfunds-5.1.0.b-transferStateAndPositionUpdate.svg 5.1.0.b]]} \n({\n    transferId: {payload.transferId},\n    transferStateId: "ABORTED",\n    reason: {payload.reason},\n    createdDate: {transactionTimestamp},\n    drUpdated: true,\n    crUpdated: false\n}, trx)\n
            end
        end
    end
    ADMIN_HANDLER <- - TRANSFER_DAO: Finished await
    deactivate TRANSFER_DAO
end
deactivate ADMIN_HANDLER
@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>