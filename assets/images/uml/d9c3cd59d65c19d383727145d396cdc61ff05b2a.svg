<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1380px" preserveAspectRatio="none" style="width:1355px;height:1380px;" version="1.1" viewBox="0 0 1355 1380" width="1355px" zoomAndPan="magnify"><defs><filter height="300%" id="fqxyl1lal4un7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="257" x="549.5" y="22.9951">4.2.0 Get Positions of all Participants</text><rect fill="#ADD8E6" height="1335.4922" style="stroke: #A80036; stroke-width: 1.0;" width="155" x="4" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="7" y="46.3638">ML API Adapter Service</text><rect fill="#FFFFE0" height="1335.4922" style="stroke: #A80036; stroke-width: 1.0;" width="924.5" x="387" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="800.25" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1168.7656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="76.5" y="125.7266"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1123.5" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="449.5" y="170.9922"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1050.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="683.5" y="200.125"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="181.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="956.5" y="244.3906"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="92.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1258.5" y="303.7891"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1154.7656" style="stroke: #000000; stroke-width: 2.0;" width="1329" x="14" y="132.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="81" x2="81" y1="115.7266" y2="1304.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="454" x2="454" y1="115.7266" y2="1304.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="688.5" x2="688.5" y1="115.7266" y2="1304.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="961.5" x2="961.5" y1="115.7266" y2="1304.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1263.5" x2="1263.5" y1="115.7266" y2="1304.4922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="24" y="112.4248">ML-API-ADAPTER</text><ellipse cx="81.5" cy="83.4297" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="69.5" x2="93.5" y1="97.4297" y2="97.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="24" y="1316.4873">ML-API-ADAPTER</text><ellipse cx="81.5" cy="1335.7891" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="69.5" x2="93.5" y1="1349.7891" y2="1349.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="391" y="112.4248">Central Service API</text><path d="M434,71.4297 L434,95.4297 M434,83.4297 L451,83.4297 " fill="none" filter="url(#fqxyl1lal4un7)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="463" cy="83.4297" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="391" y="1316.4873">Central Service API</text><path d="M434,1323.7891 L434,1347.7891 M434,1335.7891 L451,1335.7891 " fill="none" filter="url(#fqxyl1lal4un7)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="463" cy="1335.7891" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="624.5" y="112.4248">Participant Handler</text><ellipse cx="688.5" cy="83.4297" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="684.5,71.4297,690.5,66.4297,688.5,71.4297,690.5,76.4297,684.5,71.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="624.5" y="1316.4873">Participant Handler</text><ellipse cx="688.5" cy="1335.7891" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="684.5,1323.7891,690.5,1318.7891,688.5,1323.7891,690.5,1328.7891,684.5,1323.7891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="907.5" y="112.4248">Participant DAO</text><ellipse cx="961.5" cy="83.4297" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="949.5" x2="973.5" y1="97.4297" y2="97.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="907.5" y="1316.4873">Participant DAO</text><ellipse cx="961.5" cy="1335.7891" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="949.5" x2="973.5" y1="1349.7891" y2="1349.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1219.5" y="112.4248">Central Store</text><path d="M1245.5,63.4297 C1245.5,53.4297 1263.5,53.4297 1263.5,53.4297 C1263.5,53.4297 1281.5,53.4297 1281.5,63.4297 L1281.5,89.4297 C1281.5,99.4297 1263.5,99.4297 1263.5,99.4297 C1263.5,99.4297 1245.5,99.4297 1245.5,89.4297 L1245.5,63.4297 " fill="#FEFECE" filter="url(#fqxyl1lal4un7)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1245.5,63.4297 C1245.5,73.4297 1263.5,73.4297 1263.5,73.4297 C1263.5,73.4297 1281.5,73.4297 1281.5,63.4297 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1219.5" y="1316.4873">Central Store</text><path d="M1245.5,1329.7891 C1245.5,1319.7891 1263.5,1319.7891 1263.5,1319.7891 C1263.5,1319.7891 1281.5,1319.7891 1281.5,1329.7891 L1281.5,1355.7891 C1281.5,1365.7891 1263.5,1365.7891 1263.5,1365.7891 C1263.5,1365.7891 1245.5,1365.7891 1245.5,1355.7891 L1245.5,1329.7891 " fill="#FEFECE" filter="url(#fqxyl1lal4un7)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1245.5,1329.7891 C1245.5,1339.7891 1263.5,1339.7891 1263.5,1339.7891 C1263.5,1339.7891 1281.5,1339.7891 1281.5,1329.7891 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1168.7656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="76.5" y="125.7266"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1123.5" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="449.5" y="170.9922"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1050.2344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="683.5" y="200.125"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="181.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="956.5" y="244.3906"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="92.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1258.5" y="303.7891"/><path d="M14,132.7266 L185,132.7266 L185,139.7266 L175,149.7266 L14,149.7266 L14,132.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1154.7656" style="stroke: #000000; stroke-width: 2.0;" width="1329" x="14" y="132.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="29" y="145.7935">Get Position Details</text><polygon fill="#A80036" points="437.5,166.9922,447.5,170.9922,437.5,174.9922,441.5,170.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86.5" x2="443.5" y1="170.9922" y2="170.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="93.5" y="165.9263">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="104.5" y="165.9263">Request to get positions - GET - /participants/positions</text><polygon fill="#A80036" points="671.5,196.125,681.5,200.125,671.5,204.125,675.5,200.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="459.5" x2="677.5" y1="200.125" y2="200.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="466.5" y="195.0591">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="477.5" y="195.0591">Fetch Positions for all Participants</text><polygon fill="#A80036" points="944.5,240.3906,954.5,244.3906,944.5,248.3906,948.5,244.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="693.5" x2="950.5" y1="244.3906" y2="244.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="700.5" y="231.7583">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="711.5" y="224.1919">Fetch Positions for all active Participants</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="71" x="711.5" y="239.3247">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="785.5" y="239.3247">2003,3200</text><polygon fill="#A80036" points="1246.5,299.7891,1256.5,303.7891,1246.5,307.7891,1250.5,303.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="1252.5" y1="303.7891" y2="303.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="973.5" y="283.5903">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="984.5" y="268.4575">Fetch Positions for:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="987.5" y="283.5903">all active Participants</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="987.5" y="298.7231">with all active Currencies for each Participant</text><polygon fill="#FFFFE0" filter="url(#fqxyl1lal4un7)" points="1203,316.7891,1323,316.7891,1333,342.7891,1323,369.7891,1203,369.7891,1193,342.7891,1203,316.7891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1205" y="332.856">participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="1205" y="347.9888">participantPosition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1205" y="363.1216">participantCurrency</text><polygon fill="#A80036" points="977.5,392.3203,967.5,396.3203,977.5,400.3203,973.5,396.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="971.5" x2="1262.5" y1="396.3203" y2="396.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="983.5" y="391.2544">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="994.5" y="391.2544">Retrieved Positions for Participants</text><polygon fill="#A80036" points="704.5,421.4531,694.5,425.4531,704.5,429.4531,700.5,425.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="698.5" x2="960.5" y1="425.4531" y2="425.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="710.5" y="420.3872">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="721.5" y="420.3872">Return Positions for Participants</text><path d="M698,438.4531 L698,1219.4531 L951,1219.4531 L951,448.4531 L941,438.4531 L698,438.4531 " fill="#FFFF00" filter="url(#fqxyl1lal4un7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M941,438.4531 L941,448.4531 L951,448.4531 L941,438.4531 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="704" y="455.52">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="704" y="470.6528">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="716" y="485.7856">snapshotAt: &lt;timestamp0&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="716" y="500.9185">positions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="716" y="516.0513">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="728" y="531.1841">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="740" y="546.3169">participantId: &lt;dfsp1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="740" y="561.4497">participantPositions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="740" y="576.5825">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="752" y="591.7153">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="764" y="606.8481">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="776" y="621.981">currency: &lt;currency1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="776" y="637.1138">value: &lt;amount1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="776" y="652.2466">reservedValue: &lt;amount2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="776" y="667.3794">lastUpdated: &lt;timeStamp1&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="764" y="682.5122">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="752" y="697.645">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="752" y="712.7778">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="764" y="727.9106">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="776" y="743.0435">currency: &lt;currency2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="776" y="758.1763">value: &lt;amount3&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="776" y="773.3091">reservedValue: &lt;amount4&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="776" y="788.4419">lastUpdated: &lt;timeStamp2&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="764" y="803.5747">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="752" y="818.7075">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="740" y="833.8403">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="728" y="848.9731">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="728" y="864.106">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="740" y="879.2388">participantId: &lt;dfsp2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="740" y="894.3716">participantPositions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="740" y="909.5044">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="752" y="924.6372">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="764" y="939.77">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="776" y="954.9028">currency: &lt;currency1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="776" y="970.0356">value: &lt;amount1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="776" y="985.1685">reservedValue: &lt;amount2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="776" y="1000.3013">lastUpdated: &lt;timeStamp1&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="764" y="1015.4341">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="752" y="1030.5669">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="752" y="1045.6997">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="764" y="1060.8325">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="776" y="1075.9653">currency: &lt;currency2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="776" y="1091.0981">value: &lt;amount3&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="776" y="1106.231">reservedValue: &lt;amount4&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="776" y="1121.3638">lastUpdated: &lt;timeStamp2&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="764" y="1136.4966">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="752" y="1151.6294">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="740" y="1166.7622">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="728" y="1181.895">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="716" y="1197.0278">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="704" y="1212.1606">}</text><polygon fill="#A80036" points="470.5,1246.3594,460.5,1250.3594,470.5,1254.3594,466.5,1250.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="464.5" x2="687.5" y1="1250.3594" y2="1250.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="476.5" y="1245.2935">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="487.5" y="1245.2935">Return Positions for Participants</text><polygon fill="#A80036" points="97.5,1275.4922,87.5,1279.4922,97.5,1283.4922,93.5,1279.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="91.5" x2="448.5" y1="1279.4922" y2="1279.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="103.5" y="1274.4263">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="114.5" y="1274.4263">Return Positions for Participants</text><!--
@startuml
title 4.2.0 Get Positions of all Participants

autonumber



entity "ML-API-ADAPTER" as MLAPI
boundary "Central Service API" as CSAPI
control "Participant Handler" as PARTICIPANT_HANDLER
entity "Central Service API" as CSAPI
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB
box "ML API Adapter Service" #LightBlue
	participant MLAPI
end box

box "Central Service" #LightYellow
    participant CSAPI
    participant PARTICIPANT_HANDLER
    participant PARTICIPANT_DAO
    participant DB
end box


activate MLAPI
group Get Position Details
MLAPI -> CSAPI: Request to get positions - GET - /participants/positions
    activate CSAPI
    CSAPI -> PARTICIPANT_HANDLER: Fetch Positions for all Participants
    activate PARTICIPANT_HANDLER
    PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Fetch Positions for all active Participants \n<color #FF0000><b>Error code:</b> 2003,3200 </color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO ->DB: Fetch Positions for: \n all active Participants \n with all active Currencies for each Participant
    activate DB
    hnote over DB #lightyellow
            participant
            participantPosition
            participantCurrency
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Positions for Participants
    deactivate DB
    PARTICIPANT_DAO - ->PARTICIPANT_HANDLER: Return Positions for Participants
    deactivate PARTICIPANT_DAO
    note right of PARTICIPANT_HANDLER #yellow
            Message:
            {
                snapshotAt: <timestamp0>,
                positions:
                [
                    {
                        participantId: <dfsp1>,
                        participantPositions:
                        [
                            {
                                currentPosition: {
                                    currency: <currency1>,
                                    value: <amount1>,
                                    reservedValue: <amount2>,
                                    lastUpdated: <timeStamp1>
                                }
                            },
                            {
                                currentPosition: {
                                    currency: <currency2>,
                                    value: <amount3>,
                                    reservedValue: <amount4>,
                                    lastUpdated: <timeStamp2>
                                }
                            }
                        ]
                    },
                    {
                        participantId: <dfsp2>,
                        participantPositions:
                        [
                            {
                                currentPosition: {
                                    currency: <currency1>,
                                    value: <amount1>,
                                    reservedValue: <amount2>,
                                    lastUpdated: <timeStamp1>
                                }
                            },
                            {
                                currentPosition: {
                                    currency: <currency2>,
                                    value: <amount3>,
                                    reservedValue: <amount4>,
                                    lastUpdated: <timeStamp2>
                                }
                            }
                        ]
                    }
                ]
            }
        end note
    PARTICIPANT_HANDLER - ->CSAPI: Return Positions for Participants
	deactivate PARTICIPANT_HANDLER
CSAPI - ->MLAPI: Return Positions for Participants

end
    deactivate CSAPI
deactivate MLAPI

@enduml

PlantUML version 1.2018.02(Fri Mar 09 17:20:44 GMT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1035-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>